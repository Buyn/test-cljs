* Commands>
** execute-src-block:
(save-excursion (progn (org-babel-goto-named-src-block "auto-tangle-block") (org-babel-execute-src-block)))
(save-excursion (let () (org-babel-goto-named-src-block "auto-tangle-block") (org-babel-execute-src-block)))
and then name the block you want to execute automatically:

** find-file:
[[elisp:(org-babel-tangle)
]]
(find-file-other-frame "~/INI/hydra-cfg.el")
(load "~/INI/hydra-cfg.el")
(org-babel-tangle)
** auto-tangle-block:
#+NAME: auto-tangle-block
#+begin_src emacs-lisp :results output silent :tangle no
(setq org-src-preserve-indentation t)
(untabify (point-min) (point-max))
(save-buffer)
;; (universal-argument)
;; (universal-argument)
(org-babel-tangle)
(find-file-other-frame "reagent-test/src/learn_cljs/reagent_test.cljs")
;; (find-file-other-frame "~/INI/hydra-cfg.el")
;; (load "~/INI/hydra-cfg.el")
;; (load "~/ELs/BuYn/reader.el")
 #+end_src

 
#+begin_src emacs-lisp :results output silent :tangle no
(save-buffer)
(org-babel-tangle)
(load "~/INI/hydra-cfg.el")
(load "~/ELs/BuYn/reader.el")
 #+end_src

from
#+HEADER: :tangle ~/INI/hydra-cfg.el

#+PROPERTY:    tangle ~/INI/hydra-cfg.el

:header-args: :tangle  "~/INI/hydra-cfg.el"
* Source files
** Worder
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/worder/worder-cljs-project.org")
** TodoMVC
*** risoning
**** index.html
–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ—á–∫—É –≤ —Ö–æ–¥–∞ –≤ —Å–∫—Ä–∏–ø—Ç
    <script>keechma_todomvc.app.main()</script>
**** app.cljs
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/app.cljs")
***** ^:export main
(defn ^:export main
  "Called from `index.html` to start the app. Exported because
  `index.html` refers to it by name even in non-dev builds."
  []
  (dev-setup)
  (start!))
***** dev-setup
–ø–æ—Ö–æ–∂–µ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≥–¥–µ—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –¥–µ–±–∞–≥–∞
–ø–æ–∏–¥–µ–µ –µ—Å–ª–∏ –Ω–µ —Ä–µ–ª–∏–∑ —Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–ª—é—á–µ–Ω–∞
–ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ (enable-console-print!):
(println "hello") ;; => –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è "hello"

(defn dev-setup
  "Enables console output for dev builds."
  []
  (when ^boolean js/goog.DEBUG
    (enable-console-print!)
    (println "dev mode")))
***** (defn start!
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ
  (reset! running-app (keechma.app-state/start! app-definition)))
***** (def app-definition
  {:routes [[":status" {:status "all"}]]
   :controllers {:todos (keechma-todomvc.controllers.todos/->Controller)}
   :components keechma-todomvc.components/system
   :subscriptions keechma-todomvc.subscriptions/subscriptions
   :html-element (.getElementById js/document "app")})
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ
    <div id="app"> </div>
**** :controllers {:todos (keechma-todomvc.controllers.todos/->Controller)}
***** –∫–ª–æ—é—á–µ–≤–æ–µ –≤ start Controller
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/controllers/todos.cljs")
(defmethod controller/start Controller
  [_ params app-db]
  (keechma-todomvc.entities.todo/create-todos app-db))
–æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç todo/create-todos —Å app-db
[[*entities/todo.cljs][entities/todo.cljs]]


(defmethod controller/handler Controller
  [_ app-db-atom in-chan _]
  (controller/dispatcher app-db-atom in-chan (keechma-todomvc.entities.todo/actions)))
–∏ –≤–∏–¥–µ–º–æ —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–º–∞–Ω–¥ –≤ entities.todo/actions
[[*entities/todo.cljs][entities/todo.cljs]]
(defn actions
  (let [cmd-handlers {:start-edit start-edit
                      :cancel-edit cancel-edit
                      :confirm-edit confirm-edit
                      :create-todo create-todo
                      :delete-todo delete-todo
                      :toggle-todo toggle-todo
                      :toggle-all toggle-all
                      :delete-completed delete-completed}
***** [[*entities/todo.cljs][entities/todo.cljs]]
**** :subscriptions keechma-todomvc.subscriptions/subscriptions
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/subscriptions.cljs")

–Ω–∞–±–æ—Ä –ø–æ–¥–ø–æ—Å–æ–∫ –≤—ã–Ω–µ—Å–µ–Ω –≤ –¥—Ä—É–≥–æ–π —Ñ–∞–∏–ª –≤ —Ü–µ–ª–æ–≤ –≤—Å—ë —Ç–∞–∫–∂–µ
(def subscriptions {:todos-by-status todos-by-status
                    :count-todos-by-status count-todos-by-status
                    :has-todos-by-status? has-todos-by-status?
                    :has-todos? has-todos?
                    :edit-todo edit-todo})

–ø–æ–¥–ø–∏—Å–∫–∏ –≤—Ä–∞—à–∞—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤–æ–∫—Ä—É–≥ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞—Ç–æ–º–∞
–Ω–æ —á–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –≤—ã–Ω–µ—Å–∞–Ω–∞ –≤ –¥—Ä—É–≥–æ–π —Ñ–∞–∏–ª
[[*entities/todo.cljs][entities/todo.cljs]]
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/entities/todo.cljs")
**** entities/todo.cljs
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/entities/todo.cljs")
–∫–ª—é—á–∏–≤–æ–π —Ñ–∞–∏–ª –ø–æ—Å—É—Ç–∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –º–µ–∂–¥—É –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏
—Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
–ø–æ—Å—É—Ç–∏ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –∏–∑ –±–∞–∑—ã —Ç—É–¥—É
–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥–Ω–∏–º
–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –±–∞–∑–æ–π —á–µ—Ä–µ–∑
            [keechma-todomvc.edb :as edb])
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/edb.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/edb.clj")
—á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω—ã—Ö –ø–æ–¥–∫–æ–ø–æ—Ç–æ–º
  (:require [entitydb.core :as edb])
–æ–±–æ—Ä–∞—á–∏–≤–∞—è –µ—ë –≤—ã–∑–æ–≤—ã —á—Ç–æ–± –∏—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–æ–≤–∞—Ç—å

–¢–û–µ—Å—Ç—å —ç—Ç–æ—Ç —Ñ–∞–∏–ª –æ–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∞—Ç–æ–º–æ–º –∞–ø–ø–∞
–≤ –Ω–µ–º –µ—Å—Ç—å –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –¥–ª—è –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å —Ç—É–¥—É
(defn actions
  (let [cmd-handlers {:start-edit start-edit
                      :cancel-edit cancel-edit
                      :confirm-edit confirm-edit
                      :create-todo create-todo
                      :delete-todo delete-todo
                      :toggle-todo toggle-todo
                      :toggle-all toggle-all
                      :delete-completed delete-completed}
**** :components keechma-todomvc.components/system
***** def system
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components.cljs")
(def system
  {:main app/component
   :footer (assoc footer/component :topic :todos)
   :new-todo (assoc new-todo/component :topic :todos)
   :todo-edit (assoc todo-edit/component :topic :todos)
   :todo-item (assoc todo-item/component :topic :todos)
   :todo-list todo-list/component
   :toggle-todos (assoc toggle-todos/component :topic :todos)})

–≤ –∫–æ—Ç–æ—Ä—ã—Ö
  (:require [keechma-todomvc.components.app :as app]
            [keechma-todomvc.components.footer :as footer]
            [keechma-todomvc.components.new-todo :as new-todo]
            [keechma-todomvc.components.todo-edit :as todo-edit]
            [keechma-todomvc.components.todo-item :as todo-item]
            [keechma-todomvc.components.todo-list :as todo-list]
            [keechma-todomvc.components.toggle-todos :as toggle-todos]))
***** :main app/component
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/app.cljs")
–ø–æ—Ö–æ–∂–µ –æ–Ω –∫–∞–∫ –æ—Å–Ω–æ–≤—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 
  (:require [keechma-todomvc.ui :refer [<comp comp> sub>]]))
  –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–± –ø–æ–¥–∫–ª—é—á–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã –∫–∞–∫ –≤—Å—Ç—Ä–∞–µ–≤—É–µ–º—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

(def component
  (<comp :renderer render
         :component-deps [:new-todo
                          :toggle-todos
                          :todo-list
                          :footer]
         :subscription-deps [:has-todos?]))

 –∞ –ø–æ—Ç–æ–º –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –∏—Ö –ø–æ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ –∫–∞–∫ —Ö–∏–∫–∞–ø —Å—Ç—Ä—É–∫—Ç—É—Ä—ã  –≤ —Ä–µ–Ω–¥–µ—Ä–µ—Ä –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ—Ç–∞

(defn render
  [ctx]
  [:<>
   [:section.todoapp
    [:header.header
     [:h1 "todos"]
     [comp> ctx :new-todo]]
    (when (sub> ctx :has-todos?)
      [:<>
       [:section.main
        [comp> ctx :toggle-todos]
        [comp> ctx :todo-list]]
       [comp> ctx :footer]])]
   [:footer.info
    [:p "Double-click to edit a todo"]
    [:p
     [:a {:href "https://keechma.com"} "Keechma"] " "
     [:a {:href "http://todomvc.com"} "TodoMVC"]]]])
–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º —è–≤–ª–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –ø—Ä—è–º –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º—É–Ω–Ω—É—é –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ –∏ –µ—Å–ª–∏ –æ–Ω–∞ —Ç—Ä—É —Ä–∏—Å—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–µ–ª –ª–∏–±–æ –Ω–µ—Ç
***** keechma-todomvc.ui
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/ui.cljs")
–æ–±–µ—Ä—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–π
  (:require [keechma.ui-component :as ui]))
–≤ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç c –ø—Ä–∏—Ñ–∏–∫—Å–∞–º–∏ <  –∏–ª–∏ –ø–æ—Ñ–∏–∫—Å–æ–º >

(defn <comp
(defn <cmd
(defn <url
(defn comp>
(defn sub>
(defn route>

***** :new-todo (assoc new-todo/component :topic :todos)
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/new_todo.cljs")
  (let [new-title (reagent/atom "")]
    (fn []
      [:input.new-todo
       {:placeholder "What needs to be done?"
        :value @new-title
        :auto-focus true
        :on-change #(reset! new-title (.. % -target -value))
        :on-key-down #(when (is-enter? (.-keyCode %))
                        (<cmd ctx :create-todo @new-title)
                        (reset! new-title ""))}])))
  –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä—è–º –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ö–∏–∫–∞–ø–∞ –ø–µ—Ä–µ–¥–æ–≤–∞—è –∏—Ö –∫–∞–∫ –ª—è–º–±–¥–æ —Ñ—É–Ω–∫—Ü–∏–∏
—ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–± –ø–æ–ª—É—á–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∞—Ç–æ–º –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
—Ç–æ–µ—Å—Ç—å –æ–Ω –±—É–¥–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Å—ë –≤—Ä–µ–º—è –ø–æ–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ—Ç –ø–æ—Å–∫–æ–ª—å–∫—É —Å–æ–∑–¥–∞–Ω –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
—Å—Ç—Ä—É–∫—Ä—Ç—É—Ä–∞ –ø–µ—Ä–µ—Ä–µ—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∑–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ –∏ –µ—Å–ª–∏ –æ–±–µ–∫—Ç —Å–æ–∑–¥–æ–≤–∞–ª—Å—è –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –∏ —Å–æ–∑–¥–æ–≤–∞–ª—Å—è –æ–Ω –±—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ.

–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–∂–∞—Ç–∏—è —ç–Ω—Ç–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 
            [keechma-todomvc.util :refer [is-enter?]]
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/util.cljs")

(defn is-enter? [key-code]
  (= key-code 13))

(defn is-esc? [key-code]
  (= key-code 27))

—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç—É–¥—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –∫–æ–º–∞–Ω–¥–µ
                        (<cmd ctx :create-todo @new-title)

(defn create-todo
  "If `title` is valid, creates a new `todo` and inserts it at the
  beginning of the `todo` list."
  [app-db title]
  (if (valid-title? title)
    (let [todo {:id (str "todo" (id))
                :completed false
                :title title}]
      (edb/prepend-collection app-db :todos :list [todo]))
    app-db))

***** :toggle-todos (assoc toggle-todos/component :topic :todos)})
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/toggle_todos.cljs")
—ç–ª–∏–º–µ–Ω—Ç –ø–µ—Ä–µ—Ç –ø–æ–ª–µ–º –∏–º–ø—É—Ç–∞ –≤–∫–ª—é—á–∞—é—à–∏–π –∏ –≤—ã–∫–ª—é—á–∞—é—à–∏–π –≤—Å–µ —Ç—É–¥—É—à–∫–∏
–∫—Ä–∞—Å–∏–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ —Ä–∞–∑–≤–Ω–æ–≤–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –æ—Ç —É—á—ë—Ç–∞ –Ω–∞–ª–∏—á–∏—è —Ç—É–¥—É—à–æ –∏ –∏—Ö –æ—Ç—Å—É—Ç–≤–∏—è

***** :todo-list todo-list/component
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/todo_list.cljs")
****** (def component
  (<comp :renderer render
         :component-deps [:todo-item]
         :subscription-deps [:todos-by-status
                             :edit-todo]))

–ù–µ–æ–±—ã—á–Ω—ã–º –µ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Ç—å –æ—Ç –¥—Ä—É–≥–æ–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ [:todo-item]
****** render

–±–ª–æ–≥–æ–¥–æ—Ä—è —ç—Ç–æ–º—É –∫–æ–º–ø–æ–Ω–µ—Ç—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è li –¥–ª—è ul —Ç–∞–±–ª–∏—Ü—ã
[:ul.todo-list
     (doall (map todo-item (sub> ctx :todos-by-status route-status)))]

–æ—Å–Ω–æ–≤–∞ —Ä–µ–∞–∫—Ç –∞—Ç–æ–º todos-by-status –≤–æ–∑–≤—Ä–∞—à–∞—é—à–∏–π –º–µ–ø —Ç—É–¥—É—à–µ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å
     (doall (map todo-item (sub> ctx :todos-by-status route-status)))]))
doall –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç map —Ä–µ–∞–ª—å–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å—Å—è (–∏–Ω–∞—á–µ map –≤ Clojure –ª–µ–Ω–∏–≤—ã–π)

(defn todos-by-status
  "Returns a `reaction` on the list of `todos` with a `status`."
  [app-db status]
  (reaction
   (todo/todos-by-status @app-db status)))

–∫–æ—Ç–æ—Ä—ã–π —Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –µ–Ω—Ç–∏—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é
(defn todos-by-status
  "Returns all `todos` with a `status`."
  [app-db status]
  (let [todos (edb/get-collection app-db :todos :list)]
    (case status
      :completed (filter :completed todos)
      :active (filter (complement :completed) todos)
      :all todos)))
–ø—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –º–∞–ø—É –≤—Å–µ—Ö —Ç—É–¥—É—à–µ–∫ –ø–æ—Ç–æ–º –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–¥–∏–Ω –∏–∑ 3—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

****** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Keechma EntityDB

Keechma –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç EntityDB ‚Äî —ç—Ç–æ –Ω–µ –æ–±—ã—á–Ω—ã–π map, –∞ —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å "–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏" —Å—É—â–Ω–æ—Å—Ç—è–º–∏, –∫–∞–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –≤ –ø–∞–º—è—Ç–∏ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å app-db:

{:edb {:todos
       {:entities {1 {:id 1 :title "Buy milk" :status :active}
                   2 {:id 2 :title "Hack the planet" :status :completed}}
        :lists {:list [1 2]}}}}


–¢–µ–ø–µ—Ä—å:

:todos ‚Äî —ç—Ç–æ ‚Äú—Ç–∞–±–ª–∏—Ü–∞‚Äù (entity type)

:entities ‚Äî –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —ç—Ç–æ–≥–æ —Ç–∏–ø–∞

:lists ‚Äî —ç—Ç–æ ‚Äú–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è‚Äù (view) –∏–ª–∏ ‚Äú–∫–æ–ª–ª–µ–∫—Ü–∏–∏‚Äù (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ ID-—à–Ω–∏–∫–æ–≤)

üîπ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç get-collection

–ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å:

(edb/get-collection app-db :todos :list)


EntityDB –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

–ë–µ—Ä—ë—Ç –∏–∑ :edb —Ç–∞–±–ª–∏—Ü—É :todos

–ù–∞—Ö–æ–¥–∏—Ç –∫–æ–ª–ª–µ–∫—Ü–∏—é :list (—Å–ø–∏—Å–æ–∫ ID-—à–Ω–∏–∫–æ–≤)

–ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫ –∫–∞–∂–¥–æ–º—É ID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—É—â–Ω–æ—Å—Ç—å

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä –ø–æ–ª–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.

–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:

[{:id 1 :title "Buy milk" :status :active}
 {:id 2 :title "Hack the planet" :status :completed}]

****** –ø–æ–ª—É—á–∏–≤—à—É—é—Å—è –º–∞–ø—É —Ç—É–¥—É—à–µ–∫ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è
        todo-item (fn [{id :id :as todo}]
                    ^{:key id} [comp> ctx :todo-item todo (is-editing? id)])]
–æ–Ω–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ—Ç –º–∞–ø—É —Ç—É–¥—É—à–µ–∫ –≤ –º–∞–ø—É li —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü–∏.

–ê —á—Ç–æ –¥–µ–ª–∞–µ—Ç ^{:key id} ?
–≠—Ç–æ —Ä–µ–∞–≥–µ–Ω—Ç–æ–≤—Å–∫–∞—è –º–µ—Ç–∫–∞, –∞–Ω–∞–ª–æ–≥ React‚Äô–æ–≤—Å–∫–æ–≥–æ key.
–û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç Reagent (–∞ –∑–Ω–∞—á–∏—Ç –∏ React –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º) –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –∞ –∫–∞–∫–∏–µ –Ω–µ—Ç ‚Äî
—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –≤—Å—ë —Ü–µ–ª–∏–∫–æ–º.
****** :todo-item (assoc todo-item/component :topic :todos)
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/todo_item.cljs")
******* (defn render
  [ctx todo is-editing?]
  [:li {:class [(when is-editing? :editing)
                (when (:completed todo) :completed)]}
   [:div.view {:on-double-click #(<cmd ctx :start-edit todo)}
    [:input.toggle {:type :checkbox
                    :checked (:completed todo)
                    :on-change #(<cmd ctx :toggle-todo todo)}]
    [:label (:title todo)]
    [:button.destroy {:on-click #(<cmd ctx :delete-todo todo)}]]
   (when is-editing?
     [comp> ctx :todo-edit])])

–≤—ã–∑–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å 3 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ - –∫–æ–Ω—Ç–µ–∫—Å—Ç, –º–∞–ø–∞ —Ç—É–¥—É –∏ —Å—Ç–∞—Ç—É —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è
******* –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä–∏—à–µ—Ç—à–∏–π —Ç—É–¥—É –≤ —Ö–∏–∫–∞–ø —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑
- a `checkbox` for toggling `:completed`
- a `label` displaying the `:title`
- a `button` to delete the item
******* –∑–∞–∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ª—É—á–∞—è –∫–æ–≥–¥–∞ —Ç—É–¥—É —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è
—Ç–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ—Ç :todo-edit
******* on-double-click
–ø—Ä–∏ –¥–≤–æ–π –Ω–æ–º –∫–ª–∏–∫–µ –ø–æ—Å—É—Ç–µ –ø—Ä–æ—Å—Ç–æ—Å—Ç–æ –ø–æ–º–µ—à–∞–µ—Ç —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–º–µ–Ω—É—é :editing-id –ø–æ –ø—É—Ç–∏ :kv –ø–æ–º–µ—à–∞—è –≤ –Ω–µ—ë id —Ç–µ–∫—É—à–µ–π —Ç—É–¥—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
   [:div.view {:on-double-click #(<cmd ctx :start-edit todo)}
:start-edit
  "Sets state: this `todo` is currently being edited."
  [app-db {:keys [id] :as todo}]
  (assoc-in app-db [:kv :editing-id] id))

******* input.toggle :type :checkbox
    [:input.toggle {:type :checkbox
                    :checked (:completed todo)
                    :on-change #(<cmd ctx :toggle-todo todo)}]

–∑–∞ –¥–∞—ë–º —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—è –ø–æ–ª–µ–º :completed –∏–∑ todo
:checked (:completed todo)
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç ([:input.toggle {...}]) ‚Äî –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö (Hiccup).
–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ Reagent —Ä–µ—à–∞–µ—Ç ‚Äú–ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å‚Äù –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª—Å—è –∞—Ç–æ–º, –ø–æ–¥–ø–∏—Å–∫–∞ –∏ —Ç. –¥.), –æ–Ω –∑–∞–Ω–æ–≤–æ –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é. –∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –Ω—É—Ç—Ä–∏


:on-change #(<cmd ctx :toggle-todo todo)
–í–æ—Ç —ç—Ç–æ ‚Äî —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∏–∫.
–ö–æ–≥–¥–∞ —é–∑–µ—Ä —â—ë–ª–∫–∞–µ—Ç —á–µ–∫–±–æ–∫—Å, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫.
******* (<cmd ctx :toggle-todo todo)}
–æ—Ç–ø—Ä–∞–ª—è–µ—Ç –¥–∞–Ω—ã–µ –≤ –≥–ª–∞–≤–Ω—É—é –ø–µ—Ä–º–µ–Ω–Ω—É—é
–∏ —É–∂–µ –∑—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–≤ –∏–∑–º–µ–Ω–∏–µ —Ä–µ–∞–≥–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–∫—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
–∏—É–∂–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –µ–≥–æ —Å –ø–æ–º–µ—Ç–∫–æ–π
(defn toggle-todo
  "Toggles the `:completed` status of a saved `todo`."
  [app-db todo]
  (update-todo app-db (update todo :completed not)))

(defn update-todo
  "Merges new data into a `todo`. `patch-todo` must have an `:id`
  value that is the `id` of the `todo` to be updated."
  [app-db {:keys [id] :as patch-todo}]
  (assert id)
  (edb/insert-item app-db :todos patch-todo))

******* [:button.destroy {:on-click #(<cmd ctx :delete-todo todo)}]]
(defn delete-todo
  "Removes a `todo` from the EntityDB."
  [app-db {:keys [id] :as todo}]
  (edb/remove-item app-db :todos id))

******* is-editing?
—Å—Ç–∞–≤–∏—Ç —Å–≤–æ–π—Å—Ç–æ–≤
  [:li {:class [(when is-editing? :editing)
      (when (:completed todo) :completed)]}
******* :todo-edit (assoc todo-edit/component :topic :todos)
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/todo_edit.cljs")
******** defn form-3-render
  [ctx]
  (let [edit-todo (sub> ctx :edit-todo)
        todo-title (reagent/atom (:title edit-todo))
        handle-change #(reset! todo-title (.. % -target -value))
        update #(<cmd ctx :confirm-edit (assoc edit-todo :title @todo-title))
        cancel #(<cmd ctx :cancel-edit)
        handle-key-down #(let [key-code (.-keyCode %)]
                           (when (is-enter? key-code) (update))
                           (when (is-esc? key-code) (cancel)))
        render (fn []
                 [:input.edit {:value @todo-title
                               :on-blur update
                               :on-change handle-change
                               :on-key-down handle-key-down}])
        focus-input #(let [node (reagent/dom-node %)
                           length (count (.-value node))]
                       (.focus node)
                       (.setSelectionRange node length length))]
    (reagent/create-class
     {:display-name "todo-edit"
      :reagent-render render
      :component-did-mount focus-input})))

******** –∑–∞—á–µ–º —Ñ–æ—Ä–º–∞ 3
–û—Ç–ª–∏—á–Ω—ã–π, *–ø–æ-–≤–∑—Ä–æ—Å–ª–æ–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π* –≤–æ–ø—Ä–æ—Å.
–¢—ã –ø—Ä—è–º–æ –≤—ã—à–µ–ª –Ω–∞ –≥—Ä–∞–Ω—å –º–µ–∂–¥—É –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–º –º–∏—Ä–æ–º Reagent –∏ –µ–≥–æ –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º API ‚Äî –∏ –∏–º–µ–Ω–Ω–æ —Ç–∞–º –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∞—è –≥–∏–±–∫–æ—Å—Ç—å UI –≤ ClojureScript.

–†–∞–∑–±–µ—Ä—ë–º —Å–ø–æ–∫–æ–π–Ω–æ –∏ –ø–æ —à–∞–≥–∞–º:

---

## üí° –í —á—ë–º –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞

–í –æ–±—ã—á–Ω–æ–º (form-2) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ —Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å **hiccup-–≤–µ–∫—Ç–æ—Ä**, –∏ Reagent —Å–∞–º —Å–æ–∑–¥–∞—ë—Ç React-–∫–ª–∞—Å—Å –∑–∞ —Ç–µ–±—è –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.
–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ, –Ω–æ:

  * –£ —Ç–µ–±—è **–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ lifecycle hooks** (`component-did-mount`, `should-component-update`, –∏ —Ç. –¥.)
  * –¢—ã **–Ω–µ –º–æ–∂–µ—à—å –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞—Ç—å —Å DOM-–Ω–æ–¥–æ–π** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ–∫—É—Å, –∏–∑–º–µ—Ä–∏—Ç—å –≤—ã—Å–æ—Ç—É –∏ —Ç.–¥.)
  * –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å ‚Äî —Ç—ã –¥–µ—Ä–∂–∏—à—å –≤ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∞—Ç–æ–º–∞—Ö.

---

## üß© Form-3 ‚Äî —Ä—É—á–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å

–ö–æ–≥–¥–∞ —Ç—ã —Å–æ–∑–¥–∞—ë—à—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–µ—Ä–µ–∑ `reagent/create-class`, —Ç—ã **—Å–∞–º —Ñ–æ—Ä–º–∏—Ä—É–µ—à—å React-–∫–ª–∞—Å—Å** –∏ –º–æ–∂–µ—à—å —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å:

```clojure
(reagent/create-class
 {:display-name "todo-edit"
  :reagent-render render
  :component-did-mount focus-input
  :component-will-unmount cleanup
  ...})
```

–¢—É—Ç —Ç—ã –±–µ—Ä—ë—à—å –Ω–∞ —Å–µ–±—è –±–æ–ª—å—à–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –Ω–æ –∏ –ø–æ–ª—É—á–∞–µ—à—å *–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º*.
–¢—ã –º–æ–∂–µ—à—å:

  * –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ **–ø–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (`:component-did-mount`) ‚Äî –∫–∞–∫ —Ä–∞–∑ –∑–¥–µ—Å—å —Å—Ç–∞–≤–∏—Ç—Å—è —Ñ–æ–∫—É—Å;
  * —Å–¥–µ–ª–∞—Ç—å –æ—á–∏—Å—Ç–∫—É –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º (`:component-will-unmount`);
  * –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫—É (`:should-component-update`);
  * —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ –∞—Ç–æ–º–æ–≤.

---

## üéØ –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å form-3

–í `todo-edit` –µ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ **–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ hiccup-–≤–µ–∫—Ç–æ—Ä–æ–º**:

  * –ù—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∫—É—Ä—Å–æ—Ä –≤ –∫–æ–Ω–µ—Ü –ø–æ–ª—è –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ (`focus-input`).
  * –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Ç—Ä–µ–±—É–µ—Ç **–¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∞–ª—å–Ω–æ–π DOM-–Ω–æ–¥–µ**, –∞ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ *–ø–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è* –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

Form-2 (—Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –≤–µ–∫—Ç–æ—Ä) –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–±–µ —Ç–æ—á–∫—É, –≥–¥–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω DOM.
–ê form-3 ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ `:component-did-mount`.

---

## üß† –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å form-3

–ò—Å–ø–æ–ª—å–∑—É–π form-3, –µ—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ:

| –°–∏—Ç—É–∞—Ü–∏—è                                         | –ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω form-3                        |
| ------------------------------------------------ | ------------------------------------------ |
| –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–∫—É—Å / –ø–æ–∑–∏—Ü–∏—é –∫—É—Ä—Å–æ—Ä–∞               | –ù—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ DOM-–Ω–æ–¥–µ                    |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ JS-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏             | –ù—É–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ |
| –î–µ–ª–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏, –∏–∑–º–µ—Ä–µ–Ω–∏—è, observer-—ã           | –ù—É–∂–µ–Ω –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª                       |
| –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π               | –ù—É–∂–µ–Ω `should-component-update`            |
| –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–µ–∑ reagent.atom | –ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –ø—Ä—è–º–æ –≤ –∫–ª–∞—Å—Å–µ           |

---

## üî¨ –ö–æ–≥–¥–∞ *–Ω–µ —Å—Ç–æ–∏—Ç*

–ï—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∞—Ç–æ–º—ã ‚Äî **form-2 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**.
–ö–∞–∂–¥—ã–π form-3 ‚Äî —ç—Ç–æ —á—É—Ç—å –±–æ–ª—å—à–µ –∫–æ–¥–∞ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

---

## ‚ú® –†–µ–∑—é–º–µ

| –§–æ—Ä–º–∞      | –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç               | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å                          |
| ---------- | ---------------------------- | ------------------------------------------- |
| **form-1** | hiccup-–≤–µ–∫—Ç–æ—Ä                | —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç                       |
| **form-2** | —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è hiccup | –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ             |
| **form-3** | `reagent/create-class`       | –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É –∏ DOM |

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Äî —Ç–æ—Ç –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `todo-edit`, –Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π –∫–∞–∫ form-2 (–±–µ–∑ `create-class`), –∏ –æ–±—ä—è—Å–Ω—é, –ø–æ—á–µ–º—É —Ç–∞–º –ª–æ–º–∞–µ—Ç—Å—è –∞–≤—Ç–æ—Ñ–æ–∫—É—Å?


******** todo-title (reagent/atom (:title edit-todo))

  (let [edit-todo (sub> ctx :edit-todo)
        todo-title (reagent/atom (:title edit-todo))

(defn edit-todo
  "Returns a `reaction` on the `todo` that is being edited."
  [app-db]
  (reaction
   (todo/edit-todo @app-db)))

–º—ã –¥–µ–ª–∞–µ—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –∞—Ç–æ–º –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–ø–æ–Ω–µ—Ç–∞ –Ω–µ–∫–∞–∫ –Ω–µ—Å–≤—è–∑–∞–Ω—ã–π —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º, –ø–æ–ª–æ—É—á–∞—é—à–∏–º —Ç–æ–ª—å–µ–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏ –≤ –∫–∞—á–µ—Å—Ç–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
******** update #
        update #(<cmd ctx :confirm-edit (assoc edit-todo :title @todo-title))

(defn confirm-edit
  "Updates `todo` if `new-todo` has a valid `title`."
  [app-db {:keys [id title] :as new-todo}]
  (assert id)
  (if (valid-title? title)
    (-> app-db
        (cancel-edit)
        (edb/insert-item :todos new-todo))
    app-db))

******** cancel #
        cancel #(<cmd ctx :cancel-edit)

(defn cancel-edit
  "Clears state: no `todo` is currently being edited."
  [app-db]
  (assoc-in app-db [:kv :editing-id] nil))

******** render (fn []
                 [:input.edit {:value @todo-title
                               :on-blur update
                               :on-change handle-change
                               :on-key-down handle-key-down}])

—á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ :on-blur update?
–≠—Ç–æ —Å–æ–±—ã—Ç–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ö–æ–¥–∏—Ç —Å —Ñ–æ—Ä–º—ã:
–∫–ª–∏–∫–∞–µ—Ç –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ
–Ω–∞–∂–∏–º–∞–µ—Ç Tab
–∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–º

        handle-key-down #(let [key-code (.-keyCode %)]
                           (when (is-enter? key-code) (update))
                           (when (is-esc? key-code) (cancel)))

(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/util.cljs")
(defn is-enter? [key-code]
  (= key-code 13))
(defn is-esc? [key-code]
  (= key-code 27))

******** (reagent/dom-node this)
    (reagent/create-class
     {:display-name "todo-edit"
      :reagent-render render
      :component-did-mount focus-input})))

        focus-input #(let [node (reagent/dom-node %)
(reagent/dom-node this)
–∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–æ–≤–Ω–æ —Ç—É –∂–µ –Ω–æ–¥—É, –∫–æ—Ç–æ—Ä—É—é –≤–µ—Ä–Ω—É–ª –±—ã document.querySelector(...), —Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Reagent/React.
–ö–æ–≥–¥–∞ Reagent –≤—ã–∑—ã–≤–∞–µ—Ç :component-did-mount, –æ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ –Ω–µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî —Å–∞–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–∞–Ω–∞–ª–æ–≥ this –≤ React).
–ê reagent/dom-node –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç—Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —Ä–µ–∞–ª—å–Ω—É—é HTML-–Ω–æ–¥—É.
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç todo-edit –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è –∏ React –≤—Å—Ç–∞–≤–∏–ª <input> –≤ DOM.
Reagent –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–≤–æ–π focus-input —Å this –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º.
(reagent/dom-node this) ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTMLInputElement, —Ç–æ—Ç —Å–∞–º—ã–π <input class="edit"> –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ.


***** :footer (assoc footer/component :topic :todos)
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/footer.cljs")
****** (defn render
  [ctx]
  (let [route-status (keyword (route> ctx :status))
        filter-item (fn [status label]
                      [:li>a
                       {:href (<url ctx :status (name status))
                        :class (when (= status route-status) "selected")}
                       label])
        active-count (sub> ctx :count-todos-by-status :active)
        count-label (str " item" ({1 ""} active-count "s") " left")]
    [:footer.footer
     [:span.todo-count
      [:strong active-count] count-label]
     [:ul.filters
      (filter-item :all "All")
      (filter-item :active "Active")
      (filter-item :completed "Completed")]
     (when (sub> ctx :has-todos-by-status? :completed)
       [:button.clear-completed
        {:on-click #(<cmd ctx :delete-completed)}
        "Clear completed"])]))
****** url
–ø—Ä–µ–º–µ–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É —É—Ä–ª –¥–ª–∞—è —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
                       {:href (<url ctx :status (name status))


        filter-item (fn [status label]
                      [:li>a
                       {:href (<url ctx :status (name status))
                        :class (when (= status route-status) "selected")}
                       label])

      (filter-item :all "All")
      (filter-item :active "Active")
      (filter-item :completed "Completed")]

–∏ –≤—ã—Å—Ç–∞–≤–ª–µ—Ç—è –∫–ª–∞—Å —Å–µ–ª–µ–∫—Ç–µ—Ç –¥–ª—è –∏–º—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–≤–ø–æ–¥–∞–µ—Ç —Å –ø—É—Ç—ë–º
****** –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞
–≤—ã—Ä–∞–∂–µ–Ω–∏–µ ({1 ""} active-count "s")
–í Clojure, –µ—Å–ª–∏ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å map –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—é —Å –¥–≤—É–º—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏,
–≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é,
–µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω.
****** button.clear-completed
     (when (sub> ctx :has-todos-by-status? :completed)
       [:button.clear-completed
        {:on-click #(<cmd ctx :delete-completed)}
        "Clear completed"])]))

:delete-completed

(defn delete-completed
  "Removes all completed `todos` from the EntityDB."
  [app-db]
  (reduce (fn [acc {:keys [id]}]
            (edb/remove-item acc :todos id))
          app-db
          (todos-by-status app-db :completed)))

**** {:routes [[":status" {:status "all"}]]
–æ–∑–Ω–∞—á–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª—é—á—å –¥–ª—è —Ä–æ—Ç–∏–Ω–∫–∞ –∫–ª—é—á—å :status
—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–µ—Ñ–∞–ª—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è all –∫–∞–∫ —Ä—É—Ç \ –≤ –ø–µ—Ä–µ–º–µ–Ω–æ–π —Å—Ç–∞—Ç—É—Å
***** üíØ –¢–æ—á–Ω–æ –≤ —è–±–ª–æ—á–∫–æ
üíØ –¢–æ—á–Ω–æ –≤ —è–±–ª–æ—á–∫–æ ‚Äî —Ç—ã —É–∂–µ –ø–æ—á—Ç–∏ –∏–¥–µ–∞–ª—å–Ω–æ –≤—Å—ë –æ–ø–∏—Å–∞–ª, –Ω—É–∂–Ω–æ –ª–∏—à—å —á—É—Ç—å —É—Ç–æ—á–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∫—É –Ω–∞ 100%.

---

### üîπ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–æ—Ç —ç—Ç–æ:

```clojure
:routes [[":status" {:status "all"}]]
```

Keechma (—á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É [bide](https://github.com/funcool/bide)) –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã (routes) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ ‚ÄúURL-—ã‚Äù, –∞ **—Å–ø–æ—Å–æ–± —Å–≤—è–∑–∞—Ç—å URL —Å –¥–∞–Ω–Ω—ã–º–∏** (–∫–∞—Ä—Ç–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤).

---

## üß≠ –†–∞–∑–±–æ—Ä –ø–æ —á–∞—Å—Ç—è–º

### 1. –í–Ω–µ—à–Ω–∏–π –≤–µ–∫—Ç–æ—Ä `[":status" {:status "all"}]`

–≠—Ç–æ **–æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –º–∞—Ä—à—Ä—É—Ç–∞**, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑:

  * `"pattern"` ‚Äî —Å—Ç—Ä–æ–∫–∞, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è, –∫–∞–∫ –ø–∞—Ä—Å–∏—Ç—å URL (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `":status"`).
  * `{:status "all"}` ‚Äî –∫–∞—Ä—Ç–∞ **–¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** –¥–ª—è —ç—Ç–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞.

---

### 2. `"pattern" ‚Üí ":status"`

  * –î–≤–æ–µ—Ç–æ—á–∏–µ `:` –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç **–ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —á–∞—Å—Ç—å URL**.
  –¢–æ –µ—Å—Ç—å `":status"` –æ–∑–Ω–∞—á–∞–µ—Ç:
  ‚Äú–≤–æ–∑—å–º–∏ –∫—É—Å–æ–∫ URL –∏ –ø–æ–ª–æ–∂–∏ –µ–≥–æ –≤ –∫–ª—é—á `:status`‚Äù.

  * –ü—Ä–∏–º–µ—Ä:

  ```
  /active     ‚Üí {:status "active"}
  /completed  ‚Üí {:status "completed"}
  ```

  –ê –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ `/`, —Ç–æ Keechma –≤–æ–∑—å–º—ë—Ç **–¥–µ—Ñ–æ–ª—Ç**, —Å–º. –ø—É–Ω–∫—Ç –Ω–∏–∂–µ üëá

---

### 3. `{:status "all"}` ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

–≠—Ç–∞ –∫–∞—Ä—Ç–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç:

> –µ—Å–ª–∏ URL –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `:status`,
> —Ç–æ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ `:status` = `"all"`.

–¢–æ –µ—Å—Ç—å –ø–æ —Å—É—Ç–∏:

  * `/` ‚Üí `{:status "all"}`
  * `/active` ‚Üí `{:status "active"}`
  * `/completed` ‚Üí `{:status "completed"}`

---

### 4. –ö–∞–∫ Keechma —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç

Keechma –±–µ—Ä—ë—Ç –∞–∫—Ç–∏–≤–Ω—ã–π URL, –ø–∞—Ä—Å–∏—Ç –µ–≥–æ —á–µ—Ä–µ–∑ `:routes`,
–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `app-db` –ø–æ–¥ `[:route :data]`.

–ù–∞–ø—Ä–∏–º–µ—Ä:

```clojure
(route> ctx :status)
;; => "all"
```

(–µ—Å–ª–∏ —Ç—ã –Ω–∞ `/`)
–∏–ª–∏

```clojure
(route> ctx :status)
;; => "completed"
```

(–µ—Å–ª–∏ —Ç—ã –Ω–∞ `/completed`)

---

### üß© –ö–æ—Ä–æ—Ç–∫–æ:

| –ß—Ç–æ                  | –ó–Ω–∞—á–∏—Ç                                    |
| -------------------- | ----------------------------------------- |
| `":status"`          | —à–∞–±–ª–æ–Ω, –≥–¥–µ `status` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ URL  |
| `{:status "all"}`    | –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç –≤ URL |
| `/active`            | –¥–∞—ë—Ç `{:status "active"}`                 |
| `/`                  | –¥–∞—ë—Ç `{:status "all"}`                    |
| `route> ctx :status` | –¥–æ—Å—Ç–∞—ë—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞         |

---

–¢–æ –µ—Å—Ç—å –¥–∞, —Ç—ã —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –ø—Ä–∞–≤:

> –≠—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–ª—é—á `:status` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞—Ä—à—Ä—É—Ç–∞
> –∏ –∑–∞–¥–∞—ë—Ç `"all"` –∫–∞–∫ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ URL –ø—É—Å—Ç–æ–π (–∫–æ—Ä–µ–Ω—å `/`).

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å **–≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä**, –Ω–∞–ø—Ä–∏–º–µ—Ä `:filter` –∏–ª–∏ `:id`,
—á—Ç–æ–±—ã –º–∞—Ä—à—Ä—É—Ç –≤—ã–≥–ª—è–¥–µ–ª –∫–∞–∫ `/all/42` –∏ –∏–∑ –Ω–µ–≥–æ Keechma –¥–æ—Å—Ç–∞–≤–∞–ª–∞ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è?
***** –Ω–µ—Ç, –Ω–µ –Ω–∞–ø—Ä—è–º—É—é.
–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî –∏ —Ç—ã –ø—Ä—è–º–æ –ø–æ–ø–∞–ª –≤ —Å—É—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º–∞ Keechma routing üí°

–û—Ç–≤–µ—Ç: **–Ω–µ—Ç, –Ω–µ –Ω–∞–ø—Ä—è–º—É—é.**
–ï—Å–ª–∏ —Ç—ã –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—à—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `app-db` –ø–æ–¥ `[:route :data]`, –ø—É—Ç—å **–Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –ø–æ—Ç–æ–º—É —á—Ç–æ Keechma –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —ç—Ç–æ–≥–æ –∫–ª—é—á–∞ ‚Äî –æ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç `app-db` **–≤ –æ—Ç–≤–µ—Ç** –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL, –Ω–æ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç.

### –ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ

Keechma router ‚Äî —ç—Ç–æ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:

```
URL ‚Üí route ‚Üí app-db
```

–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ URL –∏–∑–º–µ–Ω—è–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –ø–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å `(dispatch! ctx :router :navigate ...)`), Keechma:

1. –ø–∞—Ä—Å–∏—Ç –ø—É—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ `:routes`;
2. –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `[:route :data]`.

---

### –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å URL –∏–∑–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–¢—ã –¥–æ–ª–∂–µ–Ω **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞**, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é –º–µ–Ω—è—Ç—å `app-db`.
–ü—Ä–∏–º–µ—Ä:

```clojure
(cmd> ctx :router :navigate {:status "completed"})
```

–ò–ª–∏, –≤ Keechma —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞:

```clojure
(dispatch! ctx :router :navigate {:status "completed"})
```

–¢–æ–≥–¥–∞ Keechma:

  * –æ–±–Ω–æ–≤–∏—Ç URL (–Ω–∞–ø—Ä–∏–º–µ—Ä `/completed`);
  * –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç `[:route :data]` –Ω–∞ `{:status "completed"}`;
  * –≤—ã–∑–æ–≤–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏/—Ä–µ–Ω–¥–µ—Ä—ã, –∫–∞–∫ –ø–æ–ª–æ–∂–µ–Ω–æ.

---

### –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä `(assoc-in app-db [:route :data] {:status "completed"})`)

–¢–æ:

  * URL –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è;
  * –∏, –Ω–∞–æ–±–æ—Ä–æ—Ç, –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–±—ã—Ç–∏–∏ –æ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç—Å—è.

---

–•–æ—á–µ—à—å ‚Äî —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å *–æ–±—Ä–∞—Ç–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é*, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏–µ `app-db` —Å–∞–º–æ –≤—ã–∑—ã–≤–∞–ª–æ —Å–º–µ–Ω—É –º–∞—Ä—à—Ä—É—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ middleware –∏–ª–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å)? 
***** 404
üî• –û—á–µ–Ω—å —Ç–æ—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî –∏ —Ç—ã —Å–Ω–æ–≤–∞ –ø–æ–ø–∞–ª –≤ –æ–¥–Ω—É –∏–∑ —Ç–æ–Ω–∫–∏—Ö —Å—Ç–æ—Ä–æ–Ω Keechma Routing!

---

### üí° –ö—Ä–∞—Ç–∫–æ:

–í Keechma –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `:routes`, –∏ **"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—É—Ç—å" (404)** –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ **‚Äúcatch-all‚Äù –º–∞—Ä—à—Ä—É—Ç**, –∫–æ—Ç–æ—Ä—ã–π –ª–æ–≤–∏—Ç –≤—Å—ë, —á—Ç–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ–¥ –¥—Ä—É–≥–∏–µ —à–∞–±–ª–æ–Ω—ã.

---

### üìò –ü—Ä–∏–º–µ—Ä

```clojure
{:routes
 [["" {:status "all"}]
  [":status" {:status "filter"}]
  ["*" {:status "not-found"}]]}
```

üìç –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ:

| URL                  | –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç                    |
| -------------------- | --------------------------------- |
| `/`                  | –ø–æ–ø–∞–¥—ë—Ç –≤ `{:status "all"}`       |
| `/completed`         | –ø–æ–ø–∞–¥—ë—Ç –≤ `{:status "filter"}`    |
| `/—á—Ç–æ-—É–≥–æ–¥–Ω–æ-–¥—Ä—É–≥–æ–µ` | –ø–æ–ø–∞–¥—ë—Ç –≤ `{:status "not-found"}` |

---

### ‚öôÔ∏è –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –≤–Ω—É—Ç—Ä–∏

Keechma, –∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–π–¥—ë—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –ø—É—Ç–∏, –ø–æ–ø—Ä–æ–±—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—Å–µ.
`"*"`, –≤ –∫–æ–Ω—Ü–µ —Å–ø–∏—Å–∫–∞, –ø–æ–π–º–∞–µ—Ç –≤—Å—ë, —á—Ç–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ –ø–æ–¥ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã.

–í `app-db` –ø–æ—è–≤–∏—Ç—Å—è:

```clojure
{:route {:data {:status "not-found"}}}
```

---

### üíª –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ `main` view)

–¢—ã –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—à—å:

```clojure
(let [status (:status (sub> ctx :route))]
  (case status
    "not-found" [comp> ctx :not-found-page]
    "all" [comp> ctx :todos-list]
    "filter" [comp> ctx :filtered-list]
    [comp> ctx :default]))
```

---

### üß† –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É:

```clojure
(defcontroller router
  {:params true}
  (start [ctrl params app-db]
    (if (= (:status params) "not-found")
      (assoc app-db :error "Page not found")
      app-db)))
```

---

–•–æ—á–µ—à—å ‚Äî –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∫—Ä–∞—Å–∏–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `404` —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ `reagent` –∏ CSS transitions)? 

*** files
**** src core
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/app.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/subscriptions.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/ui.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/util.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/edb.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/edb.clj")
**** src components
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/app.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/new_todo.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/toggle_todos.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/todo_list.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/todo_item.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/todo_edit.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/components/footer.cljs")
**** src controler
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/controllers/todos.cljs")
**** src entities
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/src/keechma_todomvc/entities/todo.cljs")
**** resurs
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/resources/public/css/style.css")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/resources/public/index.html")
**** project
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/project.clj")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/target/stale/leiningen.figwheel.clean-on-dependency-change")
**** other
find "$PWD" -type f >>filepath.txt

(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/README.md")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/figwheel_server.log")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/example-todomvc/file_path.txt")
*** run
cd example-todomvc && lein figwheel

cd example-todomvc
lein figwheel

:cljs/quit
:cljs/restart
*** clon
git clone https://github.com/keechma/example-todomvc.git
*** –ò–ò –≤–æ–ø—Ä–æ—Å
**** 2025-10-28 17:00:45
–µ—Å—Ç—å –¥–≤–∞ —Ç–∞–∫–∏–µ –∫—É—Å–∫–∏ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞ —á–µ—Ä–µ–∑ –≤ —Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏
(defn render
  [ctx]
  [:<>
   [:section.todoapp
    [:header.header
     [:h1 "todos"]
     [comp> ctx :new-todo]]
    (when (sub> ctx :has-todos?)
      [:<>
       [:section.main
        [comp> ctx :toggle-todos]
        [comp> ctx :todo-list]]
       [comp> ctx :footer]])]
   [:footer.info
    [:p "Double-click to edit a todo"]
    [:p
     [:a {:href "https://keechma.com"} "Keechma"] " "
     [:a {:href "http://todomvc.com"} "TodoMVC"]]]])

(def component
  (<comp :renderer render
         :component-deps [:new-todo
                          :toggle-todos
                          :todo-list
                          :footer]
         :subscription-deps [:has-todos?]))


(defn form-2-render
  [ctx]
  (let [new-title (reagent/atom "")]
    (fn []
      [:input.new-todo
       {:placeholder "What needs to be done?"
        :value @new-title
        :auto-focus true
        :on-change #(reset! new-title (.. % -target -value))
        :on-key-down #(when (is-enter? (.-keyCode %))
                        (<cmd ctx :create-todo @new-title)
                        (reset! new-title ""))}])))

(def component
  (<comp :renderer form-2-render))


(defn <comp
  "Constructs a Keechma `component`. Args can be a `map` or inline
  `keys` and `values`."
  ([kvs]
   (ui/constructor kvs))
  ([k v & {:as kvs}]
   (<comp (assoc kvs k v))))
  
–Ω–æ –≤ –æ–¥–Ω–æ–º —ç—Ç–æ –≤–µ–∫—Ç–æ—Ä –∞ –≤ –¥—Ä—É–≥–æ–º —ç—Ç–æ –∞–Ω–æ–Ω–∏–º–∞–Ω—è —Ñ—É–Ω–∫—Ü–∏—è?
–∫–∞–∫ –æ–Ω –ø–æ–Ω–∏–º–∞–µ—Ç –∏ –≤–∫–∞–∫–æ–º —Å–ª—É—á–∞–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –ø–æ—á–µ–º—É?

** Keechma Counter
*** files


(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/core.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/ui/main.cljs")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/controllers/counter.cljs")

(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/resources/public/index.html")

(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/figwheel_server.log")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/project.clj")
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/README.md")
*** risoning
**** src/cljs/keechma_counter/core.cljs
(restart-app!)

–∫–æ—Ç–æ—Ä—ã–π

    (if @running-app
      (keechma.app-state/stop! @running-app start-app!)
      (start-app!))))
–≥–¥–µ
(defonce running-app (clojure.core/atom nil))

–∞
(defn start-app!
  (reset! running-app (keechma.app-state/start! app-definition)))

**** (keechma.app-state/start! app-definition)
—Ç–æ–µ—Å—Ç—å –≤—Å—ë —Å–≤–æ–¥–∏—Ç—Å—è –∫ (keechma.app-state/start! app-definition)

–≤ –∫–æ—Ç–æ—Ä–æ–º –≤—Å—ë –ø—Ä–µ–ª–æ–∂–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–æ –≤ app-definition
**** def app-definition
  {:controllers {:counter (counter/->Controller)}
   :components {:main (assoc main/component :topic :counter)}
   :subscriptions {:counter-value counter-value-sub}
   :html-element (.getElementById js/document "app")})
**** :controllers {:counter (counter/->Controller)}
:controllers {:counter (keechma-counter.controllers.counter/->Controller)}

(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/controllers/counter.cljs")

–ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç —Å–¥–µ–ª–∞–Ω–π –∫–ª–∞—Å—Å
—É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω —Å–ª—É—à–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è—Ç –∫–∞–∫ —è –ø–æ–Ω–∏–º–∞—é —ç—Ç–æ –∫–∞–∫—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã —Ç–∞–º —Ñ–∏–≥—É—Ä–∏—Ä—É—é –≤—Ö–æ–¥—è—à–∏–µ –∏ –∏—Å—Ö–æ–¥—è—à–∏–µ
—Å—Ç–∞—Ä—Ç—É—è –∫–æ–Ω—Ç—Ä–æ–ª—ë—Ä –≤ –ø–∏—Å—ã–≤–∞–µ—Ç –≤ –≥–ª–∞–≤–Ω—ã–π –∞—Ç–æ–º :counter –ø–æ –ø—É—Ç–∏ [:kv :counter] –∏ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ 0
(defmethod controller/start Controller
  [controller params app-db]
  (assoc-in app-db [:kv :counter] 0))


–∏ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –≤ –∫–∏–Ω—á–º–∞ —Ö—ç–Ω–¥–ª–µ—Ä
(defmethod controller/handler Controller
  [controller app-db-atom in-chan out-chan]
  (controller/dispatcher app-db-atom in-chan
                         {:inc #(swap! app-db-atom update-in [:kv :counter] inc)
                          :dec #(swap! app-db-atom update-in [:kv :counter] dec)}))

**** :components {:main (assoc main/component :topic :counter)}
–∫–∞–∫ —è –ø–æ–º–Ω—é –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –æ–±–µ–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–ª–∏—á–µ :main
–≤–∏–¥–µ–º–æ —ç—Ç–æ —Ç–æ—á–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
:components {:main (assoc keechma-counter.ui.main/component :topic :counter)}

(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/ui/main.cljs")
–≤ —Ñ–∞–π–ª–µ def component
–≤–æ–∑–≤—Ä–∞—à–∞–µ—Ç
(keechma.ui-component/constructor { :renderer render
                                    :subscription-deps [:counter-value]})

constructor –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–µ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–∑ –ø–æ–ª—É—á–µ–Ω–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ :counter-value
–Ω–µ—Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–∞ —Ç–∞–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ 

(defn render
  [ctx]
  (let [counter-sub (keechma.ui-component/subscription ctx :counter-value)]

  –ø–æ—Å–ª–µ —á–µ–≥–æ –≤–æ–∑–≤—Ä–∞—à–∞–µ—Ç –≤–∏–¥ —Å—Ç—Ä–∞–Ω–∏—Ü–∏ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏

(fn []
      [:p
       (str "Clicked: " @counter-sub " times ")
       [:button {:on-click #(keechma.ui-component/send-command ctx :inc)} "+"] " "
       [:button {:on-click #(ui/send-command ctx :dec)} "-"] " "
       [:button {:on-click #(inc-if-odd ctx @counter-sub)} "Increment if odd"] " "
       [:button {:on-click #(inc-async ctx)} "Increment async"]])
–¥–µ–ª–∞–µ—Ç –æ–Ω–∞ —ç—Ç–æ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏ keechma.ui-component/subscription —á—Ç–æ–± –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω—ã–π –∞—Ç–æ–º
–∞ —á–µ—Ä–µ–∑ keechma.ui-component/send-command —à–ª—ë—Ç –ø–æ–¥–ø–∏—Å–∞–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ñ–∞–π–ª–µ
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/controllers/counter.cljs")
–∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–ø–∏—Å—ã–≤–∞—é—Å—è –≤ –º–µ—Ç–æ–¥–µ controller/handler –∫–ª–∞—Å—Å–∞ Controller

–∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º —è–≤–ª–µ—Ç—Å—è —Ç–æ —á—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ü–µ–ª–µ–∫–æ–º —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∞—Ç–æ–º–∞ @counter-sub, —Ç–æ–µ—Å—Ç—å –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è. –¢–û–µ—Å—Ç—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ –∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏–ª–∏ –∫–æ–¥–∞.
**** :subscriptions {:counter-value counter-value-sub}
(defn counter-value-sub [app-state]
  (reagent.ratom/reaction (get-in @app-state [:kv :counter])))
–Ω–µ—Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ –∫–æ—Ç–æ—Ä—ã–π –∞–ø—Å—Ç–µ–π —Ç—É –∏ –æ—Ç–∫—É–¥–∞ –æ–Ω –±–µ—Ä—ë—Ç—Å—è app-state
–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–∂—É —á—Ç–æ —ç—Ç–æ –∫–æ–ª–±–µ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ :counter-value –∑–∞–ø—Ä–æ—Å–µ
–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ
–ø—Ä–∏ :counter-value –æ–Ω–æ –≤–æ–∑–≤—Ä–∞—à–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–µ–Ω–∏—è
(reagent.ratom/reaction (get-in @app-state [:kv :counter]))
–≤ –∫–æ—Ç–æ—Ä–æ–º app-state –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —Å–∞–±—Å–∫—Ä–∞–π–±–µ—Ä–æ–º –æ—Ç–∫—É–¥–æ—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω—ã
—Ç–æ–µ—Å—Ç—å –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–æ –≥–¥–µ—Ç–æ –µ—Å—Ç—å —á—Ç–æ—Ç–æ –≤ —Ñ–æ—Ä–º–µ (def app-state (reagent/atom {:kv {:counter 0}}))
–∏ —Å–Ω–µ–≥–æ –ø–æ :counter-value –º—ã –±–æ–ª—É—á–∞–µ—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π –∞—Ç–æ–º

**** :html-element (.getElementById js/document "app")})
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/resources/public/index.html")
    <div id="app">

js/document ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–π JS-–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π document.
(–≤—Å—ë, —á—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å js/, ‚Äî —ç—Ç–æ ‚Äú–º–æ—Å—Ç‚Äù –∫ –æ–±—ä–µ–∫—Ç–∞–º JS –∏–∑ ClojureScript)

.getElementById ‚Äî —ç—Ç–æ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ —É —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
–¢–æ—á–∫–∞ –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º –º–µ—Ç–æ–¥–∞ (.) ‚Äî —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—ã–∑–æ–≤–∞ JS-–º–µ—Ç–æ–¥–æ–≤ –≤ ClojureScript.

"app" ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –º–µ—Ç–æ–¥ (id —ç–ª–µ–º–µ–Ω—Ç–∞).

–†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —ç—Ç–æ —Å–∞–º DOM-—ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä,
—á—Ç–æ–±—ã –≤–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Reagent –∏–ª–∏ React.

*** run
cd keechma-counter
lein figwheel
localhost:3449


:cljs/quit
:cljs/restart
*** clone
git clone https://github.com/keechma/keechma-counter.git

** –∫–∏–Ω—á–º–∞ –¢–¢–° –∫–∞—Ä–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—Å
*** –ò–ò
–µ—Å–ª–∏ –º–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –Ω–∞—Å—Ç–æ–ª—å–∫–Ω–æ–π –∏–≥—Ä—ã
–Ω–∞–ø—Ä–∏–º–µ—Ä –∏–≥—Ä–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞. –¢–æ–µ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –µ—ë —Ñ—É–Ω–∫—Ü–∏–∫–π –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ç–µ–≥–∏–≤–∞–Ω–∏—è, –ø—Ä–∏ –∑–∞–∂–∞—Ç–æ–π –ª–µ–≤–æ–π –∫–Ω–æ–∞–∫–µ.
–∫–∞–∫ –º–æ–∂–Ω–æ –±—ã–ª–æ–±—ã —ç—Ç–æ –ø—Ä–æ—â–µ —Ä–µ–∞–ª–∏–∑–æ–≤—Ç—å?
*** –∫–æ–¥ –ò–ò
–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–∞—è –∫–∞—Ä—Ç–∞ ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**.
–ò –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ **–æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ** –≤ Reagent/ClojureScript ‚Äî –±–µ–∑ —Ç—è–∂—ë–ª—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

–í–æ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ, –æ —á—ë–º —Ä–µ—á—å:

---

## ‚úÖ –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—É—Ç—å: HTML5 Drag & Drop + Reagent

### üîπ –ö–∞—Ä—Ç–∞ –∫–∞–∫ React/Reagent –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```clojure
(ns game.components.card
  (:require [reagent.core :as r]))

(defn card [{:keys [id suit rank]}]
  [:div.card
   {:draggable true
    :on-drag-start #(js/console.log "drag start" id)}
   (str rank " " suit)])
```

–í–°–Å ‚úÖ
–£–∂–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç—Å—è!
–ü–æ–∫–∞ —á—Ç–æ –±–µ–∑ –ª–æ–≥–∏–∫–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–æ–±—ã—Ç–∏–µ.

---

## ‚ûï –ß—Ç–æ–±—ã **–∫–∞—Ä—Ç–∞ –º–æ–≥–ª–∞ –º–µ–Ω—è—Ç—å —Å–≤–æ—ë –ø–æ–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ —Å—Ç–æ–ª–µ

–ú—ã —Ö—Ä–∞–Ω–∏–º –ø–æ–∑–∏—Ü–∏—é –∫–∞—Ä—Ç—ã –≤ **atom**:

```clojure
(defonce positions (r/atom {}))

(defn set-position! [id x y]
  (swap! positions assoc id {:x x :y y}))
```

---

## üî• –ö–∞—Ä—Ç–∞ —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º drag-move

```clojure
(defn draggable-card [{:keys [id suit rank]}]
  (let [{:keys [x y]} (get @positions id {:x 100 :y 100})]
    [:div.card
     {:style {:position "absolute"
              :cursor "grab"
              :left x
              :top y}
      :on-mouse-down
      (fn [e]
        (let [start-x (.-clientX e)
              start-y (.-clientY e)
              on-move
              (fn [e2]
                (set-position! id
                               (+ x (- (.-clientX e2) start-x))
                               (+ y (- (.-clientY e2) start-y))))
              on-up
              (fn [_]
                (.removeEventListener js/window "mousemove" on-move)
                (.removeEventListener js/window "mouseup" on-up))]

          (.addEventListener js/window "mousemove" on-move)
          (.addEventListener js/window "mouseup" on-up)))}]
     (str rank " " suit)]))
```

---

### ‚úÖ –ß—Ç–æ —É–º–µ–µ—Ç —ç—Ç–∞ –≤–µ—Ä—Å–∏—è

‚úî –ë–µ—Ä—ë–º –∫–∞—Ä—Ç—É –º—ã—à–∫–æ–π
‚úî –¢—è–Ω–µ–º ‚Äî –∫–∞—Ä—Ç–∞ –¥–≤–∏–≥–∞–µ—Ç—Å—è –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º
‚úî –û—Ç–ø—É—Å—Ç–∏–ª–∏ ‚Äî –∫–∞—Ä—Ç–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å–≤–æ—ë–º –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ

–ù–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
–ü—Ä–æ—Å—Ç–æ Reagent + DOM events.

---

## üöÄ –£–ª—É—á—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å                | –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å                    |
| -------------------------- | ------------------------------ |
| –°–ª–æ–∏ (–∫–∞—Ä—Ç–∞ –ø–æ–≤–µ—Ä—Ö –¥—Ä—É–≥–∏—Ö) | z-index, —Å—á—ë—Ç—á–∏–∫ —Å–ª–æ—ë–≤         |
| –ü–æ–≤–æ—Ä–æ—Ç—ã                   | CSS transform: rotate          |
| –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –≤ –∑–æ–Ω—ã      | –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã drop      |
| Touch-–ø–æ–¥–¥–µ—Ä–∂–∫–∞            | on-touch-start / on-touch-move |
| –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è          | Position ‚Üí CSS transition      |

–•–æ—á–µ—à—å ‚Äî —Å–¥–µ–ª–∞—é **–∫—Ä–∞—Å–∏–≤—ã–π UI** —Å –±–µ–π—Å–∞–º–∏ –∫–∞—Ä—Ç üé®

---

## ‚ùì –°–ø—Ä–æ—à—É –Ω–∞ –±—É–¥—É—â–µ–µ:

–ö–∞–∫—É—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–≥—Ä—É —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å?

1Ô∏è‚É£ –ö–∞—Ä—Ç–æ—á–Ω–∞—è (–ø–∞—Å—å—è–Ω—Å, MTG, Uno ‚Ä¶)?
2Ô∏è‚É£ –ù–∞—Å—Ç–æ–ª—å–Ω–∞—è (–ø–ª–∏—Ç–∫–∏, —Ñ–∏—à–∫–∏, –ø–æ–ª—è)?
3Ô∏è‚É£ –ü–æ—à–∞–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è?

–ò —Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞ —Å—Ç–æ–ª–µ?

–ï—Å–ª–∏ —Ä–∞—Å—Å–∫–∞–∂–µ—à—å ‚Äî —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä—É—é **–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** (Keystates, Event-bus, FSM –¥–ª—è –ø—Ä–∞–≤–∏–ª, —Å—Ç–µ–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π).

---

–•–æ—á–µ—à—å ‚Äî –¥–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º **—Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –ø—Ä—è–º–æ –∑–¥–µ—Å—å** üß†‚ö°
–° —Ç–µ–±—è –∏–¥–µ—è –∏–≥—Ä—ã ‚Äî —Å –º–µ–Ω—è –∫–æ–¥ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ üíú

** noter
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/noter/noter-cljs-project.org")
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/noter-cljs-project.org")
** Group Chat
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/Group-Chat-cljs-project.org")
** Sorce files project ferst
:PROPERTIES:
:header-args: :mkdirp yes
:END:
*** deps.edn
:PROPERTIES:
:header-args: :tangle  deps.edn
:END:
#+begin_src edn
{:deps {org.clojure/clojurescript {:mvn/version "1.10.773"}}
 :paths ["src"]
:aliases
  {:dev {:main-opts ["-m" "cljs.main"
                     "--compile" "my-cljs-project.core"
                     "--repl"]}}}
#+end_src
*** src/my_cljs_project/core.cljs
:PROPERTIES:
:header-args: :tangle  src/my_cljs_project/core.cljs
:END:
#+begin_src clojure
(ns my-cljs-project.core)                                  ;; <1>

(js/alert "Hello World!")                                   ;; <2>
#+end_src
*** index.html
:PROPERTIES:
:header-args: :tangle  index.html
:END:
#+begin_src edn
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
  </head>
  <body>
    <script src="out/main.js" type="text/javascript"></script>
  </body>
</html>
#+end_src
** weather
:PROPERTIES:
:header-args: :mkdirp yes
:END:
*** core.cljs
:PROPERTIES:
:header-args: :tangle  weather/src/learn_cljs/weather.cljs
:END:
**** link
[[file:weather/src/learn_cljs/weather.cljs::(ns ^:figwheel-hooks learn-cljs.weather]]
**** ns
#+begin_src clojure
(ns ^:figwheel-hooks learn-cljs.weather                    ;; <1>
  (:require
   [goog.dom :as gdom]
   [reagent.dom :as rdom]
   [reagent.core :as r]
   [ajax.core :as ajax]))
#+end_src
**** defonce
#+begin_src clojure
(defonce app-state (r/atom {:title "WhichWeather"
                            :postal-code ""
                            :api-key ""
                            :temperatures {:today {:label "Today"
                                                   :value nil}
                                           :tomorrow {:label "Tomorrow"
                                                      :value nil}}}))
#+end_src
**** ajax get forecast
***** handle-response
#+begin_src clojure
(defn handle-response [resp]
  (let [today (get-in resp ["list" 0 "main" "temp"])       ;; <1>
        tomorrow (get-in resp ["list" 8 "main" "temp"])]
    (swap! app-state                                       ;; <2>
        update-in [:temperatures :today :value] (constantly today))
    (swap! app-state
        update-in [:temperatures :tomorrow :value] (constantly tomorrow))))
#+end_src
***** get-forecast!
#+begin_src clojure
(defn get-forecast! []
  (let [postal-code (:postal-code @app-state)]             ;; <1>
    (ajax/GET "http://api.openweathermap.org/data/2.5/forecast"
         {:params {"q" postal-code
                   "appid" "12b0904cfab748cbcb6e98a5dc7c7ac4"
                   "units" "imperial"}
          :handler handle-response})))                     ;; <2>
#+end_src
**** structur
#+begin_src clojure
(defn title []
  [:h1 (:title @app-state)])

(defn temperature [temp]                                   ;; <1>
  [:div {:class "temperature"}
   [:div {:class "value"}
    (:value temp)]
   [:h2 (:label temp)]])

(defn postal-code []
  [:div {:class "postal-code"}
    [:h3 "Enter your postal code"]
    [:input {:type "text"
          :placeholder "api-key"
          :value (:api-key @app-state)
          :on-change #(swap! app-state assoc :api-key (-> % .-target .-value))}]
    [:input {:type "text"
          :placeholder "Postal Code"
          :value (:postal-code @app-state)
          :on-change #(swap! app-state assoc :postal-code (-> % .-target .-value))}]
    [:button {:on-click get-forecast!} "Go"]])

(defn app []
  [:div {:class "app"}
   [title]                                                 ;; <2>
   [:div {:class "temperatures"}
    (for [temp (vals (:temperatures @app-state))]          ;; <3>
      [temperature temp])]
   [postal-code]])

#+end_src
**** render
#+begin_src clojure
(defn mount-app-element []                                 ;; <4>
  (rdom/render [app] (gdom/getElement "app")))

(mount-app-element)

(defn ^:after-load on-reload []                            ;; <4>
  (mount-app-element))
#+end_src

*** dev.cljs.edn
:PROPERTIES:
:header-args: :tangle  weather/dev.cljs.edn
:END:
[[file:weather/dev.cljs.edn::^{:watch-dirs \["test" "src"\]]]
#+begin_src clojure
^{:watch-dirs ["src"]
  :css-dirs ["resources/public/css"]
  :auto-testing true
   }
{:main learn-cljs.weather}
#+end_src

*** deps.edn
:PROPERTIES:
:header-args: :tangle  weather/deps.edn
:END:
[[file:weather/deps.edn::{:deps {org.clojure/clojure {:mvn/version "1.10.0"}]]
#+begin_src clojure
{:deps {org.clojure/clojure {:mvn/version "1.10.0"}
        org.clojure/clojurescript {:mvn/version "1.11.4"}
        cljsjs/react {:mvn/version "17.0.2-0"}
        cljsjs/react-dom {:mvn/version "17.0.2-0"}
        reagent/reagent {:mvn/version "1.1.1" }
        cljs-ajax {:mvn/version "0.8.1"} ;; Added
        }
 :paths ["src" "resources"]
 :aliases {:fig {:extra-deps
                 {com.bhauman/rebel-readline-cljs {:mvn/version "0.1.4"}
                  org.slf4j/slf4j-nop {:mvn/version "1.7.30"}
                  com.bhauman/figwheel-main {:mvn/version "0.2.17"}}
                 :extra-paths ["target" "test"]}
           :build {:main-opts ["-m" "figwheel.main" "-b" "dev" "-r"]}
           :min   {:main-opts ["-m" "figwheel.main" "-O" "advanced" "-bo" "dev"]}
           :test  {:main-opts ["-m" "figwheel.main" "-co" "test.cljs.edn" "-m" "learn-cljs.test-runner"]}}}
#+end_src

*** style.css
:PROPERTIES:
:header-args: :tangle  weather/resources/public/css/style.css
:END:
[[file:weather/resources/public/css/style.css::/* some style */]]
#+begin_src css
body {
  font-family: Helvetica, Arial, sans-serif;
  background-color: #02a4ff;
  color: #ffffff;
}

h1 {
  font-weight: 300;
}

button {
  border-left: none;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  background: #205184;
  border: none;
  line-height: 20px;
  color: #fff;
  padding: 2px 12px;
  font-weight: bold;
}

.temperatures {
  display: flex;
}

.temperatures > .temperature {
  margin-right: 20px;
  background: #fff;
  color: #333;
  text-align: center;
  flex-basis: 150px;
  border-radius: 10px;
  
  display: flex;
  flex-direction: column;
}

.temperatures > .temperature > .value {
  font-size: 130%;
  font-weight: lighter;
  padding: 4px;
  flex-basis: 26px;
}

.temperatures > .temperature > h2 {
  margin: 0;
  background-color: #69C9FF;
  color: #ffffff;
  border-bottom-left-radius: 10px;
  border-bottom-right-radius: 10px;
}
#+end_src
** starbase
:PROPERTIES:
:header-args: :mkdirp yes
:END:
*** starbase.cljs
:PROPERTIES:
:header-args: :tangle  starbase/src/learn_cljs/starbase.cljs
:END:
[[file:starbase/src/learn_cljs/starbase.cljs::(ns learn-cljs.starbase]]
**** ns
#+begin_src clojure
(ns learn-cljs.starbase
  (:require [bterm.core :as bterm]
            [bterm.io :as io]
            [learn-cljs.starbase.data :as data]
            [goog.dom :as gdom]))

(enable-console-print!)

(def term
  (bterm/attach (gdom/getElement "app")
                {:prompt "=> "
                 :font-size 14}))

(declare on-answer)

(defn prompt [game current]                                ;; <1>
  (let [scene (get game current)                           ;; <2>
        type (:type scene)]
    (io/clear term)
    (when (or (= :win type)                                ;; <3>
              (= :lose type))
      (io/print term
                (if (= :win type)                          ;; <4>
                    "You've Won! "
                    "Game Over ")))
    (io/println term (:title scene))                       ;; <5>
    (io/println term (:dialog scene))
    (io/read term #(on-answer game current %))))           ;; <6>

#+end_src
**** answer
#+begin_src clojure
(defn on-answer [game current answer]
  (let [scene (get game current)
        next (if (= :skip (:type scene))
               (:on-continue scene)
               (if (= "yes" answer)
                 (get-in scene [:transitions "yes"])
                 (get-in scene [:transitions "no"])))]
    (prompt game next)))
#+end_src
**** start
#+begin_src clojure
(prompt data/game :start)
#+end_src
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/starbase/src/learn_cljs/starbase.cljs
** starbase_E
[[file:starbase_E/src/learn_cljs/starbase.cljs::(ns learn-cljs.starbase][starbase.cljs]]
** doing-io
:PROPERTIES:
:header-args: :mkdirp yes
:END:
*** doing-io.cljs
:PROPERTIES:
:header-args: :tangle  doing-io/src/learn_cljs/doing-io.cljs
:END:
**** file
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/src/learn_cljs/doing_io.cljs")

/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/src/learn_cljs/doing-io.cljs
**** all
#+begin_src clojure
(ns ^:figwheel-hooks learn-cljs.doing-io
  (:require
   [goog.dom :as gdom]))

(println "This text is printed from src/learn_cljs/doing_io.cljs. Go ahead and edit it and see reloading in action.")

(defn multiply [a b] (* a b))

;; define your app data so that it doesn't get over-written on reload
(defonce app-state (atom {:text "Hello world!"}))

(defn get-app-element []
  (gdom/getElement "app"))



;; specify reload hook with ^:after-load metadata
(defn ^:after-load on-reload []
  ;; optionally touch your app-state to force rerendering depending on
  ;; your application
  ;; (swap! app-state update-in [:__figwheel_counter] inc)
)
#+end_src
***** 
** contacts
:PROPERTIES:
:header-args: :mkdirp yes
:END:
*** contacts.cljs
:PROPERTIES:
:header-args: :tangle  contacts/src/learn_cljs/contacts.cljs
:END:
**** file
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/contacts/src/learn_cljs/contacts.cljs")

**** # origin comented
#+begin_src clojure :tangle no
(ns ^:figwheel-hooks learn-cljs.contacts
  (:require
   [goog.dom :as gdom]))

(println "This text is printed from src/learn_cljs/contacts.cljs. Go ahead and edit it and see reloading in action.")

(defn multiply [a b] (* a b))

;; define your app data so that it doesn't get over-written on reload
(defonce app-state (atom {:text "Hello world!"}))

(defn get-app-element []
  (gdom/getElement "app"))



;; specify reload hook with ^:after-load metadata
(defn ^:after-load on-reload []
  ;; optionally touch your app-state to force rerendering depending on
  ;; your application
  ;; (swap! app-state update-in [:__figwheel_counter] inc)
)
#+end_src
**** src
***** ns
# (ns ^:figwheel-hooks learn-cljs.contacts
# (require '[clojure.string :as str])
# (require '[goog.events :as gevents])
#+begin_src clojure
(ns learn-cljs.contacts                 ;
  (:require
    [goog.dom :as gdom]
    [hiccups.runtime]
    [goog.events :as gevents]
    [clojure.string :as str])
  (:require-macros [hiccups.core :as hiccups]))

(declare refresh! Set-app-html!)
#+end_src
***** Models and State
****** contact-list
#+begin_src clojure
(def contact-list [
                   {:first-name "Phillip"
                    :last-name "Jordan"
                    :email "phil.j@hotmail.com"
                    :address {:street "523 Sunny Hills Cir."
                              :city "Springfield"
                              :state "MI"
                              :postal "11111"
                              :country "USA"}}])


#+end_src
****** make-contact
#+begin_src clojure
(defn make-address [address]
  (select-keys address [:street :city :state :country]))

(defn maybe-set-address [contact]                          ;; <1>
  (if (:address contact)
    (update contact :address make-address)
    contact))

(defn make-contact [contact]
  (-> contact                                              ;; <2>
      (select-keys [:first-name :last-name :email])
      (maybe-set-address)))

(defn add-contact [contact-list input]
  (conj contact-list
        (make-contact input)))

(defn remove-contact [contact-list idx]
  (vec                                                     ;; <1>
    (concat                                                ;; <2>
      (subvec contact-list 0 idx)                          ;; <3>
      (subvec contact-list (inc idx)))))

(defn replace-contact [contact-list idx input]
  (assoc contact-list idx (make-contact input)))
#+end_src
****** initial-state
#+begin_src clojure
(def initial-state
  {:contacts contact-list
   :selected nil
   :editing? false})
#+end_src
****** declare refresh!
#+begin_src clojure
(def app-container (gdom/getElement "app"))
#+end_src

***** UI
****** top-bar
#+begin_src clojure
(def top-bar
  [:div {:class "navbar has-shadow"}
   [:div {:class "container"}
    [:div {:class "navbar-brand"}
     [:span {:class "navbar-item"}
      "ClojureScript Contacts"]]]])

        
#+end_src

****** render-contact-details
#+begin_src clojure
(defn form-field                                           ;; <1>
  ([id value label] (form-field id value label "text"))
  ([id value label type]
   [:div {:class "field"}
     [:label {:class "label"} label]
     [:div {:class "control"}
       [:input {:id id
                :value value
                :type type
                :class "input"}]]]))

(defn render-contact-details [contact]
  (let [address (get contact :address {})]                 ;; <2>
    [:div {:id "contact-form" :class "contact-form"}
      (form-field "input-first-name" (:first-name contact) "First Name")
      (form-field "input-last-name" (:last-name contact) "Last Name")
      (form-field "input-email" (:email contact) "Email" "email")
      [:fieldset
        [:legend "Address"]
        (form-field "input-street" (:street address) "Street")
        (form-field "input-city" (:city address) "City")
        (form-field "input-state" (:state address) "State")
        (form-field "input-postal" (:postal address) "Postal Code")
        (form-field "input-country" (:country address) "Country")]]))
#+end_src
****** section-header
#+begin_src clojure
(defn action-button [id text icon-class]
  [:button {:id id
            :class "button is-primary is-light"}
    [:span {:class (str "mu " icon-class)}]
    (str " " text)])

(def save-button (action-button "save-contact" "Save" "mu-file"))
(def cancel-button (action-button "cancel-edit" "Cancel" "mu-cancel"))
(def add-button (action-button "add-contact" "Add" "mu-plus"))

(defn section-header [editing?]
  [:div {:class "section-header"}
    [:div {:class "level"}
      [:div {:class "level-left"}
        [:div {:class "level-item"}
          [:h1 {:class "subtitle"}
            [:span {:class "mu mu-user"}]
            "Edit Contact"]]]
      [:div {:class "level-right"}
        (if editing?
          [:div {:class "buttons"} cancel-button save-button]
          add-button)]]])
#+end_src
****** Rendering Contacts
#+begin_src clojure
(defn format-name [contact]                                ;; <1>
  (->> contact                                             ;; <2>
       ((juxt :first-name :last-name))                     ;; <3>
       (str/join " ")))

(defn delete-icon [idx]
  [:span {:class "delete-icon"
          :data-idx idx}
    [:span {:class "mu mu-delete"}]])

(defn render-contact-list-item [idx contact selected?]
  [:div {:class (str "card contact-summary" (when selected? " selected"))
         :data-idx idx}                                    ;; <4>
    [:div {:class "card-content"}
      [:div {:class "level"}
        [:div {:class "level-left"}
          [:div {:class "level-item"}
            (delete-icon idx)
            (format-name contact)]]
        [:div {:class "level-right"}
          [:span {:class "mu mu-right"}]]]]])

(defn render-contact-list [state]
  (let [{:keys [:contacts :selected]} state]
    [:div {:class "contact-list column is-4 hero is-fullheight"}
      (map-indexed (fn [idx contact]
                     (render-contact-list-item idx contact (= idx selected)))
                   contacts)]))

#+end_src
****** render-app!
#+begin_src clojure
(defn render-app! [state]
  (set-app-html!
    (hiccups/html
      [:div {:class "app-main"}
        top-bar
        [:div {:class "columns"}
          (render-contact-list state)
          [:div {:class "contact-details column is-8"}
            (section-header (:editing? state))
            [:div {:class "hero is-fullheight"}
              (if (:editing? state)
                (render-contact-details (get-in state [:contacts (:selected state)] {}))
                no-contact-details)]]]])))

#+end_src

***** Adding Interactions
****** on-open-contact
#+begin_src clojure
(defn on-open-contact [e state]
  (refresh!
    (let [idx (int (.. e -currentTarget -dataset -idx))]
      (assoc state :selected idx
                   :editing? true))))

(def no-contact-details   [:p {:class "notice"}    "No contact selected"])
#+end_src
****** adding or updating a contact
#+begin_src clojure
(defn get-field-value [id]
  (let [value (.-value (gdom/getElement id))]
    (when (not (empty? value)) value)))

(defn get-contact-form-data []
  {:first-name (get-field-value "input-first-name")
   :last-name (get-field-value "input-last-name")
   :email (get-field-value "input-email")
   :address {:street (get-field-value "input-street")
             :city (get-field-value "input-city")
             :state (get-field-value "input-state")
             :postal (get-field-value "input-postal")
             :country (get-field-value "input-country")}})

(defn on-save-contact [state]
  (refresh!
    (let [contact (get-contact-form-data)
          idx (:selected state)
          state (dissoc state :selected :editing?)]        ;; <1>
      (if idx
        (update state :contacts                            ;; <2>
                replace-contact idx contact)
        (update state :contacts
                add-contact contact)))))

(defn on-add-contact [state]
  (refresh! (-> state
                (assoc :editing? true)
                (dissoc :selected))))

(defn replace-contact [contact-list idx input]
  (assoc contact-list idx (make-contact input)))

(defn on-save-contact [state]
  (refresh!
    (let [contact (get-contact-form-data)
          idx (:selected state)
          state (dissoc state :selected :editing?)]
      (if idx
        (update state :contacts replace-contact idx contact)
        (update state :contacts add-contact contact)))))

(defn on-cancel-edit [state]
  (refresh! (dissoc state :selected :editing?)))

(defn on-delete-contact [e state]
  (.stopPropagation e)
  (let [idx (int (.. e -currentTarget -dataset -idx))]
    (refresh! (-> state
                  (update :contacts remove-contact idx)
                  (cond-> (= idx (:selected state))
                    (dissoc :selected :editing?))))))

#+end_src
****** attach-event-handlers!
#+begin_src clojure
(defn attach-event-handlers! [state]
  (doseq [elem (array-seq (gdom/getElementsByClass "contact-summary"))]
    (gevents/listen elem "click"
      (fn [e] (on-open-contact e state))))

  (doseq [elem (array-seq (gdom/getElementsByClass "delete-icon"))]
    (gevents/listen elem "click"
      (fn [e] (on-delete-contact e state))))

  (when-let [add-button (gdom/getElement "add-contact")]
    (gevents/listen add-button "click"
      (fn [_] (on-add-contact state))))

  (when-let [save-button (gdom/getElement "save-contact")]
    (gevents/listen save-button "click"
      (fn [_] (on-save-contact state))))

  (when-let [cancel-button (gdom/getElement "cancel-edit")]
    (gevents/listen cancel-button "click"
      (fn [_] (on-cancel-edit state)))))


#+end_src

***** refresh!
#+begin_src clojure 
(defn set-app-html! [html-str]
  (set! (.-innerHTML app-container) html-str))

(defn refresh! [state]                                     ;; <3>
  (render-app! state)
  (attach-event-handlers! state))

(refresh! initial-state)                                   ;; <4>
#+end_src
***** # after-load not use
#+begin_src clojure :tangle no 
(defn ^:after-load on-reload []
  ;; optionally touch your app-state to force rerendering depending on
  ;; your application
  ;; (swap! app-state update-in [:__figwheel_counter] inc)
)
#+end_src
*** deps.edn
:PROPERTIES:
:header-args: :tangle  contacts/deps.edn
:END:
**** file
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/contacts/deps.edn
**** src
#+begin_src clojure
{:deps {org.clojure/clojure {:mvn/version "1.10.0"}
        org.clojure/clojurescript {:mvn/version "1.11.4"}
        hiccups/hiccups {:mvn/version "0.3.0"}}
 :paths ["src" "resources"]
 :aliases {:fig {:extra-deps
                 {com.bhauman/rebel-readline-cljs {:mvn/version "0.1.4"}
                  org.slf4j/slf4j-nop {:mvn/version "1.7.30"}
                  com.bhauman/figwheel-main {:mvn/version "0.2.17"}}
                 :extra-paths ["target" "test"]}
           :build {:main-opts ["-m" "figwheel.main" "-b" "dev" "-r"]}
           :min   {:main-opts ["-m" "figwheel.main" "-O" "advanced" "-bo" "dev"]}
           :test  {:main-opts ["-m" "figwheel.main" "-co" "test.cljs.edn" "-m" "learn-cljs.test-runner"]}}}
#+end_src
*** contacts_test.cljs
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/contacts/src/learn_cljs/contacts.cljs")
* TODO todo
** NEXT –ø—Ä–æ–≥—Ä–∞–º–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—è–µ—Å–∫–∞—è
*** file
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/worder/worder-cljs-project.org")
*** –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å —Ç—É–¥—É–µ—Ä

–≤ –∏–∑–º–µ—Ä–∏—Ç–µ–ª—å —Ä–µ–∞–∫—Ü–∏–π
–¥–æ–±–æ–≤–ª–µ–º —Å–ª–æ–≤–∞ –≤–º–µ—Å—Ç–æ —Ç—É–¥—É
—É –∫–∞–∂–¥–æ–≥–æ —Ç—É–¥—É –∫–Ω–æ–ø–∫–∞ –∑–∞–º–µ—Ä–∏—Ç—å –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–º–µ—Ä–∞
–¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–∏–ª
    –º–æ–∂–µ—Ç –≤ —Ü—Å–≤
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤
—Å–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É
–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∏—Ç—Å—è

–∑–∞–ø–æ—Å—Ç–∏—Ç—å
–ø–µ—Ä–µ–¥–∞—Ç—å –≤–∞–ª–µ
*** —Ç—É–¥—É
**** —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ä–≥
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/worder/worder-cljs-project.org")
**** —Å–¥–µ–ª–∞—Ç—å –∫–æ–ø–∏—é –ø—Ä–æ–µ–∫—Ç–∞
**** –∑–∞–º–µ–Ω–∏—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ω–æ–≤—ã–π –ø—É—Ç—å
**** –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–ø–∏—é
—É–±–µ–¥–∏—Ç—Å—è –≤ —Ä–∞–±–æ—Ç–æ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
**** –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ –æ—Ä–≥ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã
–≤–∑—è—Ç—å –∫–∞–∫ –º–∏–Ω–Ω–∏–º—É–º –æ–¥–∏–Ω —Ñ–∞–∏–ª —á—Ç–æ —É–±–µ–¥–∏—Ç—å –≤ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞
**** –∫–æ–º–ø–æ–Ω–µ—Ç –∏–∑–º–µ—Ä–∏—Ç–µ–ª—å —Ä–µ–∞–∫—Ü–∏–∏
–Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ—Ç- –∫–Ω–æ–ø–∫–∞
–º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –¥–≤—É—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö. –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–∂–∞—Ç–æ–µ\–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ–µ.
—ç—Ç–æ –∫–Ω–æ–ø–∫–∞ —Å–∏–∫—É–Ω–¥–æ–º–µ—Ä–∞.
–≤ –∞–∫—Ç–∏–≤–Ω–æ–º –æ–Ω–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∞ –±—ã–ª–∞ –Ω–∞–∂–∞—Ç–∞
–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—Ç–æ—Ä–æ–π –∫–æ–º–ø–æ–Ω–µ—Ç –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å–µ–∫—É–Ω–¥.
–ø—Ä–∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ–Ω–æ –≤—ã—Å—á–∏—Ç–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ø—Ä–æ—à–ª–æ –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

–ø–æ—Å—É—Ç–µ —ç—Ç–æ –ø—Ä–∏–º–µ—Ä –∫–∞—É–Ω—Ç–µ—Ä–∞
–º–Ω–æ–≥–æ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –æ—Ç—Ç—É–¥–∞
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/keechma-counter/src/cljs/keechma_counter/ui/main.cljs")
[[file:keechma-counter/src/cljs/keechma_counter/ui/main.cljs::\[:button {:on-click #(ui/send-command ctx :dec)} "-"\]]]
**** –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–º–µ—Ä–∞ —Ä–µ–∞–∫—Ü–∏–∏
–≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ –∫–æ–º–ø–æ–Ω–µ—Ç –∞ –ø—Ä–æ—Å—Ç–æ —Ö–∏–∫–∞–ø —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
**** –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–¥ —Å–ª–æ–≤–∞ –≤ –∏–Ω—Ç–µ—Ä–≤–µ–π—Å–µ
–¥–æ–±–æ–≤–ª–µ–º —Å–ª–æ–≤–∞ –≤–º–µ—Å—Ç–æ —Ç—É–¥—É
–≤–∏–¥–µ–º–æ –≤–æ—Ä–¥–µ—Ä
**** –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–¥ —Å–ª–æ–≤–∞ –≤ –∫–æ–¥–µ
–ø–æ–≤–æ–∑–º–æ–∂–Ω–æ –≤–µ–∑–¥–µ –ø–æ –∫–æ–¥—É
**** –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–º–µ—Ä–∞ –≤ —Ç—É–¥—É-–∏—Ç–µ–º—Å
—É –∫–∞–∂–¥–æ–≥–æ —Ç—É–¥—É –∫–Ω–æ–ø–∫–∞ –∑–∞–º–µ—Ä–∏—Ç—å –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–º–µ—Ä–∞
**** –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞ 
–≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å—Ä–∞–∑—É –≤—Å–µ –≤ —Ç–µ–∫—Å—Ç
—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–∏–ª
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
—Å–æ—Ö—Ä–æ–Ω—è—Ç—å —Ç–µ —á—Ç–æ –≤ –¥–∞–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã
—Ç–æ–µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ as .txt"
—Ç–æ–µ—Å—Ç—å –ª–∏–±–æ –≤—Å–µ –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ –ª–∏–±–æ –Ω–µ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
**** –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞ –≤ —Ü—Å–≤
–≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å—Ä–∞–∑—É –≤—Å–µ –≤ —Ü—Å–≤
—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ 
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
—Å–æ—Ö—Ä–æ–Ω—è—Ç—å —Ç–µ —á—Ç–æ –≤ –¥–∞–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã
—Ç–æ–µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ as .csv"
—Ç–æ–µ—Å—Ç—å –ª–∏–±–æ –≤—Å–µ –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ –ª–∏–±–æ –Ω–µ –∑–∞–≤–µ—Ä—à–æ–Ω—ã–µ
**** –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤
**** —Å–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É
–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –∏–∑ —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∏—Ç—Å—è
**** –∑–∞–±–∏–ª–¥–∏—Ç—å –¥–ª—è —Ä–∞–∑–º–µ—à–µ–Ω–∏—è
**** –∑–∞—Ö–æ—Å—Ç–∏—Ç—å
–≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–∞ –±—É–¥–µ—Ç –ø–æ–º–æ—à—å –£–Ω–∏
**** –ø–µ—Ä–µ–¥–∞—Ç—å –≤–∞–ª–µ
** —Å–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –º–∞–≥–∞–∑–∏–Ω–∞ –æ—Ä–≥
*** firebase store proeject
–ø–æ–∏–¥–µ–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ 
–∏ –≤–æ–æ–±—â–µ –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Ä–º–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞

*** cljs-firebase-client

–ò—Å–ø–æ–ª—å–∑—É–π cljs-firebase-client: –≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É–ø—Ä–æ—Å—Ç–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Firebase –≤ ClojureScript.


MVP	–ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥ (json –∏–ª–∏ Firestore)	–≤—Å—ë –ª–æ–∫–∞–ª—å–Ω–æ
1	–ö–æ—Ä–∑–∏–Ω–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤	Firestore
2	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π	Firebase Auth
3	–î–µ–ø–ª–æ–π	Firebase Hosting
4	–ö—Ä–∞—Å–æ—Ç–∞ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ	SEO, OpenGraph, manifest.json
** –ø—Ä–æ–≥—Ä–∞–º–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ
*** –ø—Ä–æ–¥—É–º–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
*** —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
*** —Å–ø–∏—Å–æ–∫ —Ñ–∏—á
**** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–µ–∫—Å—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–º–æ–∂–µ—Ç –≤ —Ü—Å–≤
**** –Ω–∞—á–∞—Ç—å —Ç–∞–π–º–µ—Ä
**** –≤—ã–±—Ä–∞—Ç—å –∫–Ω–∏–≥—É
**** —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
**** –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É
–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å –æ–±–ª–æ–∂–∫—É
–∏ –∑–∞–¥–Ω–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
**** —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä—É—á–Ω—É—é
–¥–æ–±–∞–≤–∏—Ç—å –º–∏–Ω—É—Ç
—É–±—Ä–∞—Ç—å –º–∏–Ω—É—Ç
**** –ø–ª–∞—à–∫–∏ –∏ –±–µ–π–¥–∂–∏–∫–∏
—Å–µ–π—á–∞—Å —á–∏—Ç–∞—é –∫–Ω–∏–≥—É
–ø—Ä–æ—á–∏—Ç–∞–ª–∞ –∫–Ω–∏–≥ –≤ –≥–æ–¥
      –Ω–µ–¥–µ–ª—é
      –º–µ—Å—è—Ü

**** —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏
—á–µ–ª–µ–Ω–¥–∂–∏

**** —Ä–∞–∑–¥–µ–ª –ª–∏—á–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

** TODO Keechma exampls
*** todo
https://keechma.com/guides/application-walkthrough/
https://github.com/keechma/example-place-my-order

Login

Application that implements the login workflow.

,* [[https://github.com/keechma/keechma-login][Source code]]
,* [[https://keechma.com/annotated/login/][Annotated source]]

Graph data

Application that shows how to render the graph data in Keechma.

,* [[https://github.com/keechma/keechma-graph-data][Source code]]
,* [[https://keechma.com/annotated/graph-data/][Annotated source]]

Forms

Application that shows how to use the [[https://github.com/keechma/forms][Keechma Forms]] Library.

,* [[https://github.com/keechma/keechma-forms-example][Source code]]
,* [[https://keechma.com/annotated/form-example/][Annotated source]]
*** done
TodoMVC

TodoMVC application example.

,* [[https://github.com/keechma/keechma-todomvc][Source code]]
,* [[https://keechma.com/annotated/todomvc/][Annotated source]]

https://keechma.com/annotated/
Counter

Counter application example.

,* [[https://github.com/keechma/keechma-counter][Source code]]
,* [[https://keechma.com/annotated/counter/][Annotated source]]
** reagent-material-ui
*** use
https://github.com/DaveWM/reagent-material-u
https://github.com/arttuka/reagent-material-ui
*** mui helps
https://mui.com/material-ui/getting-started/supported-components/
https://mui.com/material-ui/getting-started
https://m1.material.io/material-design/introduction.html#

** –ø—Ä–æ—á–∏—Ç–∞—Ç—å
https://clojurescript.org/guides/quick-start

** –∫–ª–æ–∂—É—Ä –¥–ª—è –∞–Ω–¥—Ä–æ–∏–¥–∞
https://habr.com/ru/articles/705448/
** figwheel
https://figwheel.org/tutorial
https://figwheel.org/docs/
https://clojurescript.org/tools/testin
https://figwheel.org/docs/testing.htmlg
http://figwheel.org/docs/reloadable_cod
http://rigsomelight.com/2014/05/01/interactive-programming-flappy-bird-clojurescript.html
https://www.youtube.com/watch?v=j-kj2qwJa_E
https://www.youtube.com/watch?v=KZjFVdU8VLI
https://github.com/bhauman/figwheel-main

** TODO –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—Ñ–µ–π–Ω–µ –∏ –∫–Ω–∏–∂–Ω–æ–º –º–∞–≥–∞–∑–∏–Ω–µ.
–ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥: –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–Ω–∏–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º.
–ö–æ—Ä–∑–∏–Ω–∞: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–∏–≥ –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è).
–Ω–∞–π—Ç–∏ –Ω–∞—Å
—Å–¥–µ–ª–∞—Ç—å –∏ –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑ –∫–æ—Ñ–µ
–º–µ–Ω—é
–≤—ã–∑–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–Ω–∞—Ç
** –ò–∑—É—á–∏—Ç—å re-frame
*** —á–∏—Ç–∞—Ç—å
https://day8.github.io/re-frame/dominoes-30k/
https://day8.github.io/re-frame/start-coding/
https://github.com/day8/re-frame/blob/master/docs/External-Resources.md
https://github.com/day8/re-frame-template/tree/master
*** todo re-frame
https://github.com/thdaraujo/re-frame-todo
https://todomvc.com/
*** —Å–¥–µ–ª–∞—Ç—å —Ç–µ–ø–ª–∞—Ç
https://github.com/Day8/re-frame-template
*** –ø–æ—á–∏—Ç–∞—Ç—å —Ä–µ-—Ñ—Ä–µ–π–º —Å–∞–π—Ç?
*** –ø–æ–∏—Å–∫–∞—Ç—å —Ç—É—Ç–æ—Ä–∏–∞–ª –ø–æ —Ä–µ-—Ñ—Ä–µ–π–º—É?
–æ—Ç–∫—Ä—ã—Ç—å —ç—Ç–æ –≤—Å—ë –º–æ–∂–Ω–æ –≤ –∏–º–∞–∫—Å–µ –Ω–∞ –Ω–æ—É—Ç–µ
–∏ –∫–∞–∫ –º–∏–Ω–∏–º—É–º —á–∞—Å –≤–ø–æ–ª–Ω–µ –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å
–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–¥—Ñ –∏ —á–∏—Ç–∞—Ç—å –±–æ–ª—å—à–µ
—Ç–∞–∫–∂–µ –≤–∞—Ä–∏–∞–Ω—Ç –ø–ª–∞–Ω—à–µ—Ç + –±—Ç–∞—Ä–µ—è
*** reagent-figwheel
https://github.com/gadfly361/reagent-figwheel/blob/master/README.md
—Ç–µ–º–ø–ª–∞—Ç –ø–æ—Ö–æ–∂–µ –∑–∞—Ç–æ—á–µ–Ω –ø–æ–¥ —Ä–µ—Ñ—Ä–µ–π–º —Å—Ç–æ–∏—Ç –ø—Ä–æ–º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å
–º–æ–∂–µ—Ç —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –ø—É—Ç—å –¥–ª—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—è

** –ò–ò
–ß—Ç–æ–∂—å —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –ø–ª–∞–Ω.
–≤–∑—è—Ç—å –∑–Ω–∞–∫–æ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.
–∫–ª–æ–∂—É—Ä —Å–∫—Ä–∏–ø—Ç + reagent + figwheel.
–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ –∑–Ω–∞–∫–æ–º—ã–µ –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –ø–µ—Ä–µ—É—Å–ª–æ–∂–Ω—ë–Ω—ã–µ.
cljs-firebase-client(–∏–ª–∏ –ø–æ—Ö–æ–∂–µ–µ –¥–ª—è firebase) - –Ω–µ–∑–Ω–∞—é –ø–æ–∫–∞ –∫–∞–∫ —Å–ª–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å, –Ω–æ –æ–Ω–æ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –Ω–∞—Å–µ–± –æ–≥—Ä–æ–º–Ω—ã–π –∫—É—Å–æ–∫ –¥—Ä—É–≥–∏—Ö –≥–æ–ª–æ–≤–Ω—ã—Ö –±–æ–ª–µ–π –µ—Å–ª–∏ –ø–æ–ª—É—á–∏—Ç—Å—è. –ü–æ—Ç–æ–º—É –Ω—É–∂–Ω–æ –≤–∑—è—Ç—å —ç–≥–æ –∑–∞ –æ—Å–Ω–æ–≤—É
–≤–æ–∫—Ä—É–≥ –Ω–µ–≥–æ –ø—Ä–æ–ª–æ–∂–∏—Ç—å
Keechma - –¥–∞—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—ã –Ω–µ —Å–ª–∏—à–∫–æ–º –ø–µ—Ä–µ—É—Å–ª–∞–∂–Ω—ë–Ω—É—é. —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∏–∑—É—á–∞—Ç—å –Ω–æ –≤—Ä–æ–¥–µ –Ω–µ —á–µ—Ä–µ–∑–º–µ—Ä–Ω–æ.
–∏ —É–∂–µ –≤–Ω–µ—à–Ω–µ–µ –æ—Ñ–æ—Ä–º–∏—Ç—å —á–µ—Ä–µ–∑.  –ì–ª–∞–≤–Ω–æ–µ –æ–Ω –¥—Ä—É–∂–∏—Å figwheel —á—Ç–æ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∏–∑—É—á–µ–Ω–∏—è –ø–æ–∫–∞ —à–∞–¥–æ–≤–∫–ª–æ–∂—É—Ä–∞. 
reagent-material-ui - –ø–æ—Å–∫–æ–ª—å–∫—É –ø–æ–∑–≤–æ–ª–∏—Ç —Å–∏–ª—å–Ω–æ —É–ø—Ä–∞—Å—Ç–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —á–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—ã—Ç –æ—Ä–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –í—Ä–æ–¥–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∏–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è. –¥–æ–±–∞–≤–∏–ª –∏ –≤–ø–µ—Ä—ë–¥ —Å—Ç—Ä–æ–π –∏–∑ –∫–æ–º–ø–æ–Ω–µ—Ç–æ–≤
–∏–∑ –º–∏–Ω—É—Å–æ–≤ –µ—Å—Ç—å –æ—à—É—à–µ–Ω–∏–µ —á—Ç–æ —ç—Ç–æ –≤—Å—ë —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –∫–∞–∫ –ø–æ—á—Ç–∏ –≤—Å—ë –æ—Å–Ω–æ–≤–∞–Ω–æ–µ –Ω–∞ figwheel. –ù–æ –∑–∞—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –≤—Å—ë —Å–æ–±—Ä–∞—Ç—å. –ò —É–∂–µ –ø–æ—Ç–æ–º –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–º–µ–Ω—è—Ç—å –Ω–∞ –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.
–í—ã–≥–ª—è–¥–∏—Ç –≤—Ä–æ–¥–µ –ø–æ–¥—ë–º–Ω–æ.
–ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å —Å –∫–∞–∫–æ–≤–æ —Ç–µ–ø–ª–∞—Ç–∞ –Ω–∞—á–∞—Ç—å –ø—Ä–∏ —Ç–∞–∫–∏—Ö –≤–≤–æ–¥–Ω—ã—Ö?
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ 
clj -X:new :template figwheel-main :name freeman/tolk :args '["+deps" "--reagent"]'
? –∏–ª–∏ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ?
** –∏–∑—É—á–∏—Ç—å shadow-cljs
*** —á–∏—Ç–∞—Ç—å
https://shadow-cljs.github.io/docs/UsersGuide.html
*** —Å–¥–µ–ª–∞—Ç—å —Ç—É—Ä–∏–∞–ª –ø—Ä–æ–µ–∫—Ç
*** —Å–æ–±—Ä–∞—Ç—å –µ–≥–æ –≤ —Ä–µ–ª–∏–∑–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
** kee-frame
–≤—Ä–æ–¥–µ —ç—Ç–æ —Ä–µ—Ñ—Ä–µ–π–º –Ω–æ —É–Ω–µ–≥–æ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —Ñ–∏–≥–≤–∏–ª–æ–º

https://cljdoc.org/d/kee-frame/kee-frame/0.3.4-SNAPSHOT/doc/readme

https://github.com/ingesolvoll/kee-frame
** –∏–∑—É—á–∏—Ç—å Fulcro
**Angular-–ø–æ–¥–æ–±–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫** –¥–ª—è Clojure/ClojureScript ‚Äî —Ç–æ –æ—Ç–≤–µ—Ç:

üìå **–ï—Å—Ç—å –∞–Ω–∞–ª–æ–≥–∏ –ø–æ –º–∞—Å—à—Ç–∞–±—É –∏ —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
–≠—Ç–æ –ù–ï –ø–ª–æ—Ö–∞—è –∏–¥–µ—è ‚Äî –ø—Ä–æ—Å—Ç–æ –æ—á–µ–Ω—å –¥—Ä—É–≥–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è.**

---

## ‚úÖ Angular ‚âà ClojureScript –∞–Ω–∞–ª–æ–≥–∏

| –ê–Ω–∞–ª–æ–≥ Angular       | –ß—Ç–æ —ç—Ç–æ                                          | –£—Ä–æ–≤–µ–Ω—å ¬´—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤–æ—Å—Ç–∏¬ª | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                                  |
| -------------------- | ------------------------------------------------ | ------------------------- | ------------------------------------------- |
| **Fulcro**           | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π SPA-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (UI + —Å–µ—Ä–≤–µ—Ä + –¥–∞–Ω–Ω—ã–µ) | üü•üü•üü•üü•üü•                | State-driven, EQL/Pathom, –º–æ—â–Ω—ã–π –Ω–æ —Å–ª–æ–∂–Ω—ã–π |
| **Keechma**          | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ + –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö                      | üü•üü•üü•üü•‚¨ú                 | –ß–∏—Å—Ç—ã–π FRP, –∫—Ä—É—Ç–æ –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è      |
| **Re-frame**         | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–≤–µ—Ä—Ö Reagent                       | üü•üü•üü•‚¨ú‚¨ú                  | –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –ø—É—Ç—å                       |
| **Helix** + tools    | –õ—ë–≥–∫–æ–µ —è–¥—Ä–æ, –º–æ–∂–Ω–æ –¥–æ—Å—Ç—Ä–æ–∏—Ç—å                     | üü•üü•‚¨ú‚¨ú‚¨ú                   | –°–æ–≤—Å–µ–º –±–µ–∑ ¬´–º–∞–≥–∏–∏¬ª                          |
| **Hoplon** / Javelin | –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–µ–∑ Virtual DOM                     | üü•‚¨ú‚¨ú‚¨ú‚¨ú                    | –≠–∫–∑–æ—Ç–∏–∫–∞, –Ω–æ –∫—Ä–∞—Å–∏–≤–æ                        |

---

### –ï—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é

| Angular                      | Fulcro                                      |
| ---------------------------- | ------------------------------------------- |
| RxJS, DI, ¬´–º–∞–≥–∏—è¬ª            | EQL + UI = DB query                         |
| –°–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å–ª–æ–∂–Ω–æ—Å—Ç—å | –°–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, **–µ—â—ë –±–æ–ª—å—à–µ** —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ |
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã = –∫–ª–∞—Å—Å—ã          | UI = pure data driven                       |
| Two-way binding              | **One source of truth**                     |

**Fulcro ‚Äî –±–ª–∏–∂–µ –≤—Å–µ–≥–æ –∫ Angular –ø–æ —É—Ä–æ–≤–Ω—é ‚Äú–≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ‚Äù**, –Ω–æ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π, –¥–µ–∫–ª–∞—Ä—Ç–∏–≤–Ω–æ–π –º–æ–¥–µ–ª—å—é.
–î–ª—è –º–Ω–æ–≥–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ ‚Äî —ç—Ç–æ **–ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –ø–∏—Å–∞—Ç—å –±–æ–ª—å—à–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ CLJS**.

---

## ‚ùì –ü–ª–æ—Ö–∞—è –ª–∏ –∏–¥–µ—è ¬´Angular –¥–ª—è Clojure¬ª?

–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ **–Ω–µ—Ç**. –ù–æ:

Angular = –º–Ω–æ–≥–æ boilerplate, –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π
Clojure = –º–∏–Ω–∏–º–∞–ª–∏–∑–º, –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å, –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

üëâ –ü–æ—ç—Ç–æ–º—É Clojure-—Å–æ–æ–±—â–µ—Å—Ç–≤–æ **–Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç Angular**, –∞ –¥–µ–ª–∞–µ—Ç **–ª—É—á—à–µ**

---

### üî• –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ

| –†–∞–∑–º–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞                     | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è                |
| ---------------------------------- | --------------------------- |
| –ú–∞–ª–µ–Ω—å–∫–∏–π SPA, –±—ã—Å—Ç—Ä–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å   | **Reagent + –Ω–µ–º–Ω–æ–≥–æ state** |
| –°—Ä–µ–¥–Ω–∏–π, —Å–µ—Ä—å—ë–∑–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞     | **Re-frame**                |
| –ë–æ–ª—å—à–æ–π enterprise, —Å–ª–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω—ã | **Fulcro** –∏–ª–∏ **Keechma**  |

---

## –•–æ—á–µ—à—å ‚Äî —Å–¥–µ–ª–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ

–Ø –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ç—Ä–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Ç—ã –≤—ã–±–∏—Ä–∞–µ—à—å:

1Ô∏è‚É£ *¬´–ö–∞–∫ Angular, –Ω–æ –Ω–∞ Clojure¬ª* ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å **Fulcro** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç + backend query
2Ô∏è‚É£ *¬´–õ–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ¬ª* ‚Äî Reagent + Re-frame –ø—Ä–∏–º–µ—Ä TODO
3Ô∏è‚É£ –†–∞–∑–±–æ—Ä —Ç–≤–æ–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ Keechma-–ø—Ä–æ–µ–∫—Ç–∞ ‚Äî —É–ª—É—á—à–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ß—Ç–æ –≤—ã–±–µ—Ä–µ–º?
–ú–æ–≥—É —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ.

* DONE arhiv
** DONE –û—Å–º–æ—Ç—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/group-chat/Group-Chat-cljs-project.org")
** DONE —Å–¥–µ–ª–∞—Ç—å –ø–∞–ø–∫—É
** DONE –Ω–µ—Ç—É –Ω–µ—á–µ–≥–æ –∫—Ä–æ–º–µ –æ—Ä–≥–∞
** DONE —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
[[file:~/Dropbox/orgs/org-Brain/ClojureScript Idioms.org::*new project][new project]]
clj -X:new :template figwheel-main :name learn-cljs/group-chat :args '["+deps" "--reagent"]'
–∏–∑ –ø–∞–ø–∫–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º –≥—Ä—É–ø —á–∞—Ç–∞
–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ —á—Ç–æ –ø–∞–ø–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
** DONE –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –¢–∞–Ω–≥–ª–∏–Ω–≥–∞
*** –æ—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–æ–∂—É—Ä–∞
*** —Å–ø—Ä–æ—Å–∏—Ç—å –∏–∏
–µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ —Ç–∞–Ω–≥–ª–∏–Ω–≥–µ –¥–æ–±–æ–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Å—É—Ç—Å–≤—É—é –≤ —Å–æ—Ä–±–ª–æ–∫–µ
*** group_chat.cljs
:PROPERTIES:
:header-args: :tangle  group-chat/src/learn_cljs/group_chat.cljs
:END:
*** file
(find-file-other-frame "./group-chat/src/learn_cljs/group_chat.cljs")
*** src core.cljs
**** ns
#+begin_src clojure :results output silent
(ns ^:figwheel-hooks learn-cljs.group-chat
  (:require
    [goog.dom :as gdom]
    [reagent.core :as reagent :refer [atom]]
    [reagent.dom :as rdom]))
#+end_src
**** println

(println "Test text")

#+begin_src clojure :results output silent

(println "This text is printed from src/learn_cljs/group_chat.cljs. Go ahead and edit it and see reloading in action.")
#+end_src
**** test
#+begin_src clojure :results output silent

(defn multiply [a b] (* a b))
#+end_src

**** defonce
#+begin_src clojure :results output silent

;; define your app data so that it doesn't get over-written on reload
(defonce app-state (atom {:text "Hello world!"}))
#+end_src

**** render
#+begin_src clojure :results output silent

(defn get-app-element []
  (gdom/getElement "app"))

(defn hello-world []
  [:div
   [:h1 (:text @app-state)]
   [:h3 "Edit this in src/learn_cljs/group_chat.cljs and watch it change!!"]])

(defn mount [el]
  (rdom/render [hello-world] el))

(defn mount-app-element []
  (when-let [el (get-app-element)]
    (mount el)))

;; conditionally start your application based on the presence of an "app" element
;; this is particularly helpful for testing this ns without launching the app
(mount-app-element)

;; specify reload hook with ^:after-load metadata
(defn ^:after-load on-reload []
  (mount-app-element)
  ;; optionally touch your app-state to force rerendering depending on
  ;; your application
  ;; (swap! app-state update-in [:__figwheel_counter] inc)
  )
#+end_src
*** —ç—Ç–æ —Ç–∞–Ω–≥–ª–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
*** –Ω–æ
*** state.cljs
:PROPERTIES:
:header-args: :tangle  group-chat/src/learn_cljs/chat/state.cljs
:END:
**** file
(find-file-other-frame "group-chat/src/learn_cljs/chat/state.cljs")
**** src
#+begin_src clojure
(ns learn-cljs.chat.state)

(def initial-state                                         ;; <1>
  {:rooms []
   :people []
   :messages []
   :current-user nil})

(defonce app-state (atom initial-state))                   ;; <2>

#+end_src
*** —Å—Ç—Ä–æ–∫–∏ –ø—Ä–µ—Ä–∞—à–∞—é—Ç—Å—è –≤ 
(prn (binding [*out* (java.io.StringWriter.)](ns learn-cljs.chat.state)

(def initial-state                                         ;; <1>
  {:rooms []
   :people []
   :messages []
   :current-user nil})

(defonce app-state (atom initial-state))                   ;; <2>))
*** –≤–æ—Ç –º–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–æ–∂—É—Ä–∞ –≤ –∏–º–∞–∫—Å–µ

(load (expand-file-name "INI/dev/clojure-cfg.el" user-emacs-directory))
*** src
#+begin_src elisp
;; * CLOJURE-MODE CUSTOMIZATION
;; --------------------------------------
;; ** clojure-mode
(use-package clojure-mode
  :defer t
  ;; :disabled
  :ensure t
  :config
 (setq clojure-indent-style 'align-arguments)
 (setq clojure-indent-keyword-style 'align-arguments)
  )
;; ** ob-clojur-mode
(use-package ob-clojure
  ;; :disabled
  :defer t
  ;; :ensure t
  :config
    (setq org-babel-clojure-backend 'cider)
  ;; (add-hook 'prog-mode-hook 'rainbow-delimiters-mode)
  ;; (custom-theme-set-faces
  ;;  'material
  ;;  `(rainbow-delimiters-depth-1-face ((t
  ;;      (:foreground ,"aquamarine"))))
  ;;  )
  )
;; ** use-package cider:
(use-package cider
  :defer t
  :ensure t
  :after clojure-mode
  :config
  ;; (set-lookup-handlers! 'cider-mode nil) ; doom option 
  ;; (setq lsp-enable-completion-at-point nil) ; use cider completion
  (setq cider-eldoc-display-for-symbol-at-point nil) ; disable cider showing eldoc during symbol at point
  )

;; ** clj-refactor
(use-package clj-refactor
  :defer t
  :ensure t
  :after clojure-mode
  :config
  ;; (set-lookup-handlers! 'clj-refactor-mode nil) ; doom option 
  (setq cljr-add-ns-to-blank-clj-files nil) ; disable clj-refactor adding ns to blank files
  )
;; ** Leiningen

;; ** --------------------------------------
;; * LSP-MODE CUSTOMIZATION
;; --------------------------------------
;; ** use-package lsp-mode:
(use-package lsp-mode
  :defer t
  :ensure t
  :init
  ;; set prefix for lsp-command-keymap (few alternatives - "C-l", "C-c l")
  (setq lsp-keymap-prefix "C-c l")
  :hook
  (;; replace XXX-mode with concrete major-mode(e. g. python-mode)
    (clojure-mode-hook . lsp)
    (clojurescript-mode-hook . lsp)
    (clojurec-mode-hook . lsp)
    ;; (XXX-mode . lsp)
    ;; if you want which-key integration
    (lsp-mode . lsp-enable-which-key-integration))
  :commands lsp
  :config
  (setq gc-cons-threshold (* 100 1024 1024)
        read-process-output-max (* 1024 1024)
        treemacs-space-between-root-nodes nil
        company-minimum-prefix-length 1)
  )

;; ** use-package lsp-ui:
(use-package lsp-ui
  :defer t
  :ensure t
  :commands lsp-ui-mode)
;; ;; if you are helm user
;; (use-package helm-lsp :commands helm-lsp-workspace-symbol)
;; if you are ivy user
;; ** use-package lsp-ivy:
(use-package lsp-ivy
  :defer t
  :ensure t
  :commands lsp-ivy-workspace-symbol)
;; ** lsp-treemacs:
(use-package lsp-treemacs
  :disabled
  :defer t
  :ensure t
  :commands lsp-treemacs-errors-list)

;; ** --------------------------------------
;; * use-package dap-mode:
;; optionally if you want to use debugger
;; (use-package dap-mode)


;; (use-package dap-LANGUAGE) to load the dap adapter for your language
;; ** --------------------------------------
#+end_src

*** –∫–∞–∫–∏–µ –∏–¥–µ–∏?

*** 

*** 
–î–∞ —ç—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, –Ω–æ —ç—Ç–æ –ø–æ–ª–æ–≥–∞—é –æ—à–∏–±–∫–∞\—Å–∏–ø—Ç–æ–º, –∞ –Ω–µ—Å–∞–º–∞ –ø—Ä–∏—á–∏–Ω–∞ 
:results output silent
–ø–æ—Å–∫–æ–ª—å–∫—É —Ä–∞–Ω—å—à–µ —Ç–æ–≥–æ–≤–æ –Ω–µ –±—ã–ª–æ –º–Ω–µ –∫–∞–∂–µ—Ç —ç—Ç–æ –ø–æ—è–≤–∏–ª–æ—Å—å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –µ–º–∞–∫—Å–∞
–∏ –Ω–µ—Ç —Ç—ã –Ω–µ –ø—Ä–∞–≤–ª–∞ :results silent
–∏ :results none
–Ω–µ –ø–æ–º–∞–≥–∞–µ—Ç –∏ —Å—Ç—Ä–æ–∫–∏ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
–≤–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –±–æ–ª–µ–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—à–∏–±–∫–∞
*** —Ä–∞–∑–æ–±—Ä–∞—Ç—Å—è —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —à–µ–ª –±–ª–æ–∫–∞
–º–æ–∂–µ—Ç —ç—Ç–æ –æ—à–∏–±–∫–∞ —Å –≤—è–∑–∞–Ω–∞ —Å –¥—Ä—É–≥–æ–π
–µ—Å–ª–∏ —É–º–µ–Ω—è –±–ª–æ–∫ –Ω–∞–∑–≤–∞—Ç—å sh –∏ cmd –∏–ª–∏ eshell
—Ç–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
–±—É–¥—Ç–æ —Ç—É–¥–∞ –ø–æ—Å–ª–∞–ª–∏ —ç–Ω—Ç–µ—Ä
eshell
—Ç–æ–µ—Å—Ç—å –æ–Ω —ç—Ç–æ –ø—Ä–∏–≤—Ä–∞—Ç–∏—Ç
#+begin_src eshell
#+end_src
–≤ —ç—Ç–æ
#+begin_src eshell

Welcome to the Emacs shell

~/Dev/ClojureScript/tutorials/my-cljs-project $ 

#+end_src
–∫–∞–∫ –±—É–¥—Ç–æ —ç—Ç–æ –Ω–µ —à–µ–ª–ª –±–ª–æ–∫ –∞ —Ç–µ—Ä–º–µ–Ω–∞–ª
–ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ

#+begin_src eshell


Welcome to the Emacs shell

~/Dev/ClojureScript/tutorials/my-cljs-project $ 

Welcome to the Emacs shell

~/Dev/ClojureScript/tutorials/my-cljs-project $ 
#+end_src

** DONE —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –æ—Ä–≥–µ
** DONE –ø–æ–ø—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å
** DONE –ø–æ–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É
–ü–æ–º–æ–≥–∏ –ø–æ—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É
*** clojure -M:fig:build

[Figwheel] Validating figwheel-main.edn
[Figwheel] figwheel-main.edn is valid \(„ÉÑ)/
[Figwheel] Compiling build dev to "target/public/cljs-out/dev-main.js"
[Figwheel] Failed to compile build dev in 1.394 seconds.
[Figwheel:WARNING] Compile Exception   src/learn_cljs/chat/message_bus.cljs   line:2  column:14

  No such namespace: cljs.core.async, could not locate cljs/core/async.cljs, cljs/core/async.cljc, or JavaScript source providing "cljs.core.async" in file src/learn_cljs/chat/message_bus.cljs

  1  (ns learn-cljs.chat.message-bus
  2    (:require [cljs.core.async :refer [go-loop pub sub chan <! put!]]))
                  ^---
  3  
  4  (def msg-ch (chan 1))                                      ;; <1>
  5  (def msg-bus (pub msg-ch ::type))                          ;; <2>
  6  
  7  (defn dispatch!                                            ;; <3>

[Figwheel:SEVERE] failed compiling file:src/learn_cljs/chat/message_bus.cljs
[Figwheel] Starting Server at http://localhost:9500
[Figwheel] Starting REPL
Prompt will show when REPL connects to evaluation environment (i.e. a REPL hosting webpage)
Figwheel Main Controls:
          (figwheel.main/stop-builds id ...)  ;; stops Figwheel autobuilder for ids
          (figwheel.main/start-builds id ...) ;; starts autobuilder focused on ids
          (figwheel.main/reset)               ;; stops, cleans, reloads config, and starts autobuilder
          (figwheel.main/build-once id ...)   ;; builds source one time
          (figwheel.main/clean id ...)        ;; deletes compiled cljs target files
          (figwheel.main/status)              ;; displays current state of system
Figwheel REPL Controls:
          (figwheel.repl/conns)               ;; displays the current connections
          (figwheel.repl/focus session-name)  ;; choose which session name to focus on
In the cljs.user ns, controls can be called without ns ie. (conns) instead of (figwheel.repl/conns)
    Docs: (doc function-name-here)
    Exit: :cljs/quit
 Results: Stored in vars *1, *2, *3, *e holds last exception object
WARNING: A restricted method in java.lang.System has been called
WARNING: java.lang.System::loadLibrary has been called by org.fusesource.hawtjni.runtime.Library in an unnamed module (file:/home/buyn/.m2/repository/org/fusesource/jansi/jansi/1.16/jansi-1.16.jar)
WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
WARNING: Restricted methods will be blocked in a future release unless native access is enabled

[Rebel readline] Type :repl/help for online help info
Opening URL http://localhost:9500
~/Dev/ClojureScript/tutorials/my-cljs-project/group-chat [130] $ 
clojure -M:fig:build

[Figwheel] Validating figwheel-main.edn
[Figwheel] figwheel-main.edn is valid \(„ÉÑ)/
[Figwheel] Compiling build dev to "target/public/cljs-out/dev-main.js"
[Figwheel] Failed to compile build dev in 1.374 seconds.
[Figwheel:WARNING] Compile Exception   src/learn_cljs/chat/message_bus.cljs   line:2  column:14

  No such namespace: cljs.core.async, could not locate cljs/core/async.cljs, cljs/core/async.cljc, or JavaScript source providing "cljs.core.async" in file src/learn_cljs/chat/message_bus.cljs

  1  (ns learn-cljs.chat.message-bus
  2    (:require [cljs.core.async :refer [go-loop pub sub chan <! put!]]))
                  ^---
  3  
  4  (def msg-ch (chan 1))                                      ;; <1>
  5  (def msg-bus (pub msg-ch ::type))                          ;; <2>
  6  
  7  (defn dispatch!                                            ;; <3>

[Figwheel:SEVERE] failed compiling file:src/learn_cljs/chat/message_bus.cljs
[Figwheel] Starting Server at http://localhost:9500
[Figwheel] Starting REPL
Prompt will show when REPL connects to evaluation environment (i.e. a REPL hosting webpage)
Figwheel Main Controls:
          (figwheel.main/stop-builds id ...)  ;; stops Figwheel autobuilder for ids
          (figwheel.main/start-builds id ...) ;; starts autobuilder focused on ids
          (figwheel.main/reset)               ;; stops, cleans, reloads config, and starts autobuilder
          (figwheel.main/build-once id ...)   ;; builds source one time
          (figwheel.main/clean id ...)        ;; deletes compiled cljs target files
          (figwheel.main/status)              ;; displays current state of system
Figwheel REPL Controls:
          (figwheel.repl/conns)               ;; displays the current connections
          (figwheel.repl/focus session-name)  ;; choose which session name to focus on
In the cljs.user ns, controls can be called without ns ie. (conns) instead of (figwheel.repl/conns)
    Docs: (doc function-name-here)
    Exit: :cljs/quit
 Results: Stored in vars *1, *2, *3, *e holds last exception object
WARNING: A restricted method in java.lang.System has been called
WARNING: java.lang.System::loadLibrary has been called by org.fusesource.hawtjni.runtime.Library in an unnamed module (file:/home/buyn/.m2/repository/org/fusesource/jansi/jansi/1.16/jansi-1.16.jar)
WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
WARNING: Restricted methods will be blocked in a future release unless native access is enabled

[Rebel readline] Type :repl/help for online help info
Opening URL http://localhost:9500
*** 
(find-file-other-frame "group-chat/deps.edn")
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/group-chat/deps.edn
*** src

#+begin_src clojure :no-expand t
{:deps {org.clojure/clojure {:mvn/version "1.12.0"}
        org.clojure/clojurescript {:mvn/version "1.11.132"}
        org.clojure/data.json {:mvn/version "2.5.1"}
        cljsjs/react {:mvn/version "18.3.1-1"}
        cljsjs/react-dom {:mvn/version "18.3.1-1"}
        org.clojure/core.async {:mvn/version "1.6.681"}
        reagent/reagent {:mvn/version "1.2.0" }}
 :paths ["src" "resources"]
 :aliases {:fig {:extra-deps
                 {com.bhauman/rebel-readline-cljs {:mvn/version "0.1.4"}
                  com.bhauman/figwheel-main {:mvn/version "0.2.20"}
                  org.slf4j/slf4j-nop {:mvn/version "2.0.16"}}
                 :extra-paths ["target" "test"]}
           :build {:main-opts ["-m" "figwheel.main" "-b" "dev" "-r"]}
           :clean {:main-opts ["-m" "figwheel.main" "--clean" "dev"]}
           :min   {:main-opts ["-m" "figwheel.main" "-O" "advanced" "-bo" "dev"]}
           :test  {:main-opts ["-m" "figwheel.main" "-co" "test.cljs.edn" "-m" "learn-cljs.test-runner"]}}}
#+end_src
** DONE –≤–Ω–µ—Å—Ç–∏ –ø–µ—Ä–≤—ã–µ –∏–∑–º–µ–Ω–∏–µ
[[https://www.learn-clojurescript.com/section-4/lesson-26-capstone-4-group-chat/][Capstone 4 - Group Chat | Lesson 26 | Learn ClojureScript]]
** CANCELED —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—á—É—é –≤–µ—Ä—Å–∏—é
[[https://www.learn-clojurescript.com/section-4/lesson-26-capstone-4-group-chat/][Capstone 4 - Group Chat | Lesson 26 | Learn ClojureScript]]
** CANCELED —Å–¥–µ–ª–∞—Ç—å –æ–∫–∞–Ω—á–∞—Ç–µ–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
[[https://www.learn-clojurescript.com/section-4/lesson-26-capstone-4-group-chat/][Capstone 4 - Group Chat | Lesson 26 | Learn ClojureScript]]
** DONE –ø–æ–Ω—è—Ç—å –≤ —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞
–æ—Ç–∫—Ä—ã—Ç—å –≤ –¥–≤—É—Ö rangers
** DONE –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∏–∑ –∫–Ω–∏–≥–∏
CLOSED: [2025-05-01 Thu 19:05]
—Ç–æ–µ—Å—Ç—å –º–∑ –ø–∞–ø–∫–º –∫–Ω–∏–≥–∏–∏
** DONE –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–ø–ª
CLOSED: [2025-05-01 Thu 19:05]
** DONE add line for open console
CLOSED: [2024-08-14 Wed 09:18]
to projet root
** DONE eshell package for send rigeon to eshell
CLOSED: [2025-04-30 Wed 21:31]
** DONE auto save bookmarks
CLOSED: [2025-04-30 Wed 21:31]
** DONE geting error
CLOSED: [2024-08-18 Sun 11:11]
~/Dev/ClojureScript/tutorials/my-cljs-project $  clj -m cljs.main --compile my-cljs-project.core --repl
Please install rlwrap for command editing or use "clojure" instead.

** CANCELED semantic‚Äëui‚Äëreagent 
https://react.semantic-ui.com/
https://github.com/toyokumo/semantic-ui-reagent

** DONE –ø–æ–Ω—è—Ç—å –∫–∞–∫–æ–π –ø—Ä–æ–µk—Ç —Ç–µ–º–ø–ª–∞—Ç –≤–∑—è—Ç—å –∑–∞ –æ—Å–Ω–æ–≤—É
*** 01
clj -X:new :template figwheel-main :name learn-cljs/notes :args '["+deps" "--reagent"]'
clj -X:new :template figwheel-main :name freeman/tolk :args '["+deps" "--reagent"]'
clj -X:new :template re-frame :name freeman/tolk :args '["+deps" "+re-com" "+10x"]'

clj -Tnew create :template figwheel-main :name freeman/tolk :args '["--reagent"]'

clj -X:new :template figwheel-main :name freeman/tolk :args '["+deps" "--reagent" "+re-com" "+10x"]'

deps.edn:
{:paths ["src" "resources"]
 :deps {org.clojure/clojurescript {:mvn/version "1.11.132"}
        reagent/reagent {:mvn/version "1.2.0"}
        re-frame/re-frame {:mvn/version "1.4.3"}
        re-com/re-com {:mvn/version "2.13.2"}
        day8.re-frame/tracing {:mvn/version "0.6.2"}}
 :aliases
 {:fig {:extra-deps {com.bhauman/figwheel-main {:mvn/version "0.2.18"}
                     com.bhauman/rebel-readline-cljs {:mvn/version "0.1.4"}}
        :main-opts ["-m" "figwheel.main" "-b" "dev" "-r"]}}}


–ò —Å–æ–∑–¥–∞–π dev.cljs.edn:
{:main freeman.tolk.core
 :output-to "resources/public/js/app.js"
 :output-dir "resources/public/js/out"
 :asset-path "js/out"
 :preloads [day8.re-frame-10x.preload]
 :infer-externs true}
*** figwheel-main

2. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è –±–∞–∑–∞ ‚Äî figwheel-main template

–®–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—Å—Ç —Ç–µ–±–µ —á–∏—Å—Ç—ã–π, deps.edn-–ø—Ä–æ–µ–∫—Ç —Å Figwheel –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–∏—Ç—å re-frame –≤—Ä—É—á–Ω—É—é:

clj -Tnew create :template figwheel-main :name freeman/tolk :args '["--reagent"]'


‚ö° --reagent —É–∂–µ —Å–æ–∑–¥–∞—ë—Ç —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ —Å Reagent-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –∏ hot-reload —á–µ—Ä–µ–∑ Figwheel.
–û—Ç—Å—é–¥–∞ —Ç—ã –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—à—å re-frame + re-com –≤—Ä—É—á–Ω—É—é, –±–µ–∑ —Ç–µ–Ω–µ–π —à–∞–±–ª–æ–Ω–∞.

üß© 3. –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é

–í deps.edn:

{:paths ["src" "resources"]
 :deps {org.clojure/clojurescript {:mvn/version "1.11.132"}
        reagent/reagent           {:mvn/version "1.2.0"}
        re-frame/re-frame         {:mvn/version "1.4.3"}
        re-com/re-com             {:mvn/version "2.13.2"}
        com.bhauman/figwheel-main {:mvn/version "0.2.18"}
        com.bhauman/rebel-readline-cljs {:mvn/version "0.1.4"}}
 :aliases
 {:dev {:main-opts ["-m" "figwheel.main" "--build" "dev" "--repl"]}}}

üîß 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Figwheel

–°–æ–∑–¥–∞–π dev.cljs.edn:

^{:auto-bundle :webpack
  :watch-dirs ["src"]
  :css-dirs ["resources/public/css"]}
{:main freeman.tolk.core}

üå± 5. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π src/freeman/tolk/core.cljs
(ns freeman.tolk.core
  (:require [reagent.dom :as rdom]
            [re-frame.core :as rf]
            [re-com.core :as rc]))

;; --- –†–µ-—Ñ—Ä–µ–π–º –±–∞–∑–∞ ---
(rf/reg-event-db
 :initialize
 (fn [_ _]
   {:count 0}))

(rf/reg-sub
 :count
 (fn [db _] (:count db)))

(rf/reg-event-db
 :inc
 (fn [db _] (update db :count inc)))

(defn counter []
  [rc/v-box
   :children [[rc/label :label "Book counter"]
              [rc/button :label "Add Book"
                         :on-click #(rf/dispatch [:inc])]
              [rc/label :label @(rf/subscribe [:count])]]])

(defn mount-root []
  (rf/dispatch-sync [:initialize])
  (rdom/render [counter] (js/document.getElementById "app")))

(defn ^:after-load reload [] (mount-root))

(defn ^:export init [] (mount-root))

üöÄ 6. –ó–∞–ø—É—Å–∫
clj -M:dev


Figwheel –ø–æ–¥–Ω–∏–º–µ—Ç REPL, –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä –∏ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å hot reload.
–¢—ã —É–∂–µ —Å–º–æ–∂–µ—à—å –ø—Ä–∞–≤–∏—Ç—å UI –∏ –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ ‚ö°

üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

–ï—Å–ª–∏ —Ç—ã –≤—Å—ë –∂–µ —Ö–æ—á–µ—à—å —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å re-frame, –º–æ–∂–Ω–æ –≤–∑—è—Ç—å Day8/re-frame-template
 –∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å deps.edn, –Ω–æ —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ ¬´—Ö–∞–∫–µ—Ä—Å–∫–∏¬ª (–æ–Ω –≤—Å—ë –µ—â—ë –±–æ–ª—å—à–µ –ø–æ–¥ Lein).
–¢–∞–∫ —á—Ç–æ –¥–ª—è –ª—ë–≥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ ‚Äî Figwheel + deps.edn + —Ä—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ re-frame ‚Äî —ç—Ç–æ —á–∏—Å—Ç–æ, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –∏ –ø–æ–¥ –ø–æ–ª–Ω—ã–º —Ç–≤–æ–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.

–•–æ—á–µ—à—å, —è —Å–æ–±–µ—Ä—É —Ç–µ–±–µ –≥–æ—Ç–æ–≤—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π zip-—à–∞–±–ª–æ–Ω (—Å–æ –≤—Å–µ–º–∏ —ç—Ç–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏, deps.edn –∏ html), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∏ clj -M:dev ‚Äî –≤—Å—ë –≤–∑–ª–µ—Ç–∏—Ç?
*** +firebase +keechma
(setq cider-cljs-lein-repl "(do (use 'figwheel-sidecar.repl-api) (start-figwheel!) (cljs-repl))")

 Reagent-figwheel: client-side template with lots of options (cider, devcards, firebase, petrol, keechma, etc.)

 
To add a profile to the base template, just append the profile name (let's use +routes as an example):

lein new reagent-figwheel <project-name> +routes

Any combinations of profiles can be added at once, for example:

lein new reagent-figwheel <project-name> +cider +test +garden +less +routes +re-frisk


https://github.com/gadfly361/reagent-figwheel/blob/master/README.md

Reagent-figwheel is a client-side, leiningen template for reagent + figwheel. The available profiles include:

CSS: +garden (Generate CSS with Clojure) +less (Less css compiler plugin for the leiningen (clojure) build tool)

Development: +test (doo is a library and lein plugin to run cljs.test on different js environments.) +devcards (Devcards aims to provide a visual REPL experience for ClojureScript)

Editor: +cider (The Clojure Interactive Development Environment that Rocks for Emacs)

Persistence: +firebase (Matchbox, a Firebase client for Clojure(Script))

Routing: +routes (Secretary, a client-side router for ClojureScript.)

Frameworks: +petrol (A simple event-handling framework for ClojureScript projects.) +keechma (Micro frontend framework for ClojureScript and Reagent)

Q: How is this different than reagent-template? A: Reagent-template is fantastic, production ready, and should be used too! However, reagent-template is a little heavy and includes clojure as a backend. Reagent-figwheel focuses on being light-weight by default, and is only client-side.

Q: Why don't you have re-frame? A: I recommend using re-frame-template instead (https://github.com/Day8/re-frame-template)

** 
** DONE [[file:noter/noter-cljs-project.org::*–Ω–∞—á–∞—Ç—å –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–∏—è –ø–æ –∫–Ω–∏–≥–µ][–Ω–∞—á–∞—Ç—å –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–∏—è –ø–æ –∫–Ω–∏–≥–µ]]
** DONE [[file:noter/noter-cljs-project.org::*–ø–æ—ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –∫–∞–Ω–∞–ª–∞–º–∏][–ø–æ—ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –∫–∞–Ω–∞–ª–∞–º–∏]]
** DONE [[file:noter/noter-cljs-project.org::*–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–æ–±—Ä–∞–Ω–æ–µ][–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–æ–±—Ä–∞–Ω–æ–µ]]
** DONE Keechma
*** to


https://keechma.com/guides/application-walkthrough/

https://github.com/keechma/keechma
https://keechma.com/api/index.html



*** done
https://keechma.com/guides/introduction/

https://keechma.com/guides/
https://keechma.com/guides/ui-system/
https://keechma.com/guides/gluing/
https://keechma.com/guides/entitydb/
https://keechma.com/guides/controllers/
https://keechma.com/guides/router/
* project comands
:PROPERTIES:
:header-args: :tangle no
:END:
** save –±—É—Ñ–µ—Ä —Ñ—Ä–µ–π–º—ã –ø—Ä–æ–µ–∫—Ç–∞
#+begin_src emacs-lisp  :results output silent
(use-package burly
 :ensure t
 ;; :config
  )
;; (burly-bookmark-frames "weather buffers")
(bookmark-save nil "/home/buyn/temp/bookmarks")
(burly-bookmark-frames "buffers LAST SAVE")
(bookmark-save nil "/home/buyn/temp/bookmarks")
#+end_src
** save –±—É—Ñ–µ—Ä —Ñ—Ä–µ–π–º—ã clojure
#+begin_src emacs-lisp  :results output silent
(use-package burly
 :ensure t
 ;; :config
  )
;; (burly-bookmark-frames "weather buffers")
(bookmark-save nil "/home/buyn/temp/bookmarks")
(burly-bookmark-frames "buffers clojure")
(bookmark-save nil "/home/buyn/temp/bookmarks")
#+end_src
** new project
clj -X:new :template figwheel-main :name learn-cljs/weather :args '["+deps" "--reagent"]'
$ clj -X:new :template figwheel-main :name learn-cljs/weather :args 
** run console in org root
clj -M:dev
clojure -m cljs.main --compile my-cljs-project.core --repl
#+begin_src elisp :results output silent
(buyn-shell-start "konsole")
(evil-previous-line)
(org-cycle)
(delete-other-windows)
#+end_src

** repl
*** run eshell in org root
clj -M:dev
clojure -m cljs.main --compile my-cljs-project.core --repl
#+begin_src elisp :results output silent
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
        (evil-window-split)
        (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src

      ;; (execute-kbd-macro "A \C-m")
*** run repl
clj -M:dev
clojure -m cljs.main --compile my-cljs-project.core --repl
:cljs/quit
:cljs/restart
#+begin_src eshell
clj -m cljs.main --compile my-cljs-project.core --repl


#+end_src

#+RESULTS:
*** repl commands
:cljs/quit

** cider
If you have a Clojure project in your file system and want CIDER to launch an nREPL session for it, simply visit a file that belongs to the project, and type M-x cider-jack-in RET.[1] CIDER will start an nREPL server and automatically connect to it.
  In Clojure(Script) buffers the command cider-jack-in is bound to C-c C-x (C-)j (C-)j. 

** run console with command
#+begin_src elisp :results output silent
(buyn-shell-start "konsole -e /bin/bash --rcfile <(clj -M:dev)")
(evil-previous-line)
(org-cycle)
(delete-other-windows)
#+end_src

* docs all in brain
** all in brain
[[file:~/Dropbox/orgs/org-Brain/ClojureScript Idioms.org]]
[[file:~/Dropbox/orgs/org-Brain/ClojureScript Idioms.org::*link to turials][link to turials]]

** link to turials
*** stoped
(eww-of "https://www.learn-clojurescript.com/")

 * Capstone 3 - Contact Book
(eww-of "https://www.learn-clojurescript.com/section-3/lesson-20-capstone-3-contact-book/")
*** content
(eww-of "https://www.learn-clojurescript.com/")
*** git
(eww-of "https://github.com/kendru/learn-cljs")
https://github.com/kendru/learn-cljs

https://github.com/kendru/learn-cljs.git

https://github.com/kendru/learn-cljs/blob/main/code/lesson-8/weather/resources/public/css/style.css


/home/buyn/Dev/ClojureScript/tutorials/learn-cljs
*** fers src and new gen
(eww-of "https://www.learn-clojurescript.com/section-1/lesson-5-bootstrapping-a-clojurescript-project/")
*** debt
**** —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
 * Capstone 2 - Temperature Converter
(eww-of "https://www.learn-clojurescript.com/section-2/lesson-15-capstone-temperature-converter/")
**** Fix: error in contact app
https://www.learn-clojurescript.com/section-3/lesson-20-capstone-3-contact-book/
[[*contacts][contacts]]
** docs links
https://clojuredocs.org/clojure.string/split#examples
https://cljs.info/cheatsheet/
** manuals
*** seting up
yay -Sy clojure rlwrap leiningen

yay -S clojure rlwrap leiningen



Optional dependencies for clojure
    leiningen: automate clojure projects
    rlwrap: friendly shell with readline support

*** info from new page
Welcome to the ClojureScript browser REPL.

This page hosts your REPL and application evaluation environment. Validate the connection by typing (js/alert "Hello CLJS!") in the REPL.

To provide your own custom page, place an index.html file in the REPL launch directory, starting with this template:

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
  </head>
  <body>
    <script src="out/main.js" type="text/javascript"></script>
  </body>
</html>
*** cheatsheet
(eww-of "https://cljs.info/cheatsheet/")

(eww-of "https://kanaka.github.io/clojurescript/web/synonym.html")
https://cljs.info/cheatsheet/

https://kanaka.github.io/clojurescript/web/synonym.html

*** new project
–ø—Ä–∏–∑–∞–ø—É—Å–∫–µ –∏–∑ –∫–æ—Ä–Ω–µ–≤–µ–∫–∞ –ø—É—Ç—å —ç—Ç–æ —á—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–µ–µ –æ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ –ø—É—Ç—å –≤ —Å–æ—Ä—Å –ø—Ä–æ–µ–∫—Ç–∞ –∫ –∫–æ—Ä–Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø—Ä–æ–µ—Ç—Å –∫–æ–Ω–µ–Ω—ã–º –∏–º–µ–Ω–µ. –∫–æ—Ä–æ—á–µ –∑–∞–ø—É—Å–∫–∞–π –∏–∑ –∫—Ä–Ω—è—Ç- –Ω–µ–±–∑–¥–∏ –∏ –Ω–µ —É–º–Ω—è—á–∞–π–π,–≤—Å—ë –±—É–¥–µ—Ç —Ä–æ–∫–µ–Ω—Ä–æ–ª. –í –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–∫–∞–∑–Ω–æ —á—Ç–æ –ø—Ä–æ –Ω–µ–π–º—Å–ø–µ–π—Å –∞ –Ω–µ –ø—É—Ç—å –ø–∞–ø–æ–∫
clj -X:new :template figwheel-main :name learn-cljs/weather :args '["+deps" "--reagent"]'
**** explane
Since this command includes some unfamiliar syntax, let‚Äôs take a
moment to dissect it. As we just learned, the first part of the
command, clj -X:new, invokes the clj-new/create function, and
the remainder of the arguments are passed to this function. We use
Clojure keyword syntax to pass :template, :name, and :args
options. :template unsurprisingly specifies the name of the
template to use, :name is the name of the project to create, and :
args are additional arguments that the figwheel-main template
will interpret. Since figwheel-main is not a built-in template, clj-new
will fetch the template from Clojure‚Äôs central repository, Clojars.

We need to understand a bit of convention in order to make sense
of the structure of the generated project. Most Clojure and
ClojureScript projects use a namespace-qualified package name to
reduce the likelihood of naming conflicts between projects that are
pushed to a central registry. The namespace is the portion before
the forward slash and is commonly the GitHub username of the
developer or the reverse domain name of the organization that
owns the code, although it can be anything you like. For this book,
we will use learn-cljs as the namespace for all of our projects.1

Project Namespace and Name 

Project Namespace and Name

The final argument is a bit odd-looking: :args '["+deps"
"--reagent"]'. This passes a vector of strings as arguments to the
figwheel-main template. The exact arguments supported vary from
template to template, but Figwheel uses these to configure
optional extensions to the base template. In our case, we are
specifying that we want to use a deps.edn file to manage
dependencies, and we want to include the Reagent web framework.
*** help from fresh figwheel-main project
Generating fresh figwheel-main project.
  To get started:
  -->  Change into the 'weather' directory
  -->  Start build with 'clojure -M:fig:build'
*** figwheel readme.md alert
To get an interactive development environment run:

    clojure -A:fig:build

This will auto compile and send all changes to the browser without the
need to reload. After the compilation process is complete, you will
get a Browser Connected REPL. An easy way to try it is:

    (js/alert "Am I connected?")

and you should see an alert in the browser window.

To clean all compiled files:

    rm -rf target/public

To create a production build run:

  rm -rf target/public
  clojure -A:fig:min
*** --serve flag
You can test that this file still works by running the built in simple
web server via the --serve flag:

clj -M -m cljs.main --serve

*** repl help
In the cljs.user ns, controls can be called without ns ie. (conns) instead of (figwheel.repl/conns)
    Docs: (doc function-name-here)
    Exit: :cljs/quit
 Results: Stored in vars *1, *2, *3, *e holds last exception object
[Rebel readline] Type :repl/help for online help info
*** able to open files in your editor
 ;; To be able to open files in your editor from the heads up display
 ;; you will need to put a script on your path. This script will have
 ;; to take a file path and a line number ie.
 ;; in ~/bin/myfile-opener:
 ;;
 ;; #! /bin/sh
 ;; emacsclient -n +$2:$3 $1
 ;;
 ;; :open-file-command "myfile-opener"
 
 ;; if you are using emacsclient you can just use
 ;; :open-file-command "emacsclient"

 ;; Logging output gets printed to the REPL, if you want to redirect it to a file:
 ;; :log-file "figwheel-main.log"
*** creat project structure
mkdir hello_seymore
cd hello_seymore
touch project.clj
touch index.html
mkdir -p src/hello_seymore
touch src/hello_seymore/core.cljs

** clojure
*** ns
**** exampls
(ns learn-cljs.import-fns
    (:require learn-cljs.import-fns.ui                     ;; <1>
              [learn-cljs.import-fns.format                ;; <2>
               :refer [pluralize]]
              [learn-cljs.import-fns.inventory             ;; <3>
               :as inventory]
              [goog.dom :refer [getElement]                ;; <4>
                        :rename {getElement get-element}]))

1 Require the entire learn-cljs.import-fns.ui namespace
2 Require a single function from the
 learn-cljs.import-fns.format namespace
3 Require the learn-cljs.import-fns.inventory namespace with
 the alias inventory
4 Require a single function from the Google Closure Library
 namespace, renaming that function
**** Form 2: Refer

In the second case, we follow the namespace by :refer
[pluralize]. :refer will make every var that is listed in the vector
that follows available without any prefix. Thus, we can write
(pluralize item) instead of
(learn-cljs.import-fns.format/pluralize item). Any function
in the learn-cljs.import-fns.format namespace can still be
called using the fully-qualified syntax.
**** Form 3: Aliased Namespace

In the third case, we alias the namespace that we require using :as.
This works similar to the first case in that we are able to refer to any
public var in the namespace. However, we can use the symbol that
we specified after :as instead of the full namespace. Thus,
learn-cljs.import-fns.inventory/make-inventory becomes
inventory/make-inventory. The use of :as can be very useful when
requiring from namespaces with very verbose names. In general, we
should also prefer :as to :refer, since it makes it clear where a var
that we reference comes from without needing to look back at the
namespace declaration.
**** Form 4: Aliased Vars

Finally, in the fourth case, we rename a specific var that we referred.
Here, we alias the getElement function from the Google Closure
Library‚Äôs goog.dom module in order to give it a more idiomatic
kebab-case name. In practice, renaming is used more often to
prevent a name collision. For example, we may want to import
functions called mark-inactive from both my-app.users and
my-app.customers namespaces. We can use :rename to import them
as mark-user-inactive and mark-customer-inactive.
**** table
  Require Form  Description  Function Usage    
  my.namespace  require entire  my.namespace/compute    
    namespace      
  my.namespace  require specific  compute    
  :refer [compute  functions and refer to      
  other-fn]  them unqualified      
  my.namespace :as  require namespace  mine/compute    
  mine  with alias      
  my.namespace  require namespace  calculate    
  :refer [compute]  with specific vars      
  :rename {compute  aliased      
  calculate}        
**** Importing Google Closure Library Classes
(ns my-ns
  (:import [goog.math Coordinate Rect]))

(.contains (Rect. 10 50 5 5)
           (Coordinate. 12 50))

The thing to remember about :import is that it is only used for
requiring classes (including enums) from Google Closure modules -
never for including a ClojureScript namespace or a
(non-constructor) function from a Google Closure module.
**** Requiring Macros
(:require-macros [macro-ns :as macros])
**** private function
(defn- add-quantity [inventory-item qty]                   ;; <3>
  (update-in inventory-item [:qty]
    (fn [current-qty] (+ current-qty qty))))

3 Use defn- to declare a private function
**** Namespaces and the REPL
***** :reload
dev:cljs.user=> (require '[learn-cljs.import-fns.format :as fmt] :reload)
nil
dev:cljs.user=> (fmt/pluralize "burrito")
"burritos"
***** in-ns
dev:cljs.user=> (in-ns 'import-fns.format)

dev:import-fns.format=> (replace-suffix "programmer" "er" "ing")
"programming"

*** cond
**** condp
(condp
  =                                                        ;; <1>
  answer                                                   ;; <2>
  "restart" (prompt game :start)                           ;; <3>
  "help" (show-help game current)
  "save" (save-state current)
  "easter-egg" (rickroll)
  (next-state game current answer))                        ;; <4>
[[https://www.learn-clojurescript.com/section-2/lesson-10-making-choices/][Making Choices | Lesson 10 | Learn ClojureScript]]
**** if
(if test-expr then-expr else-expr)

(def account-status
  (if (< (:balance account) low-balance-threshold)         ;; <1>
    :low-balance                                           ;; <2>
    :ok))                                                  ;; <3>
**** if-let
(defn make-contact [contact]
  (let [clean-contact (select-keys contact [:first-name :last-name :email])]
    (if-let [address (:address contact)]
      (assoc clean-contact :address (make-address address))
      clean-contact)))
**** when
(defn conversion-rate [sessions]                           ;; <1>
  (let [users (user-count sessions)
        purchases (purchase-count sessions)]
    (when (> users 0)                                      ;; <2>
      (/ purchases users))))

1 Define a function that gets the ratio of purchases to users
2 Use when to prevent division by zero

(when (< 499 (:status response))
  (show-error-notification (:body response)))
**** case

(defn flip [d a]
  (sort (case d
              \R <
              \L >)
        a))
*** pred
**** < 
(< (:balance account) low-balance-threshold)
**** some
;; Does the player have the potion of wisdom in their inventory?
(some #(= (:name %) "Potion of Wisdom")
      (get-inventory player))
**** even?
(if (even? 10) "Even" "Odd")
;; "Even"                                                  ;; <2>
**** every?
(fn [xs test-elems]                                        ;; <1>
  (println "Checking whether" xs                           ;; <2>
           "contains each of" test-elems)
  (let [xs-set (into #{} xs)]                              ;; <3>
    (every? xs-set test-elems)))
**** empty?
(defn add-all [xs]
  (loop [sum 0                                             ;; <1>
         nums xs]
    (if (empty? nums)                                      ;; <2>
      sum
      (recur (+ sum (first nums))
             (rest nums)))))                               ;; <3>

             
(when (not (empty? value)) value)))
**** contains?

cljs.user=> (contains? badges :night-owl)                  ;; <2>
*** loop
**** for
***** tut
In its most basic form, for takes any number of sequences and a
body, and it yields a new sequence by evaluating the body for every
combination of sequence elements:

(for [elem1 sequence1                                      ;; <1>
      elem2 sequence2]                                     ;; <2>
  expr)                                                    ;; <3>

  
(for [n (range 10)]                                        ;; <1>
  (* n n))                                                 ;; <2>

(require [clojure.math :as math])
(require '[clojure.math :as math])
(require '[clojure.math :as Math])
(let [sides-list (list [4.2 6] [4 4] [3 4] [5.5 3])]       ;; <1>
  (for [sides sides-list]                                  ;; <2>
    (Math/sqrt (+ (Math/pow (first sides) 2)               ;; <3>
                  (Math/pow (second sides) 2)))))
                                                           ;; <4>
;; (7.323933369440222 5.656854249492381 5 6.264982043070834)
***** forms
(for [n (range 100)                                        ;; <1>
      :let [square (* n n)]                                ;; <2>
      :when (even? n)                                      ;; <3>
      :while (< n 20)]                                     ;; <4>
  (str "n is " n " and its square is " square))            ;; <5>

;; ("n is 0 and its square is 0"
;; "n is 2 and its square is 4"
;; "n is 4 and its square is 16"
;; ...
;; "n is 18 and its square is 324")

***** exp
#+begin_src clojure
(for [n (range 10)]                                        ;; <1>
  (* n n))                                                 ;; <2>
#+end_src

#+RESULTS:
: Please reevaluate when nREPL is connected

#+begin_src clojure
(let [sides-list (list [4.2 6] [4 4] [3 4] [5.5 3])
      hypo-list (for [sides sides-list]                           
                  (Math/sqrt (+ (Math/pow (first sides) 2)        
                                (Math/pow (second sides) 2))))]
      hypo-list)
#+end_src

#+begin_src clojure
(let [sides-list (list [4.2 6] [4 4] [3 4] [5.5 3])
      hypo-list (for [sides sides-list]                           
                  (Math/sqrt (+ (Math/pow (first sides) 2)        
                                (Math/pow (second sides) 2))))]
  (for [sides sides-list
        c hypo-list]
    (let [a (get sides 0)
          b (get sides 1)]
      [a b c]
      ;; [a b]
      )))
#+end_src

#+RESULTS:
| 4.2 | 6 | 7.323933369440222 |
| 4.2 | 6 | 5.656854249492381 |
| 4.2 | 6 |               5.0 |
| 4.2 | 6 | 6.264982043070834 |
|   4 | 4 | 7.323933369440222 |
|   4 | 4 | 5.656854249492381 |
|   4 | 4 |               5.0 |
|   4 | 4 | 6.264982043070834 |
|   3 | 4 | 7.323933369440222 |
|   3 | 4 | 5.656854249492381 |
|   3 | 4 |               5.0 |
|   3 | 4 | 6.264982043070834 |
| 5.5 | 3 | 7.323933369440222 |
| 5.5 | 3 | 5.656854249492381 |
| 5.5 | 3 |               5.0 |
| 5.5 | 3 | 6.264982043070834 |


#+begin_src clojure
(let [sides-list (list [4.2 6] [4 4] [3 4] [5.5 3])
      hypo-list (for [sides sides-list]                           
                  (Math/sqrt (+ (Math/pow (first sides) 2)        
                                (Math/pow (second sides) 2))))]
  (for [sides sides-list
        c     hypo-list
        :let [a (get sides 0)
              b (get sides 1)]]
      [a b c]))
#+end_src

#+RESULTS:
| 4.2 | 6 | 7.323933369440222 |
| 4.2 | 6 | 5.656854249492381 |
| 4.2 | 6 |               5.0 |
| 4.2 | 6 | 6.264982043070834 |
|   4 | 4 | 7.323933369440222 |
|   4 | 4 | 5.656854249492381 |
|   4 | 4 |               5.0 |
|   4 | 4 | 6.264982043070834 |
|   3 | 4 | 7.323933369440222 |
|   3 | 4 | 5.656854249492381 |
|   3 | 4 |               5.0 |
|   3 | 4 | 6.264982043070834 |
| 5.5 | 3 | 7.323933369440222 |
| 5.5 | 3 | 5.656854249492381 |
| 5.5 | 3 |               5.0 |
| 5.5 | 3 | 6.264982043070834 |

#+begin_src clojure
(let [sides-list (list [4.2 6] [4 4] [3 4] [5.5 3])]
  (for [sides sides-list
        :let [a (first sides)
              b (second sides)
              c (Math/sqrt (+ (Math/pow a 2) (Math/pow b 2)))]]                           
    [a b c]))
#+end_src

#+RESULTS:
| 4.2 | 6 | 7.323933369440222 |
|   4 | 4 | 5.656854249492381 |
|   3 | 4 |               5.0 |
| 5.5 | 3 | 6.264982043070834 |
**** loop recur
***** gcd
(defn gcd [x y]                                            ;; <1>
  (if (= y 0)
    x
    (gcd y (mod x y))))                                    ;; <2>
;; #'cljs.user/gcd
(gcd 90 60)                                                ;; <3>
;; 30



(defn gcd-loop [a b]
  (loop [x a                                               ;; <1>
         y b]
    (if (= y 0)
      x                                                    ;; <2>
      (recur y (mod x y)))))                               ;; <3>
;; #'cljs.user/gcd-loop
(gcd-loop 90 60)
;; 30
***** loop Dissected
(loop [name-1 init-value-1                                 ;; <1>
       name-2 init-value-2]
  body-exprs                                               ;; <2>
  (recur next-value-1 next-value-2))                       ;; <3>


1 Pass in any number of bindings along with their value for the first
 pass of the loop
2 Any number of body expressions
3 Optionally recur to the beginning of the loop, supplying the values
 for each binding during the next iteration

***** for
(loop [i 0
      numbers []]
 (if (= i 10)
   numbers
   (recur (inc i) (conj numbers i))))                      ;; <1>
;; [0 1 2 3 4 5 6 7 8 9]
**** dorun
(do (dorun                                                 ;; <1>
      (for [i (range 100)]
        (println i)))
    (println "Done"))
;; 0                                                       ;; <2>
;; 1
;; ...
;; 99
;; Done
;; nil

Forcing Evaluation of a Lazy Sequence

1 Wrap the for in dorun
2 All numbers are printed as expected
**** doseq
(defn send-to-api [user]                                   ;; <1>
  (println "Sending to API:" user))
;; #'cljs.user/send-to-api
(let [users [{:name "Alice"}
             {:name "Bob"}
             {:name "Carlos"}]]
  (doseq [user users]                                      ;; <2>
    (send-to-api user))
  (println "Done!"))
;; Sending to API: {:name Alice}                           ;; <3>
;; Sending to API: {:name Bob}
;; Sending to API: {:name Carlos}
;; Done!
;; nil

1 Stub the send-to-api function
2 Iterate through the users collection
3 Side effects are performed immediately
**** do
(do
    (gevents/listen (gdom/getElement "app") "click"
      (fn [e]
        (condp = (aget e "target" "id")
          "up"   (swap! app-state inc)
          "down" (swap! app-state dec))))

    (add-watch app-state :counter-observer                 ;; <3>
      (fn [key atom old-val new-val]
        (render new-val)))

    (render @app-state)

    true)
*** vars
**** def
(def my-name "Fred")                                       ;; <1>
;; #'cljs.user/my-name

my-name
;; "Fred"

(def ten 10)
;; #'cljs.user/ten

(def twenty (* ten 2))                                     ;; <4>
;; #'cljs.user/twenty

twenty
;; 20

ten                                                        ;; <5>
;; 10


(def x 7)                                                  ;; <1>
;; #'cljs.user/x

x                                                          ;; <2>
;; 7

'x                                                         ;; <3>
;; x

(defn doubler [x] (* 2 x))                                 ;; <4>
;; #'cljs.user/doubler

(doubler 3)
;; 6

y                                                          ;; <5>
;; WARNING: Use of undeclared Var cljs.user/y at line 1 <cljs repl>
;; nil
**** defn
(defn mk-global [value]
  (def i-am-global value))
;; #'cljs.user/mk-global

mk-global                                                  ;; <2>
;; #object[ ... ]

(mk-global [4 8 15 16 23 42])
;; #'cljs.user/i-am-global

i-am-global                                                ;; <3>
;; [4 8 15 16 23 42]
**** list
***** create
cljs.user=> (list 4 8 15 16 23 42)                         ;; <1>
(4 8 15 16 23 42)

cljs.user=> '(4 8 15 16 23 42)                             ;; <2>
(4 8 15 16 23 42)

cljs.user=> (conj '(:west :north :north) :south)           ;; <3>
(:south :west :north :north)

cljs.user=> (first '("Tom" "Dick" "Harry"))                ;; <4>
"Tom"

cljs.user=> (rest '("Tom" "Dick" "Harry"))
("Dick" "Harry")
**** vectors
***** get
(let [desserts ["Apple Pie" "Ice Cream Sandwiches" "Chocolates" "Berry Buckle"]
      favorite-index 1
      favorite-dessert (get desserts favorite-index)]
  (println "All desserts are great, but I like" favorite-dessert "the best"))
***** first second
(let [sides-list (list [4.2 6] [4 4] [3 4] [5.5 3])]
  (for [sides sides-list
        :let [a (first sides)
              b (second sides)
              c (Math/sqrt (+ (Math/pow a 2) (Math/pow b 2)))]]                           
    [a b c]))
***** conj
****** 1
(loop [i 0
      numbers []]
 (if (= i 10)
   numbers
   (recur (inc i) (conj numbers i))))                      ;; <1>
****** 2
cljs.user=> (conj ["Moe" "Larry"] "Curly")                 ;; <1>
["Moe" "Larry" "Curly"]

cljs.user=> (first ["Athos" "Porthos" "Aramis"])
"Athos"
***** rest->list
cljs.user=> (rest ["Athos" "Porthos" "Aramis"])            ;; <2>
("Porthos" "Aramis")
***** add remove
(assoc test2 0 "test")
(merge test2 1 2 3)
***** slice
****** subvec
  (vec                                                     ;; <1>
    (concat                                                ;; <2>
      (subvec contact-list 0 idx)                          ;; <3>
      (subvec contact-list (inc idx)))))
***** concat
  (vec                                                     ;; <1>
    (concat                                                ;; <2>
      (subvec contact-list 0 idx)                          ;; <3>
      (subvec contact-list (inc idx)))))
***** nth
cljs.user=> (nth ["Athos" "Porthos" "Aramis"] 1)           ;; <3>
"Porthos"
***** ([
cljs.user=> (["Athos" "Porthos" "Aramis"] 1)               ;; <4>
"Porthos"
***** cost
  (vec                                                     ;; <1>
    (concat                                                ;; <2>
      (subvec contact-list 0 idx)                          ;; <3>
      (subvec contact-list (inc idx)))))
**** ClojureScript Data Literals
***** tab
|-----------+------------------------------------------------+----------------------------------------|
| Data Type | Description                                    | Example                                |
|-----------+------------------------------------------------+----------------------------------------|
| Number    | Integer or floating point numbers              | 17.4                                   |
| String    | Textual data                                   | "Today is the first day..."            |
| Character | Textual data                                   | \a                                     |
| Boolean   | Logical true/false                             | true                                   |
| Keyword   | Lightweight identifiers                        | :role                                  |
| Symbol    | Identifiers that are extensively used internal | 'cljs-is-awesome                       |
|           | to ClojureScript                               |                                        |
| List      | Ordered collection supporting efficient        | '(1 3 5 7 9)                           |
|           | traversal                                      |                                        |
| Vector    | Ordered collection supporting efficient access | [0 2 4 6 8]                            |
|           | by index                                       |                                        |
| Map       | Unordered collection associating unique keys   | {:name "Kayleigh", :age 29}            |
|           | to values                                      |                                        |
| Set       | Unordered collection of unique values          | #{true "ubiquity" 9.2}                 |
| nil       | The empty value                                | nil                                    |
| Object    | JavaScript object - used for interop           | #js {"isJs" true, "isImmutable" false} |
| Array     | JavaScript array - used for interop            | #js ["Lions" "Tigers" "Bears"]         |
|-----------+------------------------------------------------+----------------------------------------|
***** Numbers
****** q

32                                                         ;; <1>

012                                                        ;; <2>

0xbeef                                                     ;; <3>

0.6                                                        ;; <4>

1.719493e3                                                 ;; <5>

-0.12e-4                                                   ;; <6>

1 Decimal integer
2 Octal integer starts with a leading zero
3 Hexadecimal integer starts with leading 0x
4 Float
5 Float with an exponent
6 Float with a sign and exponent with a sign
****** inc  dec
    (add (inc x) (dec y))))
***** chars
\a                                                           ;; <2>
****** cast
******* number to char 
user> (doc char)
-------------------------
clojure.core/char
([x])
  Coerce to char
nil

***** Strings
****** q

"Quick! Brown foxes!"                                        ;; <1>

\a                                                           ;; <2>

"Column 1\tColumn 2"                                         ;; <3>

"foo
bar"                                                         ;; <4>

1 Simple string
2 Single character strings can be represented by the character
 proceeded by a backslash
3 String with special character
4 Strings can span multiple lines
****** str
    (str greeting ", " name)))                             ;; <3>
****** split
(def words (clojure.string/split
            "it was the best of times it was the worst of times"
            #" "))

****** join
  (->> contact                                             ;; <2>
       ((juxt :first-name :last-name))                     ;; <3>
       (str/join " ")))
****** string/replace
(defn disemvowel
  [string]
  (clojure.string/replace string #"(?i)[aeiou]" ""))
****** format
 (format "%d %d" (apply max xs) (apply min xs))))

***** Booleans
ClojureScript also uses JavaScript booleans. Since the only possible
options for a boolean are true or false, we will forego an extended
example.
***** Keywords
We now encounter a data type that does not have a JavaScript
equivalent. A keyword is represented by a name preceded by a
colon. Keywords evaluate to themselves, and two keywords with the
same name are considered equal. One interesting property of
keywords is that they can be used as a function. When used as a
function, the keyword expects a map as an argument and it will
return the value in the map for which it is the key. When a keyword
begins with two colons, the current namespace will be prepended to
the keyword.

Keywords

:a-keyword                                                  ;; <1>

::namespaced-keyword                                        ;; <2>

:explicit-ns/keyword                                        ;; <3>

{:name "Bill", :type "admin"}                               ;; <4>

(:type user)                                                ;; <5>

1 Simple keyword
2 With implicit namespace - shorthand for :
 cljs.user/namespaced-keyword
3 With explicit namespace
4 Used as keys in a map
5 Used as a function to perform a map lookup
***** Symbols

Symbols are an interesting data type because they are closely linked
to the Lisp family of programming languages from which
ClojureScript is derived. Symbols are names that usually evaluate to
some other object. We have seen symbols in almost every example
without even thinking about it.

my-function                                                 ;; <1>

first                                                       ;; <2>

1 Symbol referring to a user-defined variable
2 Symbol referring to a built-in function

Of ClojureScript‚Äôs data types, symbols are probably the most difficult
to comprehend. They have a very meta quality about them, and they
do not directly correspond to another familiar concept. When
ClojureScript code is evaluated, it will try to resolve a symbol to the
thing that it names. Sometimes, we want to refer to a symbol itself
rather than the thing that it names, in which case we can place a
single quote in front of the symbol to ‚Äúquote‚Äù it, instructing the
ClojureScript reader to not evaluate it. Since they are not used very
commonly in application code, we will not revisit symbols to the
depth that we will with the other data types.
***** Lists

(+ 1 2 3 4)                                                 ;; <1>

'(+ 1 2 3 4)                                                ;; <2>

'(some data)                                                ;; <3>

'()                                                         ;; <4>

1 A list that is interpreted as an expression and evaluated
2 Prevent evaluation of a list by starting it with a single quote
3 Lists can contain any ClojureScript data type
4 An empty list
***** Vectors

Vectors are comprised of a number of expressions contained inside
square brackets. When ClojureScript encounters a vector, it will
interpret it as a data structure and will not try to evaluate it as a
function call. They are used in a similar manner to JavaScript arrays
and are the most common data structure in ClojureScript. Vectors
are also used to list the arguments that a function takes.

Vectors

[]                                                          ;; <1>

["Alice" "Bob" "Carol"]                                     ;; <2>

(defn say-hello [name]                                      ;; <3>
  (println "Hello," name))

1 An empty vector
2 A vector used to define a collection of strings
3 A vector used to declare a function‚Äôs argument list
***** Maps
{}                                                          ;; <1>

{"product" "Self-Sealing Stem Bolt"                         ;; <2>
 "sku" "DS9-SB09"
 "stock" 212}

{:name "Jorge", :age 29}                                    ;; <3>

1 An empty map
2 A map using strings as keys
3 A map using keywords as keys


 :transitions {"yes" :embarked,
               "no" :lost-game}
***** Sets

Sets are an unordered collection of unique elements. They are often
used when we want to avoid duplicates or need to quickly determine
whether an element is in a collection. Sets are declared with any
number of elements contained inside curly brackets that are prefixed
with a pound sign.

Sets

#{}                                                         ;; <1>

#{"admin" "editor" "author" "subscriber"}                   ;; <2>

1 An empty set
2 A set with several unique strings
***** Nil
Nil is the empty value and is always written as nil. It is the
equivalent of null in JavaScript and acts the same as false when
used as a boolean.
**** convert
***** str->int
(defn str->int [s] (Integer/parseInt s))
***** Integer.
(map #(Integer. %) (str/split game #":"))
**** maps
***** stract
{:type :start
 :title "Starbase Lambda"
 :dialog (str "Welcome, bold adventurer! You are about to embark on a dangerous "
              "quest to find the Tetryon Singularity.\nAre you up to the task?")
 :transitions {"yes" :embarked,
               "no" :lost-game}}

(any data typs as keys)
exampl vectors as key                
cljs.user=> {[:b 3] :miss, [:a 7] :hit}
{[:b 3] :miss, [:a 7] :hit}
***** create
****** {}
cljs.user=> {:type "talk"                                  ;; <1>
             :title "Simple Made Easy"
             :author "Rick Hickey"}
{:type "talk", :title "Simple Made Easy", :author "Rick Hickey"}

****** hash-map
cljs.user=> (hash-map :foo "bar", :baz "quux")             ;; <2>
{:baz "quux", :foo "bar"}
***** change of add new
****** assoc

cljs.user=> (defn add-sales-tax [cart-item]                ;; <1>
              (let [{:keys [price]} cart-item]
                (assoc cart-item :sales-tax (* price tax-rate))))
#'cljs.user/add-sales-tax

cljs.user=> (add-sales-tax {:name "Medium T-Shirt"         ;; <2>
                            :price 10.00})
{:name "Medium T-Shirt", :price 10, :sales-tax 0.79}

cljs.user=> (assoc trail                                   ;; <2>
                   :difficulty :moderate
                   :location "Colorado"
                   :max-elevation 12800)
***** remove
****** by key dissoc
cljs.user=> (defn untrack [session]
              (dissoc session :ip :user-agent))
#'cljs.user/untrack

cljs.user=> (untrack my-session)
{:start 1464641029299, :is-active? true, :page-views []}
****** narow dow by select-keys
cljs.user=> (select-keys my-session [:start :is-active? :page-views])
{:start 1464641029299,
 :is-active? true,
 :page-views []}
***** merge
cljs.user=> (defn click [location target]
              (merge (event :click)
                     {:location location, :target target}))
***** get
  (let [scene (get game current)

cljs.user=> (def fido {:breed "Boxer" :color "brown" :hungry? true})
#'cljs.user/fido

cljs.user=> (get fido :breed)
"Boxer"
***** (:
cljs.user=> (:color fido)
"brown"
***** :?)
cljs.user=> (fido :hungry?)
true
***** get-in
  (get-in scene [:transitions "yes"])
***** conj<-[]
cljs.user=> (conj {:x 10 :y 12} [:z 7])
{:x 10, :y 12, :z 7}
***** first ->[]
cljs.user=> (first {:x 10, :y 12, :z 7})
[:x 10]
***** rest->([]...)
cljs.user=> (rest {:x 10, :y 12, :z 7})
([:y 12] [:z 7])
***** repl
****** 01
#+begin_src clojure

(def cart [{:name "Silicone Pancake Mold" :price 10.49}
                       {:name "Small Pour-Over Coffee Maker" :price 18.96}
                       {:name "Digital Kitchen Scale" :price 24.95}])

(def tax-rate 0.079)
(defn add-sales-tax [cart-item]                ;; <1>
              (let [{:keys [price]} cart-item]
                (assoc cart-item :sales-tax (* price tax-rate))))

(add-sales-tax {:name "Medium T-Shirt"         ;; <2>
                            :price 10.00})


(map add-sales-tax cart)                       ;; <3>

#+end_src

#+RESULTS:
| #'user/cart                                                                                                                                                                                                               |
| #'user/tax-rate                                                                                                                                                                                                           |
| #'user/add-sales-tax                                                                                                                                                                                                      |
| {:name "Medium T-Shirt", :price 10.0, :sales-tax 0.79}                                                                                                                                                                    |
| ({:name "Silicone Pancake Mold", :price 10.49, :sales-tax 0.8287100000000001} {:name "Small Pour-Over Coffee Maker", :price 18.96, :sales-tax 1.49784} {:name "Digital Kitchen Scale", :price 24.95, :sales-tax 1.97105}) |
****** 02

#+begin_src clojure
(map add-sales-tax cart)                       ;; <3>
#+end_src

#+RESULTS:
| :name | Silicone Pancake Mold        | :price | 10.49 | :sales-tax | 0.8287100000000001 |
| :name | Small Pour-Over Coffee Maker | :price | 18.96 | :sales-tax |            1.49784 |
| :name | Digital Kitchen Scale        | :price | 24.95 | :sales-tax |            1.97105 |

****** 03
******* 001
#+begin_src clojure
(map #(:name %) cart)                       ;; <3>
#+end_src

#+RESULTS:
| Silicone Pancake Mold | Small Pour-Over Coffee Maker | Digital Kitchen Scale |

******* 002
#+begin_src clojure
(map (fn [elm] (:name elm)) cart)                       ;; <3>
#+end_src

#+RESULTS:
| Silicone Pancake Mold | Small Pour-Over Coffee Maker | Digital Kitchen Scale |

******* 003
#+begin_src clojure
(map #(:name %1) cart)                       ;; <3>
#+end_src

#+RESULTS:
| Silicone Pancake Mold | Small Pour-Over Coffee Maker | Digital Kitchen Scale |

****** 04 discount
******* defn

#+begin_src clojure
(defn discount [products pct-discount]
  (map (fn [product] (assoc product :price (* pct-discount (:price product)))) products))
#+end_src

#+RESULTS:
: #'user/discount
******* use
#+begin_src clojure
(discount cart 1.2)
#+end_src

1.2
| :name | Silicone Pancake Mold        | :price |             12.588 |
| :name | Small Pour-Over Coffee Maker | :price |             22.752 |
| :name | Digital Kitchen Scale        | :price | 29.939999999999998 |

0.2
| :name | Silicone Pancake Mold        | :price | 2.0980000000000003 |
| :name | Small Pour-Over Coffee Maker | :price | 3.7920000000000003 |
| :name | Digital Kitchen Scale        | :price |               4.99 |

1
| :name | Silicone Pancake Mold        | :price | 10.49 |
| :name | Small Pour-Over Coffee Maker | :price | 18.96 |
| :name | Digital Kitchen Scale        | :price | 24.95 |

0.9
| :name | Silicone Pancake Mold        | :price |  9.441 |
| :name | Small Pour-Over Coffee Maker | :price | 17.064 |
| :name | Digital Kitchen Scale        | :price | 22.455 |
**** atoms
***** def
(def counter (atom 0))
***** get
****** deref
Since an atom provides a reference to some value at any point in
time, we can dereference it - that is, get the immutable value to which
it refers - by using the deref macro or its shorthand form, @.

counter                                                    ;; <1>
;; => #object[cljs.core.Atom {:val 0}]
(deref counter)                                            ;; <2>
;; => 0

@counter                                                   ;; <3>
;; => 0
***** set
****** swap!
******* counter
(swap! counter inc)

@counter
;; => 1

(swap! counter + 9)

@counter
;; => 10

(swap! counter (constantly 0))

******* creature and base-creature
(def creature
  (atom {:type "water"
         :life 50
         :abilities ["swimming" "speed"]}))

(def base-creature @creature)                              ;; <1>

(swap! creature update :abilities conj "night vision")

@creature                                                  ;; <2>
;; => {:type "water"
;;     :life 50
;;     :abilities ["swimming" "speed" "night vision"]}

base-creature                                              ;; <3>
;; => {:type "water"
;;     :life 50
;;     :abilities ["swimming", "speed"]}
****** reset!
(reset! counter 0)

@counter
;; => 0
***** set-validator!
(set-validator! creature
  (fn [c] (>= (:life c) 0)))

(swap! creature assoc :life 10) ;; Ok

(swap! creature assoc :life -1) ;; Throws error

(:life @creature) ;; 10
***** watch
****** add-watch

(defonce app-state (atom 0))                               ;; <1>

(def app-container (gdom/getElement "app"))

(defn render [state]                                       ;; <2>
  (set! (.-innerHTML app-container)
        (hiccups/html
          [:div
            [:p "Counter: " [:strong state]]
            [:button {:id "up"} "+"]
            [:button {:id "down"} "-"]])))

(defonce is-initialized?
  (do
    (gevents/listen (gdom/getElement "app") "click"
      (fn [e]
        (condp = (aget e "target" "id")
          "up"   (swap! app-state inc)
          "down" (swap! app-state dec))))

    (add-watch app-state :counter-observer                 ;; <3>
      (fn [key atom old-val new-val]
        (render new-val)))

    (render @app-state)

    true))
****** remove-watch
(remove-watch app-state :counter-observer)
***** patterns
****** Guideline #1: Pass atoms explicitly

In order to keep a function testable and easy to reason about, we
should always explicitly pass in any atom(s) on which it operates as
arguments rather than operating on a global atom from its scope:

;; Don't do this
(def state (atom {:counter 0}))                            ;; <1>
(defn increment-counter []
  (swap! state update :counter inc))

;; OK
(defn increment-counter [state]                            ;; <2>
  (swap! state update :counter inc))
****** Guideline #2: Prefer fewer atoms
In general, an application should have fewer atoms with more data
rather than a separate atom for every piece of state. It is simpler to
think about transitioning our entire app state one step at a time
rather than synchronizing separate pieces of state:

;; Don't do this
(def account-a (atom 100))                                 ;; <1>
(def account-b (atom 100))
(swap! account-a - 25)
(swap! account-b + 25)

;; OK
(def accounts (atom {:a 100                                ;; <2>
                     :b 100}))
(swap! accounts
  (fn [accounts]
    (-> accounts
        (update :a - 25)
        (update :b + 25))))

1 Represent each piece of state as a separate atom
2 Represent our ‚Äúworld‚Äù as an atom
**** actions
***** costing
****** into
(fn [xs test-elems]                                        ;; <1>
  (println "Checking whether" xs                           ;; <2>
           "contains each of" test-elems)
  (let [xs-set (into #{} xs)]                              ;; <3>
    (every? xs-set test-elems)))

    
cljs.user=> (def my-vec ["Lions" "Tigers" "Bears" "Lions"])
#'cljs.user/my-vec

cljs.user=> (defn loud [word]
              (str word "!"))
#'cljs.user/loud

cljs.user=> (map loud my-vec)                              ;; <1>
("Lions!" "Tigers!" "Bears!" "Lions!")

cljs.user=> (into [] (map loud my-vec))                    ;; <2>
["Lions!" "Tigers!" "Bears!" "Lions!"]

cljs.user=> (into '() (map loud my-vec))                   ;; <3>
("Lions!" "Bears!" "Tigers!" "Lions!")
# 3 Putting the seq into a list reverses the elements

cljs.user=> (into #{} (map loud my-vec))                   ;; <4>
#{"Lions!" "Tigers!" "Bears!"}
***** filter
****** by defn
cljs.user=> (filter even? '(1 2 3 4 5))                    ;; <1>
(2 4)

cljs.user=> (defn longer-than-4? [s]                       ;; <2>
              (> (count s) 4))
#'cljs.user/longer-than-4?

cljs.user=> (filter longer-than-4?                         ;; <3>
                    ["Life" "Liberty" "Pursuit" "of" "Happiness"])
("Liberty" "Pursuit" "Happiness")
****** by key?

cljs.user=> (def cart [{:name "Silicone Pancake Mold" :price 10.49 :taxable? false}
                       {:name "Small Pour-Over Coffee Maker" :price 18.96 :taxable? true}
                       {:name "Digital Kitchen Scale" :price 24.95 :taxable? true}])

#'cljs.user/cart
cljs.user=> (filter :taxable? cart)
({:name "Small Pour-Over Coffee Maker", :price 18.96, :taxable? true}
 {:name "Digital Kitchen Scale", :price 24.95, :taxable? true})

--------------------------------------- 
(reduce +                                                  ;; <1>
        (map :price                                        ;; <2>
             (filter :taxable? cart)))                     ;; <3>
***** set
cljs.user=> (set! js/testScores (clj->js updated-scores))  ;; <4>
***** get
****** set default value
(get contact :address {})
***** nested
****** get-in
(get-in user [:sessions 0 :page-views 0])

(get
  (get
    (get
      (get user :sessions)                                 ;; <1>
     0)                                                    ;; <2>
   :page-views)                                            ;; <3>
  0)                                                       ;; <4>
****** assoc-in
(assoc-in user
          [:sessions 0 :page-views]                        ;; <1>
          [(page-view "www.learn-cljs.com" 123456 [])])    ;; <2>

(assoc-in {} [:foo :bar :baz] "quux")
=> {:foo {:bar {:baz "quux"}}}
****** update-in
cljs.user=> (update-in {:num 1} [:num] inc)
{:num 2}
***** sort
(defn flip [d a]
  (sort (case d \R < \L >) a))

(sort a) = <
***** loop
****** doseq
(def numbers [4, 8, 15, 16, 23, 42])

(doseq [n numbers]
  (println "The number is" n))
***** let
****** bind
(let [bindings]
  expr1
  expr2
  ...
  expr-n)
(defn parse-msg [msg-raw]
  (let [msg-types {:c ::control
                   :e ::event
                   :x ::error}
        msg (reader/read-string msg-raw)
        type (:t msg)
        data (:d msg)]
    (println "Got data:" data)
    [(get msg-types type) data]))

    
the names
that we declare first are available in later bindings. For example, we
defined msg as the result of evaluating the expression
****** vector bind
******* def
(let [[id name rank extra] [420 "Pepper" "Sgt."]]
  (println "Hello," rank name "- you have ID =" id "and extra =" extra))

;; Hello, Sgt. Pepper - you have ID = 420 and extra = nil
******* _
(let [[_ name rank] [420 "Pepper" "Sgt."]]
  (println "Hello," rank name))

;; Hello, Sgt. Pepper

******* &
(let [[eat-now & eat-later] ["nachos" "salad" "apples" "yogurt"]]
  (println "Please pass the" eat-now)
  (println "I'm saving these for later:" eat-later))

;; Please pass the nachos
;; I'm saving these for later: (salad apples yogurt)

******* 
****** map bind
******* def
(let [{x :x
       y :y} {:x 534 :y 497 :z -73}]
  (println "Inspecting coordinates:" x "," y))

;; Inspecting coordinates: 534 , 497
******* :strs instead of :keys
(let [{:keys [x y z]} {:x 534 :y 497 :z -73}]
  (println "x = " x "| y = " y "| z = " z))

;; x =  534 | y =  497 | z =  -73
******** exampl
cljs.user=> (defn add-sales-tax [cart-item]                ;; <1>
              (let [{:keys [price]} cart-item]
                (assoc cart-item :sales-tax (* price tax-rate))))
#'cljs.user/add-sales-tax

cljs.user=> (add-sales-tax {:name "Medium T-Shirt"         ;; <2>
                            :price 10.00})
{:name "Medium T-Shirt", :price 10, :sales-tax 0.79}
******* :keys :or
(let [{:keys [fname lname profession]
       :or {profession "professional"}} {:fname "Sasha" :lname "Simonova"}]
  (println fname lname "is a" profession))

;; Sasha Simonova is a professional
***** map
****** map
****** map-indexed
it calls the mapping function with the index of the element in
the sequence as well as the element itself
      (map-indexed (fn [idx contact]
                     (render-contact-list-item idx contact (= idx selected)))
                   contacts)]))
***** reduce
****** example
cljs.user=> (def cart                                      ;; <1>
              [{:name "Tachyon Emitter Array" :price 1099.45}
               {:name "Dilithium Matrix" :price 2442.00}
               {:name "Antimatter Chamber Sealant Rings (4)" :price 19.45}
               {:name "Toothbrushes (2-pack)" :price 8.50}])
#'cljs.user/cart

cljs.user=> (defn add-price [total item]                   ;; <2>
              (+ total (:price item)))
#'cljs.user/add-price

cljs.user=> (def total (reduce add-price 0 cart))          ;; <3>
#'cljs.user/total

cljs.user=> (.toFixed total 2)
"3569.40"
****** repl
#+begin_src clojure
(def events [{:event :click, :timestamp 1463889739}
             {:event :typing, :timestamp 1463889745}
             {:event :click, :timestamp 1463889746}
             {:event :click, :timestamp 1463889753}])
#+end_src

#+RESULTS:
: #'user/events

#+begin_src clojure
(defn longest-idle-time [events]
  (:max-idle                                               ;; <1>
    (reduce (fn [{:keys [max-idle last-ts]} event]         ;; <2>
              (let [ts (:timestamp event)
                    idle-time (- ts last-ts)]
                {:max-idle (max max-idle idle-time)        ;; <3>
                 :last-ts ts}))
            {:max-idle 0
             :last-ts (:timestamp (first events))}         ;; <4>
            events)))
#+end_src

#+RESULTS:
: #'user/longest-idle-time

#+begin_src clojure
(longest-idle-time events)
#+end_src

#+RESULTS:
: 7

#+begin_src clojure
(defn count-user-clicks [events]
  (reduce #(if (= :click (:event %2))
                 (inc %1)
                 %1)
          0 events))
#+end_src

#+begin_src clojure
(defn count-user-clicks [events]
  (reduce (fn [clicks-sum event]
            (if (= (:event event) :click )
                 (inc clicks-sum)
                 clicks-sum))
          0 events))

(count-user-clicks events)
#+end_src

#+begin_src clojure
(defn count-user-clicks [events]
  (reduce (fn [clicks-sum event]
            (or (= (:event event) :click )
                 (inc clicks-sum)
                 clicks-sum))
          0 events))

(count-user-clicks events)
#+end_src
#+RESULTS:
| #'user/count-user-clicks |
|                        3 |

#+begin_src clojure
(count-user-clicks events)
#+end_src

#+RESULTS:
: 3

#+begin_src clojure
(def duble-click-max-lag 1)
(defn count-user-duble-clicks [events]
  (reduce (fn [last-event new-event]
            (unless (:clicks-sum last-event)
                      (assoc last-event :clicks-sum 0))
            (when (= (:event new-event) :click )
              (when (last-event new-event)
              (assoc last-event :clicks-sum (inc clicks-sum))
                 clicks-sum))
                  )
          0 events))

(count-user-duble-clicks events)
#+end_src

#+begin_src clojure
;; (defn test [{clicks-sum :clicks-sum
(defn test [{un-clicks-sum :clicks-sum
             last-ts :timestamp}
            {new-event :event
             new-ts :timestamp}]
  ;; (println last-event)
  ;; (when-not (integer? clicks-sum) (def clicks-sum 0))
  ;; (let [clicks-sum 1]
  ;;  [clicks-sum last-ts new-event last-ts])
  ;; (def clicks-sum 1)
  (let [clicks-sum
        (if (and (= new-event :click )
                 (> duble-click-max-lag
                 (- new-ts last-ts)))
        (inc un-clicks-sum)
        0)]
        ;; 0]
          ;; (inc clicks-sum))))
  ;; [clicks-sum last-ts new-event last-ts]
  ;; (def clicks-sum (inc clicks-sum))
  ;; (inc clicks-sum)
  [clicks-sum (- new-ts last-ts)
   (> duble-click-max-lag (- new-ts last-ts))
    (and (= new-event :click )
                            (> duble-click-max-lag
                               (- new-ts last-ts)))])
  ;; (println clicks-sum)
  ;; (println last-ts)
  ;; (println "test ok")
  )

;; (test (first events) (second events))
;; (events 3)
(test (events 2) (events 3))
#+end_src

#+RESULTS:
| #'user/test                          |
| class java.lang.NullPointerException |

#+begin_src clojure
(test (first events) (second events))
#+end_src

#+RESULTS:
: 1463889745

#+begin_src clojure
(def duble-click-max-lag 1)
#+end_src

#+begin_src clojure
(defn count-user-duble-clicks [events]
  (:clicks-sum
   (reduce (fn [{;; last-event :event
                un-clicks-sum :clicks-sum
                last-ts :timestamp}
                {new-event :event
                new-ts :timestamp}]
            (let [clicks-sum (if (integer? un-clicks-sum) un-clicks-sum 0)]
              (when (= new-event :click )
                (when (> duble-click-max-lag
                        (- new-ts last-ts)
                      (inc clicks-sum))))
                {;; :event last-event
                :clicks-sum clicks-sum 
                :timestamp last-ts}))
          events)))

(count-user-duble-clicks events)
#+end_src

#+RESULTS:
| #'user/count-user-duble-clicks |
|                              0 |

#+begin_src clojure
(def duble-click-max-lag 10000000000000000)
(count-user-duble-clicks events)
#+end_src

#+begin_src clojure
(def duble-click-max-lag 10000000000000000)
(inc duble-click-max-lag)
duble-click-max-lag
#+end_src

#+RESULTS:
| #'user/duble-click-max-lag |
|                          0 |

#+begin_src clojure
(defn its-biger? [old new]
  (let [delta (- (:timestamp new) (:timestamp old))]
    (if (< (:bigest old) delta)
      {:bigest delta, :timestamp (:timestamp new)}
      {:bigest (:bigest old), :timestamp (:timestamp new)})
    ))

(reduce #() {:bigest 0, :timestamp (:timestamp (ferst events))} events)

#+end_src
***** update
(defn maybe-set-address [contact]                          ;; <1>
  (if (:address contact)
    (update contact :address make-address)
    contact))

(update state :contacts                            ;; <2>
        replace-contact idx contact)
(update state :contacts
        add-contact contact)))))
***** update-in
      (update-in [:tags] conj "immutability")
      (update-in [:rating] inc)
      (update-in [:title] #(str % " for fun and profit"))
***** transient
(transient {})
;; #object[cljs.core.TransientArrayMap]

The API for working with transients is similar to the standard
collection API, but the transformation functions all have a !
appended, e.g. assoc!, conj!. The read API, however, is identical to
that of immutable collections. A transient collection may be
converted back to its persistent counterpart using the persistent!
function:

(-> {}
    transient                                              ;; <1>
    (assoc! :speed 12.3)
    (assoc! :position [44, 29])
    persistent!)                                           ;; <2>
1 Convert map to a transient
2 Convert transient map back to a persistent (immutable) structure

*** Constract
**** #
(some #(= (:name %) "Potion of Wisdom")
      (get-inventory player))
**** on functin operatins
***** comp
****** q
1 comp creates a new function that composes others together
the -> macro applied in reverse
—Ç–æ–µ—Å—Ç—å –±–µ—Ä—ë—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫–Ω–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç
(= ((comp f g) x)
   (f (g x)))
****** x1
(defn user-status [user]
  [:div {:class "user-status"}
    ((juxt
      (comp bold nickname)                                 ;; <1>
      (partial with-status                                 ;; <2>
               [:span {:class "status-indicator"}]))
     user)])
***** partial
****** q
2 partial creates a function that already has some arguments
 supplied

(defn add [x y]                                            ;; <1>
  (+ x y))

(def add-5 (partial add 5))                                ;; <2>

(add-5 10)
;; 15

(def add-5
  (fn [y]
    (add 5 y)))
****** x1
(defn user-status [user]
  [:div {:class "user-status"}
    ((juxt
      (comp bold nickname)                                 ;; <1>
      (partial with-status                                 ;; <2>
               [:span {:class "status-indicator"}]))
     user)])
***** juxt
****** x01
(def minmax
  (juxt #(reduce Math/min %)
        #(reduce Math/max %)))

(minmax [48 393 12 14 -2 207])
;; [-2 393]
****** x02
  (->> contact                                             ;; <2>
       ((juxt :first-name :last-name))                     ;; <3>
       (str/join " ")))

((juxt :first-name :last-name )
  (contact-list 0))
 
["Phillip" "Jordan"]

((juxt :first-name :last-name) {:first-name "Bob" :last-name "Jones"})
;; ["Bob" "Jones"]
****** 3
**** range
***** take
(take 5 (range))                                           ;; <5>
;; (0 1 2 3 4)
***** map
(map inc (take 5 (range)))
;; (1 2 3 4 5)
***** doseq
(doseq [i (range 5)]
  (println "Looping!"))
;; Looping!
;; Looping!
;; Looping!
;; Looping!
;; Looping!
;; nil                                                     ;; <3>
**** lambda
***** fn
(def remove-by                                             ;; <1>
  (fn [pred]
    (fn [list]                                             ;; <2>
      (reduce (fn [acc elem]
                (if (pred elem) acc (conj acc elem)))
              []
              list))))

(def remove-reds                                           ;; <3>
  (remove-by (fn [product] (= "Red" (:color product)))))

(remove-reds
  [{:sku "99734N" :color "Blue"}
   {:sku "99294N" :color "Red"}
   {:sku "11420Z" :color "Green"}])
***** #( %1 %2)
#(let [xs-set (into #{} %1)]
   (every? xs-set %2)))
***** (# %)

(#(str "Hello " %) "world")
;; => "Hello world"
***** closure
(defn make-adder [x]
  (fn [y]
    (add x y)))

((make-adder 1) 5)  ;; 6
((make-adder 2) 5)  ;; 7
((make-adder 10) 5) ;; 15

**** defn
***** def fn
(def contains-every?                                       ;; <1>
  (fn [xs test-elems]
    ;; function body...
    ))

(defn contains-every? [xs test-elems]                      ;; <2>
  ;; function body...
)
***** (defn ([1] ()) ([2]())
****** q
(defn my-multi-arity-fn
 ([a] (println "Called with 1 argument" a))                ;; <1>
 (                                                         ;; <2>
  [a b]                                                    ;; <3>
  (println "Called with 2 arguments" a b)                  ;; <4>
 )
 ([a b c] (println "Called with 3 arguments" a b c)))

(defn my-single-arity-fn [a]                               ;; <5>
  (println "I can only be called with 1 argument"))
****** super call
(defn page-view
  ([url] (page-view url (.now js/Date) []))    ;; <1>
  ([url loaded] (page-view url loaded []))
  ([url loaded events]
    {:url url
      :loaded loaded
      :events events}))

***** Docstrings
(defn make-inventory
  "Creates a new inventory that initially contains no items.
  Example:
  (assert
    (== 0 (count (:items (make-inventory)))))"
  []
  {:items []})
***** (doc
dev:cljs.user=> (doc make-inventory)
-------------------------
cljs.user/make-inventory
([])
  Creates a new inventory that initially contains no items.
  Example:
  (assert
    (== 0 (count (:items (make-inventory)))))
nil
***** :pre :post
(defn fractional-rate [num denom]
  {:pre [(not= 0 denom)]                                   ;; <1>
   :post [(pos? %) (<= % 1)]}                              ;; <2>
  (/ num denom))

(fractional-rate 1 4)
;; 0.25

(fractional-rate 3 0)
;; Throws:
;; #object[Error Error: Assert failed: (not= 0 denom)]
***** recur

#+begin_src clojure
(defn factorial
 ([n] (factorial n 1 []))
 ([n result result-list]
  (if (<= n 1)
    result-list
    (recur (dec n) (* result n) (conj result-list (* result n))))))

(factorial 5)
#+end_src

#+RESULTS:
| #'user/factorial |
| [5 20 60 120]    |
***** bindin params
(fn [{:keys [max-idle last-ts]} event]         ;; <2>
              (let [ts (:timestamp event)
                    idle-time (- ts last-ts)]
                {:max-idle (max max-idle idle-time)        ;; <3>
                 :last-ts ts}))
**** Thread
***** Thread-First Transformation
(-> val                                                    ;; <1>
    (fn-1 :foo)                                            ;; <2>
    (fn-2 :bar :baz)                                       ;; <3>
    (fn-3))

(fn-3                                                      ;; <4>
  (fn-2
    (fn-1 val :foo)
    :bar :baz))
***** thread last
  (->> contact                                             ;; <2>
       ((juxt :first-name :last-name))                     ;; <3>
       (str/join " ")))
**** try
***** base

(try
  (do-stuff 42)
  (call-api {:id 17})                                      ;; <1>
  true                                                     ;; <2>
  (catch js/Error e                                        ;; <3>
    (println "An error occurred:" e)
    false)
  (finally
    (do-cleanup)))                                         ;; <4>

1 Multiple expressions can occur inside the body of try
2 try is an expression and returns a value
3 catch is always used with the class of the value that should be
 caught
4 If a finally clause is present, it is called for side effects
***** throw
dev:cljs.user=> (try
           #_=>   (throw {:type :custom-error
           #_=>           :message "Something unpleasant occurred"})
           #_=>   (catch :default e
           #_=>     (println "Caught value:" e)))
Caught value: {:type :custom-error, :message Something unpleasant occurred}
nil
***** ex-info
****** def
(ex-info "A parse error occurred"                          ;; <1>
         {:line 17 :char 8 :last-token "for"}              ;; <2>
         :unexpected-end-of-string)                        ;; <3>

Creating an ExceptionInfo error

1 Error message
2 Metadata
3 Cause (optional)
****** long
(def required-attrs [:id :email])
(def allowed-attrs [:id :email :first-name :last-name])

(defn make-user [user-data]
  (cond
    (not (every? #(contains? user-data %) required-attrs))
    (throw (ex-info "Missing required attributes"
                    {:required required-attrs
                     :found (keys user-data)}
                    :validation-failed))
    (not (every? #(some (set allowed-attrs) %) (keys user-data)))
    (throw (ex-info "Found disallowed attributes"
                    {:allowed allowed-attrs
                     :found (keys user-data)}
                    :validation-failed))
    :else (assoc user-data :type :user)))

(defn hydrate-user []
  (let [serialized-user (try
                          (.getItem js/localStorage "current-user")
                          (catch js/Error _
                            (throw (ex-info "Could not load data from localStorage"
                                            {}
                                            :local-storage-unsupported))))
        user-data (try
                    (.parse js/JSON serialized-user)
                    (catch js/Error _
                      (throw (ex-info "Could not parse user data"
                                      {:string serialized-user}
                                      :parse-failed))))]
    (-> user-data
        (js->clj :keywordize-keys true)
        make-user)))

(try
  (hydrate-user)
  (catch ExceptionInfo e
    (case (ex-cause e)
      :local-storage-unsupported
      (display-error (str "Local storage not supported: "
                                                     (ex-message e)))
      :parse-failed
      (do (display-error "Could not load user data from browser")
          (log-error {:type :user-parse-failed
                      :source (:string (ex-data e))}))
      :validation-failed
      (do (display-error "There was an error in your submission. Please correct it before continuing.")
          (update-field-errors (ex-data e)))
      ;; Re-throw an unknown error
      (throw e))))

***** repl
#+begin_src clojure
(try
  :success
  (catch :default _
    :failure))

#+end_src

#+begin_src clojure
(try
                (throw {:type :custom-error
                                                :message "Something unpleasant occurred"})
                (catch :default e
                        (println "Caught value:" e)))
#+end_src

#+RESULTS:
: Please reevaluate when nREPL is connected

*** colections
**** conj

cljs.user=> (conj '(:lions :tigers) :bears)                ;; <1>
(:bears :lions :tigers)

cljs.user=> (conj [:lions :tigers] :bears)                 ;; <2>
[:lions :tigers :bears]

cljs.user=> (conj #{:lions :tigers} :bears)                ;; <3>
#{:lions :tigers :bears}

cljs.user=> (conj #{:lions :tigers} :tigers)               ;; <4>
#{:lions :tigers}
**** first
**** rest
**** remove
***** pred
(remove pos? [1 -2 2 -1 3 7 0])
;;=> (-2 -1 0)

(remove nil? [1 nil 2 nil 3 nil])
;;=> (1 2 3)

;; remove items that are evenly divisible by 3
(remove #(zero? (mod % 3)) (range 1 21))
;;=> (1 2 4 5 7 8 10 11 13 14 16 17 19 20)
***** codewars

(defn disemvowel [string]
  (->> string
       (remove (set "aeiouAEIOU"))
       (apply str)))

**** repl
***** Sequence
#+begin_src clojure

(def samples [[8 12 4]
              [9 3 3 6]
              [11 4]])

#+end_src

#+RESULTS:
: Please reevaluate when nREPL is connected

** reagent
*** js/alert
(fn [message]
  (js/alert (.toUpperCase (str message "!!!!!!!!!!!!!!!!"))))

(ns my-cljs-project.core)                                  ;; <1>
(js/alert "Hello World")                                   ;; <2>
*** innerHTML
(set! (.-innerHTML someElem)
      (count
        (filter missing-phone? users)))
*** console
*** add input
(in-ns 'learn-cljs.weather)                                ;; <1>
;; nil

(def input (.createElement js/document "input"))           ;; <2>
;; #'learn-cljs.weather/input                              ;; <3>

(.appendChild (.-body js/document) input)
;; #object[HTMLInputElement [object HTMLInputElement]]

(set! (.-placeholder input) "Enter something")             ;; <4>
;; "Enter something"

(defn handle-input [e]                                     ;; <5>
  (swap! app-state assoc :text (-> e .-target .-value)))
;; #'learn-cljs.weather/handle-input

(set! (.-onkeyup input) handle-input)
;; #object[learn_cljs$weather$handle_input ...]

-----------------------------------------

(defn event-value [e] (-> e .-target .-value))
;; #'learn-cljs.weather/event-value

(defn update-text [value]
  (swap! app-state assoc :text value))
;; #'learn-cljs.weather/update-text

(defn handle-input [e]
  (update-text (event-value e)))
;; #'learn-cljs.weather/handle-input
------------------

[:input {:type "text"
         :placeholder "Postal Code"
         :value (:postal-code @app-state)
         :on-change #(swap! app-state assoc :postal-code (-> % .-target .-value))}]
*** button
**** on-click
[:button {:on-click get-forecast!} "Go"]
**** gevents/listen
(defn render [state]                                       ;; <2>
  (set! (.-innerHTML app-container)
        (hiccups/html
          [:div
            [:p "Counter: " [:strong state]]
            [:button {:id "up"} "+"]
            [:button {:id "down"} "-"]])))

(defonce is-initialized?
  (do
    (gevents/listen (gdom/getElement "app") "click"
      (fn [e]
        (condp = (aget e "target" "id")
          "up"   (swap! app-state inc)
          "down" (swap! app-state dec))))

    (add-watch app-state :counter-observer                 ;; <3>
      (fn [key atom old-val new-val]
        (render new-val)))
*** change in map
**** whith swap! and assoc
         (swap! app-state assoc :postal-code (-> % .-target .-value))}]
**** swap! and update-in
(defn handle-response [resp]
  (let [today (get-in resp ["list" 0 "main" "temp"])       ;; <1>
        tomorrow (get-in resp ["list" 8 "main" "temp"])]
    (swap! app-state                                       ;; <2>
        update-in [:temperatures :today :value] (constantly today))
    (swap! app-state
        update-in [:temperatures :tomorrow :value] (constantly tomorrow))))
*** render
(defn mount-app-element []                                 ;; <4>
  (rdom/render [app] (gdom/getElement "app")))

  
(defn app []
  [:div {:class "app"}
   [title]                                                 ;; <2>
   [:div {:class "temperatures"}
    (for [temp (vals (:temperatures @app-state))]          ;; <3>
      [temperature temp])]
   [postal-code]])

(defn title []
  [:h1 (:title @app-state)])


(defonce app-state (r/atom {:title "WhichWeather"
                            :postal-code ""
                            :temperatures {:today {:label "Today"
                                                   :value nil}
                                           :tomorrow {:label "Tomorrow"
                                                      :value nil}}}))

(defn temperature [temp]                                   ;; <1>
  [:div {:class "temperature"}
   [:div {:class "value"}
    (:value temp)]
   [:h2 (:label temp)]])

(mount-app-element)


  <body>
    <div id="app">
    </div> <!-- end of app div -->
    <script src="cljs-out/dev-main.js" type="text/javascript"></script>

** JavaScript
*** acces
js/document
js/window
*** js->clj
*** clj->js
#+begin_src clojure
cljs.user=> (def characters #{"Lucy" "Ricky" "Fred" "Ethel"})
#'cljs.user/characters
cljs.user=> (def js-characters (clj->js characters))
#'cljs.user/js-characters
cljs.user=> js-characters
#js ["Ricky" "Fred" "Lucy" "Ethel"]
cljs.user=> (js->clj js-characters)
["Ricky" "Fred" "Lucy" "Ethel"]
cljs.user=> (= characters (js->clj js-characters))
false
#+end_src
*** testScores
#+begin_src js
var testScores = [                                         // <1>
  { id: 1, score: 86, gradeLetter: "B" },                  // <2>
  { id: 2, score: 93, gradeLetter: "A" },
  { id: 3, score: 78, gradeLetter: "C" },
];
#+end_src



#+begin_src clojure
cljs.user=> (def cljs-scores (js->clj js/testScores))      ;; <1>
#'cljs.user/cljs-scores

cljs.user=> cljs-scores
[{"id" 1, "score" 86, "gradeLetter" "B"}
{"id" 2, "score" 93, "gradeLetter" "A"}
{"id" 3, "score" 78, "gradeLetter" "C"}]

cljs.user=> (conj cljs-scores                              ;; <2>
                  {"id" 4, "score" 87, "gradeLetter" "B"})
[{"id" 1, "score" 86, "gradeLetter" "B"}
{"id" 2, "score" 93, "gradeLetter" "A"}
{"id" 3, "score" 78, "gradeLetter" "C"}
{"id" 4, "score" 87, "gradeLetter" "B"}]

cljs.user=> cljs-scores
[{"id" 1, "score" 86, "gradeLetter" "B"}
{"id" 2, "score" 93, "gradeLetter" "A"}
{"id" 3, "score" 78, "gradeLetter" "C"}]

cljs.user=> (def updated-scores                            ;; <3>
              (conj cljs-scores {"id" 4, "score" 87, "gradeLetter" "B"}))
#'cljs.user/updated-scores

cljs.user=> (set! js/testScores (clj->js updated-scores))  ;; <4>
#js [#js {:id 1, :score 86, :gradeLetter "B"}
#js {:id 2, :score 93, :gradeLetter "A"}
#js {:id 3, :score 78, :gradeLetter "C"}
#js {:id 4, :score 87, :gradeLetter "B"}]
#+end_src

Converting between JavaScript and ClojureScript data

1 Convert testScores to a ClojureScript value
2 Create a modified value by appending a new score and verify that
 the value in the var cljs-scores was not changed
3 Bind the updated scores to the updated-scores var
4 Convert the updated scores back to a JavaScript object and update
 testScores to the new value
*** Objects
**** created
cljs.user=> (js-obj "isJavaScript" true, "type" "object")  ;; <1>
#js {:isJavaScript true, :type "object"}

cljs.user=> #js {"isJavaScript" true, "type" "object"}     ;; <2>
#js {:isJavaScript true, :type "object"}
**** Prop
***** (.-
cljs.user=> (def js-hobbit #js {"name" "Bilbo Baggins", "age" 111})
#'cljs.user/js-hobbit
cljs.user=> (.-age js-hobbit)
111
***** (..
#+begin_src js
// JavaScript nested lookup
var settings = {                                           // <1>
  personal: {
    address: {
      street: "123 Rolling Hills Dr",
    },
  },
};

// Prints "123 Rolling Hills Dr"
console.log(settings.personal.address.street);             // <2>
#+end_src


The syntax is slightly different from a normal property access: (..
obj -propOne -propTwo).

(println
  (.. settings -personal -address -street))
; Prints "123 Rolling Hills Dr"
***** set!

cljs.user=> (set! (.-name js-hobbit) "Frodo")              ;; <1>
"Frodo"

cljs.user=> (set! (.-age js-hobbit) 33)
33

cljs.user=> js-hobbit                                      ;; <2>
#js {:name "Frodo", :age 33}
**** use metod
cljs.user=> (.indexOf primes 11)                           ;; <1>
4

cljs.user=> (.pop primes)                                  ;; <2>
13

cljs.user=> primes
#js [1 3 5 7 11]

Using JavaScript Array Methods

1 Call the indexOf method on primes - equivalent to
 primes.indexOf(11) in JavaScript
2 Call the pop method - equivalent to primes.pop() in JavaScript
*** vector
**** create
cljs.user=> (array "foo" "bar" "baz")
#js ["foo" "bar" "baz"]

cljs.user=> #js [1 3 5 7 11]
#js [1 3 5 7 11]
**** aget and aset
cljs.user=> (def primes #js [1 3 5 7 11])                  ;; <1>
#'cljs.user/primes

cljs.user=> (aget primes 2)                                ;; <2>
5

cljs.user=> (aset primes 5 13)                             ;; <3>
13

cljs.user=> primes                                         ;; <4>
#js [1 3 5 7 11 13]
**** use metod
cljs.user=> (.indexOf primes 11)                           ;; <1>
4

cljs.user=> (.pop primes)                                  ;; <2>
13

cljs.user=> primes
#js [1 3 5 7 11]

Using JavaScript Array Methods

1 Call the indexOf method on primes - equivalent to
 primes.indexOf(11) in JavaScript
2 Call the pop method - equivalent to primes.pop() in JavaScript
**** array-seq
  (doseq [elem (array-seq (gdom/getElementsByClass "contact-summary"))]
    (gevents/listen elem "click"
      (fn [e] (on-open-contact e state)))))
*** exampl
**** input
(in-ns 'learn-cljs.weather)                                ;; <1>
;; nil

(def input (.createElement js/document "input"))           ;; <2>
;; #'learn-cljs.weather/input                              ;; <3>

(.appendChild (.-body js/document) input)
;; #object[HTMLInputElement [object HTMLInputElement]]

(set! (.-placeholder input) "Enter something")             ;; <4>
;; "Enter something"

(defn handle-input [e]                                     ;; <5>
  (swap! app-state assoc :text (-> e .-target .-value)))
;; #'learn-cljs.weather/handle-input

(set! (.-onkeyup input) handle-input)
;; #object[learn_cljs$weather$handle_input ...]


(defn event-value [e] (-> e .-target .-value))
;; #'learn-cljs.weather/event-value

(defn update-text [value]
  (swap! app-state assoc :text value))
;; #'learn-cljs.weather/update-text

(defn handle-input [e]
  (update-text (event-value e)))
;; #'learn-cljs.weather/handle-input
**** repls
#+begin_src clojure
js/testScores

(def cljs-scores (js->clj js/testScores))

cljs-scores

(conj cljs-scores                              ;; <2>
                  {"id" 4, "score" 87, "gradeLetter" "B"})
(set! js/testScores (clj->js (conj cljs-scores {"id" 4, "score" 87, "gradeLetter" "B"})))

(def js-hobbit #js {"name" "Bilbo Baggins", "age" 111})

(def js/hobbit #js {"name" "Bilbo Baggins", "age" 111})

(.-name js-hobbit)
(.-age js-hobbit)

(set! (.-age js-hobbit) 113)

(set! js/hobbit js-hobbit)

js/js-hobbit
js/hobbit



;; var settings = {                                           // <1>
;;   personal: {
;;     address: {
;;       street: "123 Rolling Hills Dr",
;;     },
;;   },
;; };

js/settings

(.-personal js/settings)
(.. js/settings -personal -address -street)


(println (.. js/settings -personal -address -street))


(def student #js {"locker" 212
                  "grades" #js{"Math" "A",
                              "Physics" "B",
                              "English" "A+"}})

student

(.. student -locker)

(.. student -grades )
(.. student -grades -Physics)

(set! js/student student)


(set! (.. student -grades -Physics) "A")

(def primes #js [1 3 5 7 11])

primes

(.pop primes)
(.indexOf primes 5)
(.indexOf primes 7)

;; var books = [
;;   {
;;     title: "A History of LISP",
;;     subjects: ["Common Lisp", "Scheme", "Clojure"],
;;   },
;;   {
;;     title: "All About Animals",
;;     subjects: ["Piranhas", "Tigers", "Butterflies"],
;;   },
;; ];

js/books

(.-title (aget js/books 0))
(aget (.-subjects (aget js/books 0)) 1)

(set! (.-title (aget js/books 1)) "Dangerous Creatures")

(def books (js->clj js/books))

books

(get books 0)
(get  (get books 0) "title")
(get  (get books 0) "subjects")
(get (get  (get books 0) "subjects") 1)

js/books

;; Dangerous Creatures
(get books 1)
(get  (get books 1) "title")
(set! (get  (get books 1) "title") "Dangerous Creatures")

(let [js-book (clj->js js/books)]
    (.push js/books js-book)
    (.-length js/books))
#+end_src
*** date time
**** microsec
***** (.now js/Date)
cljs.user=> (defn with-duration [session end-time]
              (let [duration-in-ms (- end-time (:start session))
                    duration-in-s (.floor Math (/ duration-in-ms 1000))]
                (assoc session :duration duration-in-s)))

cljs.user=> (def my-session
              (session (.now js/Date) true "127.0.0.1" "Some UA"))
#'cljs.user/my-session

;; Wait a few seconds

cljs.user=> (with-duration my-session (.now js/Date))
{:start 1464641029299,
 :is-active? true,
 :ip "127.0.0.1",
 :user-agent "Some UA",
 :page-views [],
 :duration 14}
**** getHours
(defn get-current-hour []                                  ;; <1>
  (.getHours (js/Date.)))

(defn get-time-of-day-greeting [hour]                      ;; <2>
  (condp >= hour
    11 "Good morning"
    15 "Good day"
    "Good evening"))

(get-time-of-day-greeting (get-current-hour))
;; "Good day"
**** Date 
(defn get-current-hour []                                  ;; <1>
  (.getHours (js/Date.)))

(defn get-time-of-day-greeting [hour]                      ;; <2>
  (condp >= hour
    11 "Good morning"
    15 "Good day"
    "Good evening"))

(get-time-of-day-greeting (get-current-hour))
;; "Good day"
** Google Closure‚Äôs
*** .querySelector
cljs.user=> (def body (.querySelector js/document "body")) ;; <2>
(def body (.querySelector js/document "body"))
#'cljs.user/body
*** gdom
**** require
cljs.user=> (require '[goog.dom :as gdom])                 ;; <1>
(require '[goog.dom :as gdom])
nil
**** createElement
cljs.user=> (def heading (gdom/createElement "h1"))        ;; <3>
(def heading (gdom/createElement "h1"))
#'cljs.user/heading
**** setTextContent
cljs.user=> (gdom/setTextContent heading "I am new")
(gdom/setTextContent heading "I am new")
nil
**** appendChild
cljs.user=> (gdom/appendChild body heading)                ;; <4>
(gdom/appendChild body heading)
nil
**** removeNode

Use the goog.dom.removeNode() function to remove both the h1
(gdom/removeNode heading)

**** setProperties
cljs.user=> (gdom/setProperties heading #js {"style" "color:red;"
                                             "class" "big-title"})

(gdom/setProperties heading #js {"style" "color:red;"
                                             "class" "big-title"})
**** gdom/getElement
****** get by id
(.-value (gdom/getElement id))
****** get and set value
(def input (gdom/getElement "user-input"))
#'cljs.user/input

(def target (gdom/getElement "copy-target"))
#'cljs.user/target

(.-value input)                                ;; <1>
"ClojureScript is fun"

(set! (.-value input) "ClojureScript is fun")


(gdom/setTextContent target (.-value input))
nil

*** goog.events
**** q
(require '[goog.events :as gevents])
nil

(defn update-target [evt]                      ;; <1>
              (gdom/setTextContent target
                (.. evt -currentTarget -value)))
#'cljs.user/update-target

(gevents/listen input                          ;; <2>
                            "keyup"
                            update-target)
#object[Object [object Object]]
**** example
#+begin_src clojure
(ns passwords.core
  (:require [goog.dom :as gdom]
            [goog.events :as gevents]))

(defn values-same? [field-1 field-2]
  (= (aget field-1 "value")
     (aget field-2 "value")))

(defn handle-change [password confirmation status]
  (gdom/setTextContent status
                       (if (values-same? password confirmation)
                         "Matches"
                         "Do not match")))

(let [password (gdom/createElement "input")
      confirmation (gdom/createElement "input")
      status (gdom/createElement "p")
      app (gdom/getElement "app")]
  (gdom/setProperties password #js {"type" "password"})
  (gdom/setProperties confirmation #js {"type" "password"})

  (gevents/listen password "keyup"
                  #(handle-change password confirmation status))
  (gevents/listen confirmation "keyup"
                  #(handle-change password confirmation status))

  (gdom/setTextContent app "")
  (gdom/appendChild app password)
  (gdom/appendChild app confirmation)
  (gdom/appendChild app status))
#+end_src
*** repl
#+begin_src clojure
(require '[goog.dom :as gdom])
(require '[goog.events :as gevents])

(def status (gdom/createElement "h1"))
(gdom/setTextContent status "Enter password")

(def pass-one (gdom/createElement "input"))
(def pass-tow (gdom/createElement "input"))
(gdom/setProperties pass-one #js {"type" "password"})
(gdom/setProperties pass-tow #js {"type" "password"})

(gdom/appendChild target status)
(gdom/appendChild target pass-one)
(gdom/appendChild target pass-tow)

(defn pass-checker-one[event]
  (if (= (.-value pass-one) (.-value pass-tow))
    (gdom/setTextContent status "match")
    (gdom/setTextContent status "not match")))
                       

              ;; (gdom/setTextContent target
              ;;   (.. evt -currentTarget -value)))

(gevents/listen pass-one                          ;; <2>
                            "keyup"
                            pass-checker-one)


(gevents/listen pass-tow                          ;; <2>
                            "keyup"
                            pass-checker-one)
#+end_src
* NEXT Log
:PROPERTIES:
:header-args: :tangle no 
:END:
** NEXT reagent-test
*** new project
clj -X:new :template figwheel-main :name learn-cljs/reagent-test :args '["+deps"]'
cd reagent-test
*** build
clj -A:fig:build

(js/alert "Am I connected?")

  To get started:
  -->  Change into the 'reagent-test' directory
  -->  Start build with 'clojure -M:fig:build'
*** run in eshell
**** run  eshell
#+begin_src elisp :results output silent :dir reagent-test
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
  (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** comannds
clj -A:fig:build
(js/alert "Am I connected?")
  Exit: :cljs/quit
cljs/quit
(cljs/quit)
*** files
**** deps.edn
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/reagent-test/deps.edn")

:deps {;; Other deps...
       reagent/reagent {:mvn/version "1.0.0"}}

        org.clojure/data.json {:mvn/version "2.5.1"}
**** index.html
(find-file-other-frame "~/Dev/ClojureScript/tutorials/my-cljs-project/reagent-test/resources/public/index.html")
**** src/reagent_test/core.cljs
***** file
(find-file-other-frame "reagent-test/src/learn_cljs/reagent_test.cljs")
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/reagent-test/src/learn_cljs/
***** src/reagent_test/core.cljs
:PROPERTIES:
:header-args: :tangle reagent-test/src/learn_cljs/reagent_test.cljs
:END:
****** +original+
#+begin_src clojure :tangle no
(ns ^:figwheel-hooks learn-cljs.reagent-test
  (:require
   [goog.dom :as gdom]))

(println "This text is printed from src/learn_cljs/reagent_test.cljs. Go ahead and edit it and see reloading in action.")

(defn multiply [a b] (* a b))

;; define your app data so that it doesn't get over-written on reload
(defonce app-state (atom {:text "Hello world!"}))

(defn get-app-element []
  (gdom/getElement "app"))



;; specify reload hook with ^:after-load metadata
(defn ^:after-load on-reload []
  ;; optionally touch your app-state to force rerendering depending on
  ;; your application
  ;; (swap! app-state update-in [:__figwheel_counter] inc)
)

#+end_src
****** ns
org sorce blok tag :backend nil
(setq org-babel-clojure-backend nil)
(setq org-babel-clojure-backend 'clojure-cli)

#+begin_src clojure 
(ns learn-cljs.reagent-test
    (:require [reagent.core :as r]                         ;; <1>
              [reagent.ratom :as ratom]                    ;; <2>
              [reagent.dom :as rdom]
              [goog.dom :as gdom]
              [goog.events :as gevents]))
#+end_src

****** cells
#+begin_src clojure
(def a-cell (r/atom 0))                                    ;; <3>
(def b-cell (r/atom 0))
(def c-cell
  (ratom/make-reaction                                     ;; <4>
    #(+ @a-cell @b-cell)))

(def a (gdom/getElement "cell-a"))
(def b (gdom/getElement "cell-b"))
(def c (gdom/getElement "cell-c"))
(def test-text (gdom/getElement "test-text"))

(defn update-cell [cell]
  (fn [e]
    (let [num (js/parseInt (.. e -target -value))]
      (reset! cell num))))


(gevents/listen a "change" (update-cell a-cell))           ;; <5>
(gevents/listen b "change" (update-cell b-cell))

(ratom/run!                                                ;; <6>
  (set! (.-value c) @c-cell)
  )
#+end_src
****** state
#+begin_src clojure 


(defn- date-string [d]
  (let [pad-zero #(.padStart (.toString %) 2 "0")
        y (.getFullYear d)
        m (-> (.getMonth d) inc pad-zero)
        d (pad-zero (.getDate d))]
    (str y "-" m "-" d)))

(defn- current-date-string [d]
  (let [pad-zero #(.padStart (.toString %) 2 "0")
        y (.getFullYear d)
        m (-> (.getMonth d) inc pad-zero)
        d (pad-zero (.getDate d))]
    (str y "-" m "-" d)))

(defn initial-inputs []
  {:date (date-string (js/Date.))
  ;; {:date (current-date-string (js/Date.))
   :minutes "0"})

(defonce state
  (r/atom {:inputs (initial-inputs)
           :entries {}}))

(defn date-input []
  (let [val (r/cursor state [:inputs :date])]              ;; <1>
    (fn []
      [:div.input-wrapper
        [:label "Day"]
        [:input {:type "date"
                 :value @val                               ;; <2>
                 :on-change #(reset! val                   ;; <3>
                               (.. % -target -value))}]])))

(defn time-input []
  (let [val (r/cursor state [:inputs :minutes])]
    (fn []
      [:div.input-wrapper
       [:label "Time (minutes)"]
       [:input {:type "number" :min 0 :step 1
                :value @val
                :on-change #(reset! val (.. % -target -value))}]])))

#+end_src
(defn time-input []
  [:div.input-wrapper
    [:label "Time (minutes)"]
    [:input {:type "number" :min 0 :step 1}]])
    
(defn date-input []
  [:div.input-wrapper
    [:label "Day"]
    [:input {:type "date"
             :value (get-in @state [:inputs :date])
             :on-change #(swap! state assoc-in [:inputs :date]
                           (.. % -target -value))}]])
(defn date-input []
  [:div.input-wrapper
    [:label "Day"]
    [:input {:type "date"
             :value (get-in @state [:inputs :date])}]])
****** submit
#+begin_src clojure 
(defn submit-button []
  [:div.actions
   [:button {:type "submit"} "Submit"]])

(defn submit-form [state]
  (let [{:keys [date minutes]} (:inputs state)]
    (-> state
        (assoc-in [:entries date] (js/parseInt minutes))
        (assoc :inputs (initial-inputs)))))

#+end_src

(defn form []
  [:form.input-form {:on-submit (fn [e]
                                  (.preventDefault e)
                                  (swap! state submit-form))}
    ;; ...
  ])
(defonce state
  ;; (r/atom {:inputs {:date (date-string (js/Date.))
  (r/atom {:inputs {:date (current-date-string (js/Date.))
                    :minutes "0"}}))
****** chart recton
#+begin_src clojure 
(defn get-points [entries]
  (let [ms-in-day 86400000
        chart-days 30
        now (js/Date.now)]
    (map (fn [i]
           (let [days-ago (- chart-days (inc i))
                 date (date-string (js/Date. (- now (* ms-in-day days-ago))))]
             (get entries date 0)))
         (range chart-days))))


#+end_src
****** chart
#+begin_src clojure
(defn- random-point []
  (js/Math.floor (* (js/Math.random) 100)))

(defonce chart-data
  (let [points (map random-point (range 30))]              ;; <1>
    (r/atom {:points points
             :chart-max (reduce max 1 points)})))

(def chart-width 400)
(def chart-height 200)
(def bar-spacing 2)

(defn chart []
  (let [entries (r/cursor state [:entries])
        chart-data (ratom/make-reaction
                    #(let [points (get-points @entries)]
                       {:points points
                        :chart-max (reduce max 1 points)}))]
    (fn []
      (let [{:keys [points chart-max]} @chart-data
            bar-width (- (/ chart-width (count points))
                         bar-spacing)]
        [:svg.chart {:x 0 :y 0
                     :width chart-width :height chart-height}
         (for [[i point] (map-indexed vector points)
               :let [x (* i (+ bar-width bar-spacing))
                     pct (- 1 (/ point chart-max))
                     bar-height (- chart-height (* chart-height pct))
                     y (- chart-height bar-height)]]
           [:rect {:key i
                   :x x :y y
                   :width bar-width
                   :height bar-height}])]))))

#+end_src
****** aditional functions
#+begin_src clojure

#+end_src
****** CANCELED hello world
CLOSED: [2025-05-22 Thu 00:45]

(ns learn-cljs.exercise-tracker
  (:require [reagent.dom :as rdom]
            [goog.dom :as gdom]))
#+begin_src clojure :tangle no

(defn hello []
  [:p "Hello World"])

(rdom/render
  hello                                                    ;; <1>
  (gdom/getElement "app"))                                 ;; <2>
#+end_src
****** form
(defn date-input []
  [:div.input-wrapper                                      ;; <1>
    [:label "Day"]
    [:input {:type "date"}]])                              ;; <2>

#+begin_src clojure
(defn form []
  [:form.input-form {:on-submit (fn [e]
                                    (.preventDefault e)
                                    (swap! state submit-form))}
    [date-input]                                           ;; <3>
    [time-input]
    [submit-button]])
#+end_src
  [:form.input-form

****** render app
(defn app []
  [form])
#+begin_src clojure
(defn app []
  [:div.app
    [chart]
    [form]])

(rdom/render
  [app]
  (gdom/getElement "app"))
#+end_src

(set! test-text (hello))
(js/alert "Am I connected?")
***** repl to send
[reagent.dom :as rdom]
(require '[reagent.dom :as rdom] :reload)
(require '[reagent.dom :as rdom] )
(require '[reagent.dom :as rdom] )
(:require [reagent.core :as r]                         
              [reagent.ratom :as ratom]               
              [reagent.dom :as rdom]
              [goog.dom :as gdom]
              [goog.events :as gevents])

# (ns learn-cljs.reagent-test
(in-ns 'learn-cljs.reagent-test)

(rdom/render
  hello
  (gdom/getElement "app"))

(rdom/render hello)


(rdom/render
  (hello)
  (gdom/getElement "app"))
*** run
(buyn-shell-start "konsole -e 'cd ~/Dev/ClojureScript/tutorials/my-cljs-project/reagent-test/'")
#+begin_src elisp :results output silent :dir reagent-test
(buyn-shell-start "konsole -e 'clj -M:fig:build'")
;; (evil-previous-line)
;; (org-cycle)
(delete-other-windows)
#+end_src
*** repl
**** open eshell
#+begin_src elisp :results output silent :dir reagent-test
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
        (evil-window-split)
        (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** command
cd reagent-test
clj -A:fig:build

(in-ns 'learn-cljs.reagent-test)
#+begin_src elisp :results output silent :dir reagent-test
clj -A:fig:build
#+end_src
*** NEXT todo
**** —Ä–∞–∑–æ–±—Ä–∞—Ç—Å—è —Å —Ç–∞–Ω–≥–ª–æ–º
–∫–∞–∫–æ–≥–æ —á—ë—Ä—Ç–∞ –æ–Ω–æ –æ—Ç–≤–∞–ª–∏–ª–æ—Å
(prn (binding [*out* (java.io.StringWriter.)
**** DONE –æ—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–∂–Ω—É –≤–µ—Ä—Å–∏—é
CLOSED: [2025-05-21 Wed 21:24]
**** DONE –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—è 
CLOSED: [2025-05-21 Wed 21:24]
—Å–¥–µ–ª–∞—Ç—å –ø–æ—Ö–æ–∂–∏–º
**** CANCELED —É–±–∏—Ä–∞—Ç—å –ø–æ–∫–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
CLOSED: [2025-05-22 Thu 00:34]
**** CANCELED —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—à–∏–±–∫–∏
CLOSED: [2025-05-22 Thu 00:34]
**** CANCELED –ø–æ—Å—Ç–æ—Ä–∞—Ç—Å—è –ø–æ–Ω—è—Ç—å —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –º–µ—à–∞–µ—Ç
CLOSED: [2025-05-22 Thu 00:34]
**** DONE –∑–∞–ø—É—Å–∏—Ç—å —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ
CLOSED: [2025-06-05 Thu 00:42]
–ø–æ—Ö–æ–∂–µ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–ª–æ–∂—É—Ä–µ –∞ –Ω–µ –≤ –ø—Ä–≥—Ä–∞–º–µ
—É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–æ –Ω–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ!!! –Ω–æ —Å–∫—Ä–∏–ø—Ç –±–ª–æ—á–∏–ª –ª–æ–∫–∞–ª—Ö–æ—Å—Ç
**** DONE –ø–æ–æ–±—à–∞—Ç—å –≥–ø—Ç
CLOSED: [2025-06-05 Thu 00:42]
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/reagent-test/dev.cljs.edn

^{:watch-dirs ["src"]
  :css-dirs ["resources/public/css"]
  :auto-testing true
   }
{:main learn-cljs.reagent-test}

tree src/

src/
`-- learn_cljs
    `-- reagent_test.cljs

/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/reagent-test/resources/public/index.html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link rel="icon" href="https://clojurescript.org/images/cljs-logo-icon-32.png">
  </head>
  <body>
    <h1>Reactive Cells</h1>
    <div>
      <label id="test-text">empty </label>
    </div>
    <div>
      <label for="cell-a">A: </label>
      <input id="cell-a" type="number" value="0" />
    </div>
    <div>
      <label for="cell-b">B: </label>
      <input id="cell-b" type="number" value="0" />
    </div>
    <div>
      <label for="cell-c">C: </label>
      <input id="cell-c" readonly type="number" />
    </div>
    <div id="app"></div>    
    <!-- KEEP THIS SCRIPT TAG : IT LOADS YOUR APPLICATION CODE -->
    <script src="cljs-out/dev-main.js" type="text/javascript"></script>
  </body>
</html>

browser console log
Content-Security-Policy: The page‚Äôs settings blocked an inline script (script-src-elem) from being executed because it violates the following directive: ‚Äúscript-src-elem 'none'‚Äù 3 sandbox eval code:17:34
Content-Security-Policy: The page‚Äôs settings blocked the loading of a resource (media-src) at data: because it violates the following directive: ‚Äúmedia-src http: file:‚Äù 3 localhost:9500
Content-Security-Policy: The page‚Äôs settings blocked a JavaScript eval (script-src) from being executed because it violates the following directive: ‚Äúscript-src 'none'‚Äù (Missing 'unsafe-eval')
Source: HTMLElement.prototype.focus = ((realFocu‚Ä¶ 3 localhost:9500
Adding a listener for beforescriptexecute events is deprecated and will be removed soon. DocumentCSP.js:33:28
Loading failed for the <script> with source ‚Äúhttp://localhost:9500/cljs-out/dev-main.js‚Äù. localhost:9500:28:63
Content-Security-Policy: The page‚Äôs settings blocked a script (script-src-elem) at http://localhost:9500/cljs-out/dev-main.js from being executed because it violates the following directive: ‚Äúscript-src-elem 'none'‚Äù 4 localhost:9500
Error processing sheet 
CSSStyleSheet 
 DOMException: CSSStyleSheet.cssRules getter: Not allowed to access cross-origin stylesheet
    process moz-extension://5cffb2dc-415f-4314-8066-808e7d149831/nscl/content/prefetchCSSResources.js:165
    checkNode moz-extension://5cffb2dc-415f-4314-8066-808e7d149831/nscl/content/prefetchCSSResources.js:245
    observer moz-extension://5cffb2dc-415f-4314-8066-808e7d149831/nscl/content/prefetchCSSResources.js:287
prefetchCSSResources.js:175:17
** weather
*** new project
clj -X:new :template figwheel-main :name learn-cljs/weather :args '["+deps" "--reagent"]'
$ clj -X:new :template figwheel-main :name learn-cljs/weather :args 
*** bilde
cd weather                                               # <1>
clj -A:fig:build                                         # <2>
*** Running Figwheel
*** run in eshell
**** run  eshell
#+begin_src elisp :results output silent
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
  (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** comannds
cd weather
clj -A:fig:build
*** repls commands
**** test
(in-ns 'learn-cljs.weather)                                ;; <1>
;; nil

(def input (.createElement js/document "input"))           ;; <2>
;; #'learn-cljs.weather/input                              ;; <3>

(.appendChild (.-body js/document) input)
;; #object[HTMLInputElement [object HTMLInputElement]]

(set! (.-placeholder input) "Enter something")             ;; <4>
;; "Enter something"

(defn handle-input [e]                                     ;; <5>
  (swap! app-state assoc :text (-> e .-target .-value)))
;; #'learn-cljs.weather/handle-input

(set! (.-onkeyup input) handle-input)
;; #object[learn_cljs$weather$handle_input ...]
**** refactored
(defn event-value [e] (-> e .-target .-value))
;; #'learn-cljs.weather/event-value

(defn update-text [value]
  (swap! app-state assoc :text value))
;; #'learn-cljs.weather/update-text

(defn handle-input [e]
  (update-text (event-value e)))
;; #'learn-cljs.weather/handle-input
**** add button
(in-ns 'learn-cljs.weather)                                ;; <1>
** starbase
*** run in eshell
**** run eshell
#+begin_src elisp :results output silent
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
        (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** comannds
cd starbase
clj -A:fig:build
*** add code
**** cljs
***** 1
(defn prompt [game current]                                ;; <1>
  (let [scene (get game current)                           ;; <2>
        type (:type scene)]
    (io/clear term)
    (when (or (= :win type)                                ;; <3>
              (= :lose type))
      (io/print term
                (if (= :win type)                          ;; <4>
                    "You've Won! "
                    "Game Over ")))
    (io/println term (:title scene))                       ;; <5>
    (io/println term (:dialog scene))
    (io/read term #(on-answer game current %))))           ;; <6>
***** 2
(defn on-answer [game current answer]
  (let [scene (get game current)
        next ;; TODO: determine the next state
        ]
    (prompt game next)))
** starbase_E
*** run in eshell
**** run eshell
#+begin_src elisp :results output silent :dir starbase_E
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
        (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** comannds
clj -A:fig:build
*** add code
**** cljs
** doing-io
*** new
**** run eshell
#+begin_src elisp :results output silent
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
        (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** new
–ø—Ä–∏–∑–∞–ø—É—Å–∫–µ –∏–∑ –∫–æ—Ä–Ω–µ–≤–µ–∫–∞ –ø—É—Ç—å —ç—Ç–æ —á—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–µ–µ –æ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ –ø—É—Ç—å –≤ —Å–æ—Ä—Å –ø—Ä–æ–µ–∫—Ç–∞ –∫ –∫–æ—Ä–Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø—Ä–æ–µ—Ç—Å –∫–æ–Ω–µ–Ω—ã–º –∏–º–µ–Ω–µ. –∫–æ—Ä–æ—á–µ –∑–∞–ø—É—Å–∫–∞–π –∏–∑ –∫—Ä–Ω—è—Ç- –Ω–µ–±–∑–¥–∏ –∏ –Ω–µ —É–º–Ω—è—á–∞–π–π,–≤—Å—ë –±—É–¥–µ—Ç —Ä–æ–∫–µ–Ω—Ä–æ–ª
clj -X:new :template figwheel-main :name learn-cljs/doing-io :args '["+deps"]'
cd doing-io
clj -A:fig:build
**** comannds
clj -A:fig:build

(js/alert "Am I connected?")
**** file
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/src/learn_cljs/doing-io.cljs
*** change
**** run eshell
#+begin_src elisp :results output silent :dir doing-io
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
        (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** comannds
clj -A:fig:build

(js/alert "Am I connected?")
**** cljs
*** files
**** cljs
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/src/learn_cljs/doing-io.cljs
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/src/learn_cljs/doing_io.cljs")
**** 
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/resources/public/index.html")
/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/doing-io/resources/public/index.html
*** repl
**** tax card
#+begin_src clojure
(ns shopping-cart.core
  (:require [goog.dom :as gdom]))

(def tax-rate 0.079)
(def cart [{:name "Silicone Pancake Mold" :price 10.49 :taxable? false}
           {:name "Small Pour-Over Coffee Maker" :price 18.96 :taxable? true}
           {:name "Digital Kitchen Scale" :price 24.95 :taxable? true}])

(defn add-sales-tax [cart-item]
  (assoc cart-item
         :sales-tax (* (:price cart-item) tax-rate)))

(def taxable-cart
  (map add-sales-tax
       (filter :taxable? cart)))

(def item-list (gdom/createDom "ul" nil ""))

;; Helper function to generate the display text for a product
(defn display-item [item]
  (str (:name item)
       ": "
       (:price item)
       " (tax: "
       (.toFixed (:sales-tax item) 2)
       ")"))

;; Create the list of products
(doseq [item taxable-cart]
  (gdom/appendChild
   item-list
   (gdom/createDom "li" #js {} (display-item item))))

;; Clear the entire document and append the list
(gdom/removeChildren (.-body js/document))
(gdom/appendChild (.-body js/document) item-list)
#+end_src

#+RESULTS:
: Please reevaluate when nREPL is connected
** contacts
*** new project
clj -X:new :template figwheel-main :name learn-cljs/contacts :args '["+deps"]'
cd contacts
clj -A:fig:build
*** bilde
cd contacts
clj -A:fig:build                                         # <2>
*** run in eshell
**** run eshell
#+begin_src elisp :results output silent :dir contacts
(evil-previous-line)
(org-cycle)
(delete-other-windows)
(let (buffer-name-to-close (buffer-name))
  (evil-window-split)
  (eshell)
        (evil-quit)
        (switch-to-buffer-other-frame buffer-name-to-close))
#+end_src
**** comannds
clj -A:fig:build
(js/alert "Am I connected?")
* get info
:PROPERTIES:
:header-args: :tangle no
:END:
** tree weather
#+begin_src eshell
tree -a ./weather/
#+end_src

#+RESULTS:
#+begin_example
./weather/
|-- .gitignore
|-- README.md
|-- deps.edn
|-- dev.cljs.edn
|-- figwheel-main.edn
|-- resources
|   `-- public
|       |-- css
|       |   `-- style.css
|       |-- index.html
|       `-- test.html
|-- src
|   `-- learn_cljs
|       `-- weather.cljs
|-- target
|   `-- public
|-- test
|   `-- learn_cljs
|       |-- test_runner.cljs
|       `-- weather_test.cljs
`-- test.cljs.edn

10 directories, 12 files
#+end_example

#+begin_src eshell
tree -a ../..
#+end_src

** tree
#+begin_src eshell
tree -a 
#+end_src

#+RESULTS:
#+begin_example
.
|-- .cpcache
|   |-- 2249099292.basis
|   |-- 2249099292.cp
|   |-- 2249099292.main
|   |-- 3387647126.basis
|   `-- 3387647126.cp
|-- .git
|   |-- COMMIT_EDITMSG
|   |-- HEAD
|   |-- branches
|   |-- config
|   |-- description
|   |-- hooks
|   |   |-- applypatch-msg.sample
|   |   |-- commit-msg.sample
|   |   |-- fsmonitor-watchman.sample
|   |   |-- post-update.sample
|   |   |-- pre-applypatch.sample
|   |   |-- pre-commit.sample
|   |   |-- pre-merge-commit.sample
|   |   |-- pre-push.sample
|   |   |-- pre-rebase.sample
|   |   |-- pre-receive.sample
|   |   |-- prepare-commit-msg.sample
|   |   |-- push-to-checkout.sample
|   |   |-- sendemail-validate.sample
|   |   `-- update.sample
|   |-- index
|   |-- info
|   |   `-- exclude
|   |-- logs
|   |   |-- HEAD
|   |   `-- refs
|   |       `-- heads
|   |           `-- master
|   |-- objects
|   |   |-- 0c
|   |   |   `-- bbd03849c4225b912c29c5cc1a1eb95e004406
|   |   |-- 0e
|   |   |   `-- 870ed249cff3194b020b449194b8cba79a49d3
|   |   |-- 17
|   |   |   `-- a3e74549f59d14a57aaa5d946f87798ecd2d27
|   |   |-- 1f
|   |   |   `-- 93999b09a0a7b82e830a7b9090f0551d0f280e
|   |   |-- 32
|   |   |   `-- 4d99a0a2eb602de5639061c10905a14f2ec25c
|   |   |-- 45
|   |   |   `-- 374bcfb2934e4cb107dd25d948d3b9a008f723
|   |   |-- 50
|   |   |   `-- 6579660ab72264aaa634f26bf26ae7ffbdc418
|   |   |-- 64
|   |   |   `-- 5a17d70fa7f64e2c3119372d253464688197af
|   |   |-- 65
|   |   |   `-- a5e52de8afa978f2bb081da49308b6cd34291d
|   |   |-- 68
|   |   |   `-- d8c0c529bb0772b6720ad9e763d778f384d54c
|   |   |-- 6a
|   |   |   `-- 3417b8d9d0a2fec34cf79ef2b46cc63a28b7d8
|   |   |-- 71
|   |   |   `-- 0abb86e53c60cd50c35ef8e3c3974ecd5a166c
|   |   |-- 78
|   |   |   `-- 57d22f338d2bf5a11f2c9989019274e89e11bf
|   |   |-- 8e
|   |   |   `-- 9d30e7d6e5c5c5cf8797dddb89c36afcd3ba53
|   |   |-- a4
|   |   |   `-- 5fa94e812daa483ce03c6d57b8406559ba308c
|   |   |-- a9
|   |   |   `-- 3c6e57355bd80bf964904be7322c2f011e0d22
|   |   |-- af
|   |   |   `-- 4f6bcd17f983891885b2da5bb50d94247eafde
|   |   |-- b5
|   |   |   `-- 37353beaf2793d612857b56c29e2c6bfc6f3bb
|   |   |-- bf
|   |   |   `-- 8bf5fb01b57c3c6914e97292b05eadeb0b78a6
|   |   |-- c0
|   |   |   `-- 75bf98b67f24573980200a3389426360f42eed
|   |   |-- c4
|   |   |   `-- 49315d9c35a5d2431f95a1d2d4e4831a3a00af
|   |   |-- cd
|   |   |   `-- fc3fe15c3684ed37efdd455b8de454e72d0ea0
|   |   |-- d5
|   |   |   `-- e6c53f1c5365bb3647bf2c492687effb1a4034
|   |   |-- de
|   |   |   `-- 743adcae8dd63e093efe46f514c7536e24752a
|   |   |-- ee
|   |   |   `-- d014ac3bfe7e79af47e2e71dbbb5348f55c8a3
|   |   |-- fb
|   |   |   `-- 9af43c306f53f296e24ec6309badfcf4e1345c
|   |   |-- info
|   |   `-- pack
|   `-- refs
|       |-- heads
|       |   `-- master
|       `-- tags
|-- .gitignore
|-- deps.edn
|-- index.html
|-- my-cljs-project.org
|-- out
|   |-- cljs
|   |   |-- core.cljs
|   |   |-- core.js
|   |   |-- core.js.map
|   |   |-- pprint.cljs
|   |   |-- pprint.cljs.cache.json
|   |   |-- pprint.js
|   |   |-- pprint.js.map
|   |   |-- repl.cljs
|   |   |-- repl.cljs.cache.json
|   |   |-- repl.js
|   |   |-- repl.js.map
|   |   `-- spec
|   |       |-- alpha.cljs
|   |       |-- alpha.cljs.cache.json
|   |       |-- alpha.js
|   |       |-- alpha.js.map
|   |       `-- gen
|   |           |-- alpha.cljs
|   |           |-- alpha.cljs.cache.json
|   |           |-- alpha.js
|   |           `-- alpha.js.map
|   |-- cljs_deps.js
|   |-- cljsc_opts.edn
|   |-- clojure
|   |   |-- browser
|   |   |   |-- event.cljs
|   |   |   |-- event.cljs.cache.json
|   |   |   |-- event.js
|   |   |   |-- event.js.map
|   |   |   |-- net.cljs
|   |   |   |-- net.cljs.cache.json
|   |   |   |-- net.js
|   |   |   |-- net.js.map
|   |   |   |-- repl
|   |   |   |   |-- preload.cljs
|   |   |   |   |-- preload.cljs.cache.json
|   |   |   |   |-- preload.js
|   |   |   |   `-- preload.js.map
|   |   |   |-- repl.cljs
|   |   |   |-- repl.cljs.cache.json
|   |   |   |-- repl.js
|   |   |   `-- repl.js.map
|   |   |-- string.cljs
|   |   |-- string.cljs.cache.json
|   |   |-- string.js
|   |   |-- string.js.map
|   |   |-- walk.cljs
|   |   |-- walk.cljs.cache.json
|   |   |-- walk.js
|   |   `-- walk.js.map
|   |-- goog
|   |   |-- array
|   |   |   `-- array.js
|   |   |-- asserts
|   |   |   `-- asserts.js
|   |   |-- async
|   |   |   |-- delay.js
|   |   |   |-- freelist.js
|   |   |   |-- nexttick.js
|   |   |   |-- run.js
|   |   |   `-- workqueue.js
|   |   |-- base.js
|   |   |-- debug
|   |   |   |-- debug.js
|   |   |   |-- entrypointregistry.js
|   |   |   |-- error.js
|   |   |   |-- errorcontext.js
|   |   |   |-- logbuffer.js
|   |   |   |-- logger.js
|   |   |   `-- logrecord.js
|   |   |-- deps.js
|   |   |-- disposable
|   |   |   |-- disposable.js
|   |   |   `-- idisposable.js
|   |   |-- dom
|   |   |   |-- asserts.js
|   |   |   |-- browserfeature.js
|   |   |   |-- dom.js
|   |   |   |-- htmlelement.js
|   |   |   |-- nodetype.js
|   |   |   |-- safe.js
|   |   |   |-- tagname.js
|   |   |   `-- tags.js
|   |   |-- events
|   |   |   |-- browserevent.js
|   |   |   |-- browserfeature.js
|   |   |   |-- event.js
|   |   |   |-- eventhandler.js
|   |   |   |-- eventid.js
|   |   |   |-- events.js
|   |   |   |-- eventtarget.js
|   |   |   |-- eventtype.js
|   |   |   |-- listenable.js
|   |   |   |-- listener.js
|   |   |   `-- listenermap.js
|   |   |-- fs
|   |   |   `-- url.js
|   |   |-- functions
|   |   |   `-- functions.js
|   |   |-- html
|   |   |   |-- legacyconversions.js
|   |   |   |-- safehtml.js
|   |   |   |-- safescript.js
|   |   |   |-- safestyle.js
|   |   |   |-- safestylesheet.js
|   |   |   |-- safeurl.js
|   |   |   |-- trustedresourceurl.js
|   |   |   |-- trustedtypes.js
|   |   |   `-- uncheckedconversions.js
|   |   |-- i18n
|   |   |   `-- bidi.js
|   |   |-- iter
|   |   |   `-- iter.js
|   |   |-- json
|   |   |   |-- hybrid.js
|   |   |   `-- json.js
|   |   |-- labs
|   |   |   `-- useragent
|   |   |       |-- browser.js
|   |   |       |-- engine.js
|   |   |       |-- platform.js
|   |   |       `-- util.js
|   |   |-- log
|   |   |   `-- log.js
|   |   |-- math
|   |   |   |-- coordinate.js
|   |   |   |-- integer.js
|   |   |   |-- long.js
|   |   |   |-- math.js
|   |   |   `-- size.js
|   |   |-- messaging
|   |   |   |-- abstractchannel.js
|   |   |   `-- messagechannel.js
|   |   |-- mochikit
|   |   |   `-- async
|   |   |       `-- deferred.js
|   |   |-- net
|   |   |   |-- errorcode.js
|   |   |   |-- eventtype.js
|   |   |   |-- httpstatus.js
|   |   |   |-- websocket.js
|   |   |   |-- wrapperxmlhttpfactory.js
|   |   |   |-- xhrio.js
|   |   |   |-- xhrlike.js
|   |   |   |-- xmlhttp.js
|   |   |   |-- xmlhttpfactory.js
|   |   |   `-- xpc
|   |   |       |-- crosspagechannel.js
|   |   |       |-- crosspagechannelrole.js
|   |   |       |-- directtransport.js
|   |   |       |-- nativemessagingtransport.js
|   |   |       |-- transport.js
|   |   |       `-- xpc.js
|   |   |-- object
|   |   |   `-- object.js
|   |   |-- promise
|   |   |   |-- promise.js
|   |   |   |-- resolver.js
|   |   |   `-- thenable.js
|   |   |-- reflect
|   |   |   `-- reflect.js
|   |   |-- string
|   |   |   |-- const.js
|   |   |   |-- internal.js
|   |   |   |-- string.js
|   |   |   |-- stringbuffer.js
|   |   |   |-- stringformat.js
|   |   |   `-- typedstring.js
|   |   |-- structs
|   |   |   |-- map.js
|   |   |   `-- structs.js
|   |   |-- timer
|   |   |   `-- timer.js
|   |   |-- uri
|   |   |   |-- uri.js
|   |   |   `-- utils.js
|   |   `-- useragent
|   |       |-- product.js
|   |       `-- useragent.js
|   |-- main.js
|   |-- my_cljs_project
|   |   |-- core.cljs
|   |   |-- core.cljs.cache.json
|   |   |-- core.js
|   |   `-- core.js.map
|   `-- process
|       |-- env.cljs
|       |-- env.cljs.cache.json
|       |-- env.js
|       `-- env.js.map
`-- src
    `-- my_cljs_project
        `-- core.cljs

83 directories, 211 files
#+end_example

#+begin_src eshell
tree -a ../..
#+end_src

* 2024-08-10
** Necroteuch.org : 
#+begin_src emacs-lisp  :results output silent tangle: no
(find-file-other-frame "~/Dropbox/orgs/capture/Necroteuch.org")
    #+end_src
** my-cljs-project.org
(find-file-other-frame "/home/buyn/Dev/ClojureScript/tutorials/my-cljs-project/my-cljs-project.org")
